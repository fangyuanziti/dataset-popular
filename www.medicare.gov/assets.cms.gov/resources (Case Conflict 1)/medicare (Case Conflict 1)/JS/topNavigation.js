$(document).ready(function(){var h=$("#topnav"),o=$(window),c=$("#nav-list"),v=$("#menu-btn"),x=h,e=$(".topnavsubmenu",x),t=e,y=false,n=300;var m,l,r;if($.browser.msie&&(parseFloat($.browser.version)<9)){y=true}function q(){return o.width()<980&&!y}v.click(b).keydown(function(C){k(C,v.find("a:eq(0)"))});function z(){var C=c.find(".topnavsubmenu");C.each(function(){var D=$(this).siblings("a").text();$(this).parent().addClass("sub").prepend('<span role="link" tabindex="0" class="slideForward"><span class="HiddenText 508State">Expand '+D+" menu</span></span>");$(this).prepend('<li class="backTitle"><a href="#" class="slideBack"><span></span> Back to Main Menu</a></li>')});if(o.width()<979){$(".slideForward").show();$(".backTitle").show()}o.resize(function(){if($("#page")!=null||$("#page").length!=0){if(v.hasClass("active")){c.slideToggle(0);v.removeClass("active");h.toggleClass("activenav");c.css("left","0");x.removeClass("slideOne");t.hide()}if(o.width()>=979){c.css("margin-left","0");e.css("margin-left","0");c.find(".topnavsubmenu").css("margin-left",0);x.removeClass("slideOne");e.css("width","");e.hide()}else{if(o.width()>=767&&o.width()<979){e.css("width",o.width()-60)}}e.css("left","auto")}else{c.css("display","block")}});$(".slideForward").on("click keydown",function(D){if(D.type=="keydown"&&D.keyCode!=13&&D.keyCode!=32){return}D.stopPropagation();D.preventDefault();var E=$(this).nextAll("ul").find("li.backTitle > a").first();j($(this),false,E)});$("a.slideBack").on("click",function(){var D=$(this).closest("li.sub").children("a:eq(0)");a($(this),false,D)})}if($("#page").length!=0&&!y){z()}else{c.css("display","block")}h.children("ul").children("li").each(function(){var D=$(this);if(D.children("ul").length>0){D.mouseenter(function(){u($(this))});D.children("a").focus(function(){if(!l){u($(this).parent())}});D.mouseleave(function(){f($(this))});var C=D.children("a").first();C.next().andSelf().keydown(function(E){k(E,C)});C.append("<span class='HiddenText 508State'>, collapsed</span>")}});function k(F,C){var E,D;if(c.is(":animated")){return}switch(F.keyCode){case 27:F.stopPropagation();F.preventDefault();if(q()){v.find("a:eq(0)").focus();s()}else{C.focus();f(C.parent());l=true}break;case 38:case 40:F.stopPropagation();F.preventDefault();E=$(F.target);D=F.keyCode==40;if(q()){B(E,D)}else{p(E,D,C)}break;case 37:case 39:E=$(F.target);F.stopPropagation();F.preventDefault();D=F.keyCode==39;if(q()){A(E,D)}else{g(E,D,C)}break}}function p(H,E,C){var G,D,F;if(H.is(C)){u(C.parent());G=H.next().find("li:not(.backTitle)").first()}else{G=H.closest("li:not(.backTitle)").first()}D=G.closest("li.sub").find("li:not(.backTitle)");if(H.is(C)){F=E?D.first():D.last()}else{if(E){F=G.is(D.last())?D.first():G.next("li")}else{F=G.is(D.first())?D.last():G.prev("li")}}F.children("a:eq(0)").focus()}function B(G,D){var F,C,E,H;if(G.is(v.find("a:eq(0)"))){C=c.children("li");d();F=C.first();E=D?C.first():C.last()}else{F=G.closest("li");if(F.is(".backTitle")){C=F.siblings("li")}else{H=F.closest("ul.topnavsubmenu, ul#nav-list");C=H.hasClass("topnavsubmenu")?H.find("li"):H.children("li")}if(D){E=F.is(C.last())?C.first():C.eq(C.index(F)+1)}else{E=F.is(C.first())?C.last():C.eq(C.index(F)-1)}}E.children("a:eq(0)").focus()}function g(H,E,C){var G,D,F;G=H.closest(".sub");D=G.siblings(".sub").andSelf();if(E){F=G.is(D.last())?D.first():G.next("li.sub")}else{F=G.is(D.first())?D.last():G.prev("li.sub")}F.children("a:eq(0)").focus();u(F)}function A(G,D){var F,C,E;if(G.is(v.find("a:eq(0)"))){return}F=G.closest("li");if(D){if(G.parent().is("li.sub")){j(G,false,G.next().find("li.backTitle > a").first())}}else{if(G.parent().is("li.sub")){return}E=G.closest("li.sub");if(E.length){a(G,false,E.children("a:eq(0)"))}}}function w(){if(q()){s()}else{h.children("ul").children("li").mouseleave()}}function f(C){if(o.width()>=980||y){C.children("ul").stop(true,true).hide();C.removeClass("topnavhover");C.children("a").find(".508State").first().html(", collapsed")}}function u(C){if(!q()){if(!(C.parent().parent().hasClass("activenav"))&&!C.hasClass("topnavhover")){C.children("ul").stop(true,true).show();$(".topnavhover").mouseleave();C.addClass("topnavhover");C.children("a").find(".508State").first().html(", expanded");l=false}}}function j(F,C,E){var G=o.width();var D=C?0:n;if(o.width()>=767&&o.width()<979){G-=0}x.addClass("slideOne");c.animate({left:"-="+G},D,null,function(){F.closest("li.sub").addClass("expandedNavItem").children("a, [tabindex=0]").attr("tabindex","-1");$(this).addClass("expandedResponsive");i(E)});t=$(".topnavsubmenu",F.parent());t.show()}function a(F,C,E){var H=e.css("left");var D=C?0:n;var G;x.removeClass("slideOne");F.closest("li.sub").removeClass("expandedNavItem").children("a, [tabindex=0]").attr("tabindex","0");c.removeClass("expandedResponsive");G=c.css("display","block").animate({left:"+="+H},D,null,function(){i(E)});t.hide();return false}function d(){b(null,true)}function s(){b(null,false)}function b(D,C){var E=v.hasClass("active");if(typeof C==="undefined"){C=!E}if(E==C){return}if(C){c.slideDown(0)}else{c.removeClass("expandedResponsive").find("li.expandedNavItem").removeClass("expandedNavItem").children("a, [tabindex=0]").attr("tabindex","0");c.slideUp(0)}v.toggleClass("active",C);h.toggleClass("activenav",C);v.find(".508State").html(C?", expanded":", collapsed");t.hide();e.css("width",o.width()-20);if(c.css("display")=="none"){c.css("left","0")}if(o.width()>=767&&o.width()<979){e.css("width",o.width()-40);e.css("left",o.width())}else{if(o.width()<979){$(".slideForward").show();$(".backTitle").show();e.css("left",o.width())}}}function i(C){setTimeout(function(){C.focus()},0)}c.add(v).click(function(C){r=true;setTimeout(function(){r=false},n+1000)}).focusout(function(C){m=setTimeout(function(){if(!r&&!c.is(":animated")){w()}},n+200)}).focusin(function(C){clearTimeout(m)})});