var EventMessageHandler=(function(b){var a=function(){var c=this.__v={};c._handlers={};this.init();};a.prototype.init=function(){var c=this,f=this.__v;f._messageHandler=function(j){var h=j.data,g=h.type,k=h.data;if(f._handlers[g]&&typeof f._handlers[g]==="function"){f._handlers[g](k);}};try{window.addEventListener("message",f._messageHandler,false);}catch(d){window.attachEvent("onmessage",f._messageHandler);}this.init=function(){};};a.prototype.addHandler=function(d,g){var c=this,f=c.__v;f._handlers[d]=g;};a.prototype.sendMessage=function(c,d,g){var h={};h.type=d;h.data=g;if(c&&typeof c==="string"&&c==="parent"){window.parent.postMessage(h,"*");}else{if(c&&c.contentWindow){try{c.contentWindow.postMessage(h,"*");}catch(f){}}}};return a;}(jQuery));(function(d){var n={};n.PROTOCOL=window.location.protocol;n.yume_ad_domain_code={fn2:"109RXfmeHtS",fb2:"109DLWefYRt",fb:"109RXfmeHtS","fn-latino":"109RXfmeHtS"};n.settings_url={fn2:n.PROTOCOL+"//video.foxnews.com/assets/akamai/resources/conf/config.xml",fb2:n.PROTOCOL+"//video.foxbusiness.com/assets/akamai/resources/conf/config-fb.xml",fb:n.PROTOCOL+"//video.foxbusiness.com/assets/akamai/resources/conf/config-sbc.xml","fn-latino":n.PROTOCOL+"//video.foxnews.com/assets/akamai/resources/conf/config-latino.xml"};n.auditude_code={defaultAssetId:"fnd_default_asset",adDomain:"auditude.com",zoneId:{fn2:"52522",fb2:"52523",fb:"52526","fn-latino":"52522"}};n.BUNDLE_VERSION="5.0.0010";window.MvPlayer=function(){this.version="1.4.0.0";this._namespace=null;this._config={};this._videoDomain="video.foxnews.com";this._callbacksObj={};this._autoEmbed=true;this.holder={};this.playerIds=[];this.playerMap={};this.idSeparator=":";this.instanceId=["videoid","videolink","playlistid"];this.feedFolder={video:"/v/feed/video/",playlist:"/v/feed/playlist/"};this.itemType={videoid:"video",playlistid:"playlist"};this.feedQueryString={template:"fox"};this.playTimeout={};this.dataObj={};this.holderObj={};this.overlayObj={defaultImg:n.PROTOCOL+"//global.fncstatic.com/static/v/all/img/vp-overlay.png",blankImg:n.PROTOCOL+"//global.fncstatic.com/static/v/all/img/clear.gif"};};MvPlayer.prototype={init:function(q){var r,u,s=this;for(r in q){s["_"+r]=q[r];}s.embed.root=s.feed.root=s.video.root=s.format.root=s.controls.root=s.thirdParty.root=s.feedParser.root=s._helper.root=this;var t={},o=s._config;if(o.player.feedSettings){if(o.player.feedSettings.videoFolder){t.video=o.player.feedSettings.videoFolder;}if(o.player.feedSettings.playlistFolder){t.playlist=o.player.feedSettings.playlistFolder;}}if(o.player.isLivePlayer){this.itemType.videoid="live";t.video=t.video.replace("/video/","/live/");}if(q.callbacks){if(typeof q.callbacks==="object"&&!f(q.callbacks)){for(u in q.callbacks){if(s._callbacksObj[u]){for(r in q.callbacks){s._callbacksObj[u][r]=q.callbacks[u][r];}}else{s._callbacksObj[u]=q.callbacks[u];}}}}this.videoTypeLinks={videoid:n.PROTOCOL+"//"+s._videoDomain+((t.video)?t.video:s.feedFolder.video),playlistid:n.PROTOCOL+"//"+s._videoDomain+((t.playlist)?t.playlist:s.feedFolder.playlist)};s._isPandora=false;if(typeof k!=="undefined"){var p=new k(s);if(p.init()){s._isPandora=true;c("[videoPlayer.init] Using Pandora.");s.pandora=p;s.pandora.init();}}if(typeof q.onInit==="function"){q.onInit(s);}if(!s._autoEmbed){return false;}s.holder.videoObj=d(".video,.video-ct");s.embed.players();},render:function(s){if(!s){return false;}if(!s.id||!s.holder){return false;}var u,w=this,v=w.idSeparator,o=s.id,q=w._helper;if(s.callbacks){if(w._callbacksObj[o]){for(u in s.callbacks){w._callbacksObj[o][u]=s.callbacks[u];}}else{w._callbacksObj[o]=s.callbacks;}}c("[videoPlayer.render] Render function executed... ");if(!s.autoplay||typeof s.autoplay!=="boolean"){s.autoplay=false;}if(s.holder.data("currentId")===o){return false;}function r(){var z=false;if(s.holder.find("[id^='videoHolder:']").size()>0){var y=s.holder.find("[id^='videoHolder:']:first").attr("id");w.setPlayerMap({type:"set",vId:o,domId:y});z=w.setPlayerMap({type:"get",vId:o});}else{z=w.setPlayerMap({type:"create",vId:o});}var A=d("<div></div>").attr({id:z});if(s.cssClass){A.addClass(s.cssClass);}if(w.pandora){A.data("pandora",true);A.data("autoplay",s.autoplay);}s.holder.html(A);}var p=s.holder.find("> object");if(p.size()>0){try{if(q.isPlayFileReady(p.get(0))){w.setPlayerMap({type:"set",vId:o,domId:p.attr("id")});if(s.cssClass){p.addClass(s.cssClass);}}else{r();}}catch(t){r();}}else{r();}if(w.embed.validate(s.holder,s.holder.children().filter(":first"),o.substring(0,o.indexOf(v)),v)){s.holder.data("currentId",o);w.feed.get({id:o,autoplay:s.autoplay,method:"render"});}},getFeed:function(o){if(!o){return false;}if(!o.id||!o.callback){return false;}var p=this;p.feed.get({id:o.id,method:"getFeed",raw:true,processed:(!o.processed)?false:true,callback:o.callback});},setPlayerMap:function(u){if(!u){return false;}var r=this,q="videoHolder:";switch(u.type){case"create":function t(){return q+a();}var s=t();while(r.playerMap[s]){s=t();}r.playerMap[s]=u.vId;r.playerMap[u.vId]=s;return s;case"set":var p,o=false;for(p in r.playerMap){if(p===u.domId){o=r.playerMap[p];break;}}if(!o){delete r.playerMap[o];}r.playerMap[u.domId]=u.vId;r.playerMap[u.vId]=u.domId;break;case"get":if(u.vId){return(r.playerMap[u.vId])?r.playerMap[u.vId]:false;}else{if(u.domId){return(r.playerMap[u.domId])?r.playerMap[u.domId]:false;}}return false;}},setCustomFlashVars:function(t,r){var q=this;if(q._config.display.customFlashVars){var p=q._config.display.customFlashVars;if(p[r]){var o,s={};for(o in p[r]){s[o]=p[r][o];}q.holderObj[t].customFlashVars=s;}}}};MvPlayer.prototype.controls={pause:function(r){if(!this.validate(r)){return false;}var o=this.root,p=o.holderObj[r];try{if(!p.data("pandora")){document.getElementById(r).pause();}else{o.pandora.CONTROLS.pause(r);}}catch(q){b("[videoPlayer.controls.pause] Error caught:"+q);}},play:function(r){if(!this.validate(r)){return false;}var o=this.root,p=o.holderObj[r];try{if(!p.data("pandora")){document.getElementById(r).unpause();}else{o.pandora.CONTROLS.play(r);}}catch(q){b("[videoPlayer.controls.play] Error caught:"+q);}},jumpToTime:function(s,r){if(!this.validate(s)){return false;}var o=this.root,q=o.holderObj[s].elm,p=o.playerMap[s]||false;if(!p){return false;}if(!q.data("pandora")){document.getElementById(p).jumpToTime(r);}else{o.pandora.CONTROLS.jumpTo(p,r);}},validate:function(p){if(!p){return false;}var o=this.root;p="videoid"+o.idSeparator+"g"+p;if(!o.dataObj[p]){return false;}return true;}};MvPlayer.prototype.embed={validate:function(w,y,s,r){var t,u=this,v=this.root,o=v._config.display.allow;if(typeof v.format[s]==="undefined"){return false;}for(t in o){if(y.hasClass(t)){var z=v.format[s](y,s,r),q=o[t];var p=(function(){var A,E=false,C=y.attr("class").split(" ");for(A=0;A<C.length;A++){var B=C[A];if(B.indexOf("vid-")===0){var D=B.split("-");D.shift();switch(D.join("-")){case"fn2":E="video.foxnews.com";break;case"fb2":E="video.foxbusiness.com";break;case"fb":E="video.foxbusiness.com";break;case"fn-latino":E="video.latino.foxnews.com";break;}}}return{domain:E,site:D};}());v.holderObj[z]={id:z,parentElm:w,elm:y,dim:o[t],format:t};if(p.domain){v.holderObj[z].domain=p.domain;v.holderObj[z].xSite=p.site;v.holderObj[z].xDomain=true;}else{v.holderObj[z].domain=v._videoDomain;}v.setCustomFlashVars(z,t);if(v.pandora){v.holderObj[z].elm.data("pandora",true);}return z;}}return false;},players:function(){var q=this,o=this.root,p=(typeof o._config.display.clickThruImage==="undefined")?false:(typeof o._config.display.clickThruImage!=="object")?o._config.display.clickThruImage:o._config.display.clickThruImage.render,r=o.idSeparator;if(p&&o._isPandora&&!window.useLegacyHTML5){p=false;}o.holder.videoObj.each(function(){var s,u=d(this),t=false;function v(y){u.find("div[id^='"+y+r+"']").each(function(){var z=d(this),A=o.setPlayerMap({type:"create",vId:z.attr("id")});z.attr("id",A);t=q.validate(u,z,y,r);});}for(s=0;s<o.instanceId.length;s++){var w=o.instanceId[s];v(w);}if(t){if(o.holderObj[t].elm.data("pandora")){c("[videoPlayer.players] Loading via Pandora.");o.pandora.load(t);}else{o.feed.get(t);}u.children().filter("div.img").hide();}});},player:function(y){if(!y){return false;}var t=this,B=this.root,v=B.holderObj[y],o=B._helper,G=B._config.player;if(v.elm.data("videoLoaded")){return false;}B.playerIds.push(y);if(v.elm.data("pandora")){if(!v.elm.data("pandoraLoaded")){var z={id:y,format:v.format,width:j(v.dim[0])?v.dim[0]:v.dim[0]+"px",height:j(v.dim[1])?v.dim[1]:v.dim[1]+"px"};if(B._config.player.flashVars.autoplay==="true"){z.autoplay=true;}v.elm.data("pandora",true);v.elm.data("pandoraLoaded",true);v.elm.data("videoLoaded",true);B.holderObj[y].vAttr=z;}B.pandora.load(y);}else{if(typeof swfobject==="undefined"){b("[videoPlayer.embed.player] swfobject not found.");return false;}var s=function(H){if(B._callbacksObj[y]&&B._callbacksObj[y].videoLoadStart){B._callbacksObj[y].videoLoadStart({data:B.dataObj[y]});}if(!H){B.video.load(y);}};if(!v.elm.data("swfLoaded")){var r=B.setPlayerMap({type:"get",vId:y});if(!o.isPlayFileReady(document.getElementById(r))){B.thirdParty.akamai(y,true);var C,F=B._config.player.flashVars,p={};for(C in F){p[C]=F[C];}if(v.customFlashVars){for(C in v.customFlashVars){p[C]=v.customFlashVars[C];}}var E=v.domain,A=v.xDomain,w=v.xSite,D=(!G.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(G.environment==="beta")?"beta.":"";currentDomain=(F.location)?F.location:p.settings_url.split("/")[2];if(currentDomain==="video.latino.foxnews.com"&&E==="video.foxnews.com"){E="video.latino.foxnews.com";w=["fn-latino"];}var q=function(H){var I=(D.length>0&&H.indexOf(D)<0)?D+E:E;return H.replace(H.split("/")[2],I);};if(A){if(n.yume_ad_domain_code[w]){p.yume_ad_domain_code=n.yume_ad_domain_code[w];}if(n.settings_url[w]){p.settings_url=n.settings_url[w];}}p.settings_url=q(p.settings_url);p.core_yume_ad_library_url=q(p.core_yume_ad_library_url);p.core_yume_player_url=q(p.core_yume_player_url);p.data_feed_url=q(p.data_feed_url);G.location=q(G.location);if(B._config.player.tokenCallback){B._config.player.tokenCallback(r);}if(B._config.player.pip){var u=t.setPinP(G,p);p=u.flashVars;G=u.info;}swfobject.embedSWF(G.location,r,v.dim[0],v.dim[1],G.flashVersion,G.expressInstall,p,B._config.player.params);v.elm.data("swfLoaded",true);v.elm.data("videoLoaded",true);if(B._config.player.token){B.dataObj[y]=B.feedParser.setToken(B.dataObj[y],B._config.player.token);d.loadAttempt(50,800,function(){return o.isPlayFileReady(document.getElementById(r));},function(){setTimeout(function(){s();b("[videoPlayer.player] Token: "+B._config.player.token);},500);});}else{s(true);}}else{s();}}else{s();}}},setPinP:function(p,q){if(p.location&&q.settings_url){p.location=p.location.replace("FoxNewsPlayer.swf","FoxNewsPlayerMulti.swf");var o=q.settings_url;q.settings_url=(function(s){var t=s.split("/"),r=t.length-1;if(t[r].indexOf("config-multi")===-1){t[r]="config-multi.xml";}return t.join("/");}(o));}return{info:p,flashVars:q};},clickthru:function(u,v){var t=this,o=this.root,r=o.holderObj[v],s=o.overlayObj.blankImg;r.elm.parent().css({width:j(r.dim[0])?r.dim[0]:r.dim[0]+"px",minHeight:j(r.dim[1])?r.dim[1]:r.dim[1]+"px"});r.elm.html('<a href="#"><img src="'+s+'" /></a>');var q=r.elm.find("img");q.css({width:j(r.dim[0])?r.dim[0]:r.dim[0]+"px",height:j(r.dim[1])?r.dim[1]:r.dim[1]+"px",opacity:"0"});(function(){var A=function(G){q.attr("src",G).animate({opacity:"1"},400,"swing");};var w=function(K){var I=K.split("/"),H=I.length,J=I[H-3],G=I[H-2];I[H-3]=(!isNaN(J))?r.dim[0]:J;I[H-2]=(!isNaN(G))?r.dim[1]:G;return I.join("/");};var F=false,B=r.parentElm;var E=B.children("div.img"),D=B.find(".m-controller img:first"),C=B.parent().children("div.m-controller img:first");if(E.attr("src")&&d.trim(E.attr("src")).length>0){A(d.trim(E.attr("src")));g.set({elm:r.elm,dim:r.dim,position:"bottom right"});}else{if(D.attr("src")&&d.trim(D.attr("src")).length>0){A(d.trim(D.attr("src")));g.set({elm:r.elm,dim:r.dim,position:"bottom right"});}else{if(C.attr("src")&&d.trim(C.attr("src")).length>0){A(d.trim(C.attr("src")));g.set({elm:r.elm,dim:r.dim,position:"bottom right"});}else{var z=new Image(),y=w(u.thumbnail);z.onload=function(){A(y);g.set({elm:r.elm,dim:r.dim,position:"bottom right"});};z.src=y;}}}}());var p=r.elm.find("a");p.css({display:"block",visibility:"visible",padding:"0"}).click(function(){var w=function(){if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}t.player(v);};try{o._config.display.clickThruImage.callbackFn({runPlayer:w});return false;}catch(y){}w();return false;});}};MvPlayer.prototype.thirdParty={akamaiMediaAnalytics:function(p){if(!p||typeof AKAMAI_MEDIA_ANALYTICS_JS_SRC==="undefined"||typeof AKAMAI_MEDIA_ANALYTICS_CALLBACK==="undefined"){return false;}if(!d(document).data("AkamaiH5Analytics")){var o=document.createElement("script");o.type="text/javascript";o.async=true;o.src=AKAMAI_MEDIA_ANALYTICS_JS_SRC;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(o);}d.loadAttempt({maxAttempts:30,timeout:500,callback:{check:function(){return(typeof setAkamaiMediaAnalyticsData!=="undefined")?true:false;},success:function(){AKAMAI_MEDIA_ANALYTICS_CALLBACK(p);}}});},akamai:function(p){var w=this,z=this.root,r=z._config.player,y=z.holderObj[p],B=p.split(":")[1].replace(/[a-zA-z]/gi,""),v=z.itemType[z.dataObj[p].itemType];if(z.dataObj[p]&&z.dataObj[p].isMavenFeed){B=z.dataObj[p].guid;}z._config.player.flashVars.video_id=B;z._config.player.flashVars.data_feed_url=n.PROTOCOL+"//"+z._videoDomain+"/v/feed/"+v+"/"+B+".js?template=fox";function o(D,E){var C;for(C=0;C<D.length;C++){if(y.elm.hasClass(D[C])){switch(E){case"share":z._config.player.flashVars.show_sharing_overlay="false";break;case"email":z._config.player.flashVars.show_email_overlay="false";break;}return true;}}return false;}if(typeof z._config.display!=="undefined"){var A=z._config.display;if(typeof A.restrict!=="undefined"){if(A.restrict.sharingOverlay){o(A.restrict.sharingOverlay,"share");}if(A.restrict.emailOverlay){o(A.restrict.emailOverlay,"email");}}}if(v.toLowerCase().indexOf("playlist")>-1){try{var u=z.dataObj[p].PLVideos,q=u[0]["media-content"],t=q["mvn-assetUUID"];z._config.player.flashVars.video_id=t;z._config.player.flashVars.data_feed_url=n.PROTOCOL+"//"+z._videoDomain+"/v/feed/video/"+t+".js?template=fox";}catch(s){b("[videoPlayer.thirdparty.akamai] Failed to load first video from playlist feed: "+s,true);}}},baynote:function(o){var w=this,z=this.root,A=z.dataObj[o],y=z.holderObj[o],p=z._helper,q=(A.thumbnail)?A.thumbnail:false,r=(A.title)?A.title:false;var s=(function(){var E=(A.duration)?A.duration:false;if(!E&&isNaN(E)){return false;}return E;}());var B=(function(){var F=p.cleanTitle(A.title),G=n.PROTOCOL+"//"+z._videoDomain,E=A.guid;G+="/v/"+E+"/"+F+"/";return G;}());function v(){if(typeof baynote_track_video_attribute!=="undefined"){if(q&&s&&r&&B){baynote_track_video_attribute(q,s,r,B);b("[videoPlayer.thirdparty.baynote] Successful baynote call: baynote_track_video_attribute(thumbnailUrl,duration,linkText)");b("[videoPlayer.thirdparty.baynote] thumbnailUrl = "+q);b("[videoPlayer.thirdparty.baynote] duration = "+s);b("[videoPlayer.thirdparty.baynote] linkText = "+r);b("[videoPlayer.thirdparty.baynote] url = "+B);return true;}b("[videoPlayer.thirdparty.baynote] Baynote track function not triggered. insufficient video data for: thumbnail url / duration / link text / url.");return true;}b("[videoPlayer.thirdparty.baynote] Baynote track function not defined.");return false;}var D=30,C=0,u=false;function t(){if(typeof baynote_track_video_attribute!=="undefined"){v();clearTimeout(u);}else{if(C>D){b("[videoPlayer.thirdparty.baynote] Baynote track function call attempts maxed out... ");v();clearTimeout(u);}else{C++;u=setTimeout(function(){b("[videoPlayer.thirdparty.baynote] Attempting to call Baynote track function... attempt: "+C);t();},500);}}}if(typeof baynote_track_video_attribute!=="undefined"){v();}else{d(document).ready(function(){t();});}}};MvPlayer.prototype.video={load:function(v){var t=this,p=this.root,r=p._helper,s=p._config.player.flashVars.autoplay,u=p.setPlayerMap({type:"get",vId:v}),o=document.getElementById(u);c("[videoPlayer.load] Loading player...");if(r.isPlayFileReady(o)){var q=(typeof p._config.display.clickThruImage==="undefined")?false:(typeof p._config.display.clickThruImage!=="object")?p._config.display.clickThruImage:p._config.display.clickThruImage.render;if(q&&p._isPandora&&!window.useLegacyHTML5){q=false;}if(p.dataObj[v]){s=(q)?true:(p._config.player.flashVars.autoplay)?true:false;if(!p._config.player.pip){o.playFile(p.dataObj[v].rawData,s);}else{b("[videoPlayer.load] PlayFile disabled for PIP.");}}else{p.feed.get({id:v,autoplay:s});}clearTimeout(p.playTimeout[v]);}else{p.playTimeout[v]=setTimeout(function(){t.load(v);},100);}}};MvPlayer.prototype.feed={get:function(){var y,I,z=this,H=this.root,q=H.idSeparator,p=arguments[0],C={},v=false;if(typeof p==="object"){for(I in p){C[I]=p[I];}}else{C.id=p;}if(!C.id){b("[videoPlayer.feed.get] Error: no id passed");return false;}var E="parse_"+H._helper.formatVideoId(C.id,true,true)+((C.raw)?"_getraw":""),u=H._namespace+".feed."+E,K=false;K=(function(){var L;for(L in H.videoTypeLinks){if(C.id.indexOf(L)>-1){return{prefix:H.videoTypeLinks[L],type:L};}}return false;}());if(!K){b("[videoPlayer.feed.get] Error: no feed link: "+C.id);return false;}function o(){return(K.type==="playlistid")?true:false;}var D=C.id.substr(K.type.length+q.length),t=K.prefix;if(D.charAt(0).toLowerCase()!=="g"){if(K.type==="videoid"){t=t.replace("/v/","/");v=true;}}else{D=D.substr(1);}var r=t+D+".js",w=[],J={};w.push("callback="+u);if(H.feedQueryString){var G=H.feedQueryString;for(I in G){if(I==="template"){if(!o()){w.push(I+"="+G[I]);}}else{w.push(I+"="+G[I]);}}}for(y=0;y<w.length;y++){var F=w[y].split("=");J[F[0]]=F[1];}w.push("jsonp=?");var s="?"+w.join("&"),A=(C.method)?((C.method==="render")?true:false):false;if(!H.feed[E]||A){H.feed[E]=function(O){if(H.holderObj[C.id]){H.holderObj[C.id].ajaxComplete=true;}var L=(o())?H.feedParser.legacy(O):H.feedParser.fox(O);if(C.raw){if(C.callback){C.callback((C.processed)?L:O);}}else{var N=H.holderObj[C.id],M=(typeof H._config.display.clickThruImage==="undefined")?false:(typeof H._config.display.clickThruImage!=="object")?H._config.display.clickThruImage:H._config.display.clickThruImage.render;if(M&&H._isPandora&&!window.useLegacyHTML5){M=false;}H.dataObj[C.id]=L;H.dataObj[C.id].rawData=O;H.dataObj[C.id].itemType=K.type;H.dataObj[C.id].isMavenFeed=v;if(C.autoplay){H._config.player.flashVars.autoplay="true";}if(L){if(M&&!C.autoplay){H.embed.clickthru(L,C.id);}else{H.embed.player(C.id);}if(H._callbacksObj[C.id]){if(H._callbacksObj[C.id].feedLoaded){H._callbacksObj[C.id].feedLoaded(L);}}}else{b("[videoPlayer.feed.get] Warning: no data found!");}}};}J.cb=H._helper.cacheBuster();function B(){r=(function(N){var M=N;if(H.holderObj[C.id]&&H.holderObj[C.id].domain){var L=H.holderObj[C.id].domain,P=N.split(n.PROTOCOL+"//"),O=P[1].split("/");if(O[0]!==L){O[0]=L;}P[1]=O.join("/");M=P.join(n.PROTOCOL+"//");}return M;}(r));d.ajax({url:r,data:J,dataType:"script",async:true,cache:true});}B();}};MvPlayer.prototype.format={videoid:function(s,p,r){var o=this.root,q=o.setPlayerMap({type:"get",domId:s.attr("id")});if(!q){return false;}var t=q.substr(p.length+1);return"videoid"+r+t;},videolink:function(t,v,u){var z=this.root,r=t.attr("id"),p=z.setPlayerMap({type:"get",domId:r}),q="playlist",B="playlistid"+u;if(p.indexOf("?"+q)===-1){return false;}var A,y=p.substr(p.indexOf("?")+1),w=y.split("&");for(A=0;A<w.length;A++){var s=w[A].split("=");if(s[0].toLowerCase()==="playlist_id"){var o=B+s[1];z.setPlayerMap({type:"set",vId:o,domId:r});return o;}}},playlistid:function(s,q,r){var o=this.root,p=o.setPlayerMap({type:"get",domId:s.attr("id")});if(!p){return false;}var t=p.substr(q.length+1);return"playlistid"+r+t;}};MvPlayer.prototype.feedParser={setToken:function(s,q){var o,p=this.root,r=p._helper;return s;},fox:function(E){var t,z=this.root,o=z._helper;if(typeof E.channel.item==="undefined"){return false;}var J=E.channel,F=E.channel.item,s=[];if(F instanceof Array){for(t=0;t<F.length;t++){s.push(F[t]);}F=E.channel.item[0];}if(!F["media-group"]){return false;}var D=F["media-group"];function y(){var K=D["media-thumbnail"]||false;if(!K){return"";}if(f(K)&&K[0]&&K[0]["@attributes"]){return K[0]["@attributes"].url||"";}else{if(K&&K["@attributes"]){return K["@attributes"].url||"";}}return"";}function I(){try{return D["media-content"][0]["@attributes"].duration;}catch(K){b("[videoPlayer.feedParser.grab] Get Duration error: "+K);return"0";}}var u={url:F.link,title:F.title,description:F.description,shortDescription:F.description,keywords:"",thumbnail:y(),guid:F.guid,channel:"",playlist:"",personality:"",format:"",show:"",category:J.category,creationDate:o.convertGrabDate(F.pubDate),loc:n.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:I()};var p=D["media-content"]||false;if(p){var B,w,A={},C=false,H=false,r=false;var v=function(L,K){return(L.indexOf(K)>-1)?true:false;};for(t=0;t<p.length;t++){var G=p[t]["@attributes"],q=G.url;if(G.type==="video/mp4"){if(!C){C=true;r=G;}if(v(q,"_LOW")){A.LOW=G;H=G;}else{if(v(q,"_MED")){A.MED=G;}else{if(v(q,"_HIGH")){A.HI=G;}}}}else{if(G.type==="application/x-mpegURL"&&v(q,".m3u8")){A.STREAM=G;}}}if(C){if(!A.LOW){A.LOW=(A.MED)?A.MED:(A.HI)?A.HI:r;}if(!A.MED){A.MED=(A.LOW)?A.LOW:(A.HI)?A.HI:r;}if(!A.HI){A.HI=(A.LOW)?A.LOW:(A.MED)?A.MED:r;}}w=0;for(B in A){w++;break;}A=(w>0)?A:false;u.htmlFive=A;}if(s.length>0){u.PLVideos=s;}return u;},grab:function(y){var u,t=this.root,p=t._helper;if(typeof y.channel.item==="undefined"){return false;}var w=y.channel.item,q=[];if(w instanceof Array){for(u=0;u<w.length;u++){q.push(w[u]);}w=y.channel.item[0];}if(!w["media-group"]){return false;}var o=w["media-group"];function s(){if(typeof o["media-thumbnail"][0]!=="undefined"){var z=o["media-thumbnail"][0];return(z["@attributes"].url)?z["@attributes"].url:"";}return"";}function v(){try{return o["media-content"][0]["@attributes"].duration;}catch(z){b("[videoPlayer.feedParser.grab] Get Duration error: "+z);return"0";}}var r={url:w.link,title:w.title,description:w.description,shortDescription:w["grab-short_description"],keywords:o["media-keywords"],thumbnail:s(),guid:w.guid,channel:w["grab-channel"],playlist:w["grab-playlist"],personality:w["grab-personality"],format:w["grab-format"],show:w["grab-show"],category:o["media-category"],creationDate:p.convertGrabDate(w.pubDate),loc:n.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:v()};if(q.length>0){r.PLVideos=q;}return r;},legacy:function(w){var u,t=this.root,p=t._helper;if(typeof w.channel.item==="undefined"){return false;}var v=w.channel.item,r=[];if(v instanceof Array){for(u=0;u<v.length;u++){r.push(v[u]);}v=w.channel.item[0];}if(!v["media-content"]){return false;}var o=v["media-content"];if(!o["media-credit"]){return false;}var q=o["media-credit"];var s={url:o["@attributes"].url,title:v.title,description:o["media-description"],keywords:o["media-keywords"],thumbnail:o["media-thumbnail"],guid:o["mvn-assetUUID"],mavenid:o["mvn-mavenId"],channel:(o["mvn-fnc_channel"])?o["mvn-fnc_channel"]:o["mvn-fbn_channel"],playlist:o["mvn-fnc_default_playlist"],personality:(o["mvn-fnc_personality"])?o["mvn-fnc_personality"]:o["mvn-fbn_personality"],format:(o["mvn-fnc_format"])?o["mvn-fnc_format"]:o["mvn-fbn_format"],show:(o["mvn-fnc_show"])?o["mvn-fnc_show"]:o["mvn-fbn_show"],category:(o["mvn-fnc_category"])?o["mvn-fnc_category"]:o["mvn-fbn_category"],creationDate:p.convertDate(o["mvn-creationDate"]),shortDescription:o["mvn-shortDescription"],loc:n.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:(o["mvn-duration"])?o["mvn-duration"]:(o["mvn-videoSeconds"])?o["mvn-videoSeconds"]:0};if(r.length>0){s.PLVideos=r;}return s;}};MvPlayer.prototype._helper={cacheBuster:function(p){p=p||false;var o=new Date(),q=o.getFullYear().toString()+(o.getMonth()+1).toString()+o.getDate().toString();switch(p){case"h":q+=(o.getHours()+1).toString();break;case"30m":q+=(o.getHours()+1).toString()+((o.getMinutes()%30===0)?"1":"0");break;default:q+=(o.getHours()+1).toString();}return q;},isPlayFileReady:function(o){o=o||false;if(!o){return false;}return(typeof o.playFile!=="undefined")?true:false;},formatVideoId:function(q,o,p){o=o||false;p=p||false;if(p){q=q.split("").reverse().join("");}if(o){return q.replace(/\:/gi,"_");}else{return q.replace(/\_/gi,":");}},convertGrabDate:function(q){q=q||false;if(!q){return"";}var p=new Date(q),o=["January","February","March","April","May","June","July","August","September","October","November","December"];if(isNaN(p.getTime())){return"";}return o[p.getMonth()]+" "+p.getDate()+", "+p.getFullYear();},convertDate:function(q){if(typeof q!=="undefined"){var o=["January","February","March","April","May","June","July","August","September","October","November","December"],p=q.toString().split("T");p=p[0].split("-");p=new Date(p[0],(p[1]-1),p[2]);return o[p.getMonth()]+" "+p.getDate()+", "+p.getFullYear();}else{return"";}},extractVideoId:function(p){var o=p.replace(/^(http|https):\/\/?[a-zA-Z0-9\.]+/,"");o=(o.indexOf("#")===0)?o.substring(2):o.substring(1);return o.substring(0,o.indexOf("/"));},extractCategoryId:function(o){return o.split("category_id=")[1];},cleanTitle:function(o){o=o.replace(/\s+/g,"-").toLowerCase();return o.replace(/[^a-z0-9\-]/g,"");},cleanHref:function(o){return o.replace(/^(http|https):\/\/?[a-zA-Z0-9\.]+/,"");},cleanImageUrl:function(o){return o.replace(n.PROTOCOL+"//media2.foxnews.com","");},convertTime:function(p){var q=Math.floor(p/60),o=Math.floor(p%60);o=(o<10)?"0"+o:o;return q+":"+o;},videoObjectJSON:function(o){return this.root.feedParser.legacy(o);}};function a(p,r){p=p||999999;r=r||25;function q(){return(Math.floor(Math.random()*p)%2===1)?true:false;}function t(){var v=(q())?97:65;return String.fromCharCode(v+Math.round(Math.random()*25));}function s(){return Math.floor(Math.random()*10);}function u(){return(q())?t():s();}function o(){var w,v=[];for(w=0;w<(r-1);w++){v.push(u());}v.sort(function(){return 0.5-Math.random();});return t()+v.join("");}return o();}var k=(function(){var p={dm:"Agent",vcm:"i",ox:"vt"};var t=function(y){this.main=y;this.video={};this.prefix={controls:"player-controls-",playPause:"playpause-",fullScreen:"fullscreen-",loadPct:"load-counter-"};this.prefix.time={current:"time-current",duration:"time-duration"};this.controlsHTML='<strong>listeners:</strong>  <a id="'+this.prefix.playPause+'${id}" href="#">${playState}</a> | Current Time: <span id="'+this.prefix.time.current+'${id}">00:00</span> | Duration Time: <span id="'+this.prefix.time.duration+'${id}">00:00</span>';p.ol={arg:"P",lmp:"COM",rd:"USER"};this.listeners=new u(this);this.TYPE=new s(this);this.EVENTS=new r(this);this.PROPERTIES=new w(this);this.STATES=new v(this);this.CONTROLS=new o(this);this.ADS=new q(this);};t.prototype={init:function(y){y=y||false;if(y){var z;for(z in y){this["_"+z]=y[z];}}if(!this.compatible()){return false;}if(this.helper.getQuery("html5")==="legacy"){window.useLegacyHTML5=true;}return true;},compatible:function(){var y=false;if(this.helper.getQuery("_"+p.ox+p.ol.lmp.toLowerCase()+p.ol.arg.toLowerCase())==="y"){this._forced=true;y=m();}else{y=(m()&&h())?true:false;}return y;},check:function(y){return this.compatible();},create:function(y){},load:function(y,A){var I=this,D=this.main,z=h(),C=(typeof z==="string"&&z==="legacy")?true:false;if(!this.check(y)){return false;}c("[videoPlayer.pandora] Loading....");var G=function(){D.holderObj[y].elm.data("pandora",false);D.holderObj[y].elm.data("pandoraLoaded",false);if(h()){if(D._callbacksObj[y]){if(D._callbacksObj[y].deviceRenderFailed){D._callbacksObj[y].deviceRenderFailed();}}}else{D.embed.player(y);}};if(D.dataObj[y]){var F=D.dataObj[y],B=D.holderObj[y];A=(typeof A==="undefined")?B.vAttr.autoplay:A;var E=(C||window.useLegacyHTML5)?false:true;if(E){c("[videoPlayer.pandora] Loading HTML5 Akamai video player...");I.TYPE.AKAMAI(F,y,false,A);}else{if(!F.htmlFive){c("[videoPlayer.pandora] Rendering failed. No html5 data.");G();}else{var H=(function(){var J=false;if(F.htmlFive.STREAM&&!I._forced&&!C){J=F.htmlFive.STREAM.url;}else{if(F.htmlFive.LOW){J=F.htmlFive.LOW.url;}else{if(F.htmlFive.MED){J=F.htmlFive.MED.url;}else{if(F.htmlFive.HI){J=F.htmlFive.HI.url;}}}}return J;}());if(!H){c("[videoPlayer.pandora] Rendering failed. no html5 video url.");G();return false;}c("[videoPlayer.pandora] Loading HTML5 Legacy video player...");I.TYPE.LEGACY(F,y,H,A);}}}else{D.feed.get({id:y,autoplay:A});}}};t.prototype.helper={replaceStr:function(B,z,A){var y=B.indexOf(z);while(y!==-1){B=B.replace(z,A);y=B.indexOf(z);}return B;},formatTime:function(B){B=parseInt(B,10);var A=Math.floor(B/360),z=Math.floor(B/60),y=B%60;function C(D){return(D<10)?"0"+D:D;}return((A>0)?C(A):"")+C(z)+":"+C(y);},getQuery:function(B){var y,A=(window.location.search).substr(1),C=A.split("&");for(y=0;y<C.length;y++){var z=C[y].split("=");if(z[0]===B){return z[1];}}return false;}};var s=(function(){var y=function(z){this.root=z;};y.prototype.LEGACY=function(G,A,J,C){var K=this,H=this.root,E=H.main,D=E.holderObj[A],F=D.elm,B=(typeof E._config.display.clickThruImage==="undefined")?false:(typeof E._config.display.clickThruImage!=="object")?E._config.display.clickThruImage:E._config.display.clickThruImage.render;if(B&&H._isPandora&&!window.useLegacyHTML5){B=false;}c("[videoPlayer.pandora] Using Legacy HTML5 video player.");if(!F.data("pandoraLoaded")){E.embed.player(A);}else{var z=(function(){var L=true,N=(E._config.player.flashVars&&E._config.player.flashVars.core_ads_enabled!=="undefined")?E._config.player.flashVars.core_ads_enabled:false,O=(D.customFlashVars&&typeof D.customFlashVars.core_ads_enabled!=="undefined")?D.customFlashVars.core_ads_enabled:false;var M=function(Q){var P;if(typeof Q==="string"&&Q.toLowerCase()==="true"){P=true;}else{if(typeof Q==="boolean"){P=true;}else{P=false;}}return P;};if(H.helper.getQuery("_vtads")==="n"){L=false;}else{if(O){L=M(O);}else{if(N){L=M(N);}}}return L;}());var I=function(){var N,O=(D.elm.data("autoplay"))?true:false,M=D.elm.parent(),L=[],P=[],S="width|height";for(N in D.vAttr){if(N==="format"){L.push('class="'+D.vAttr[N]+' pandora-player"');}else{if(N==="id"){var R=E.setPlayerMap({type:"get",vId:D.vAttr[N]});E.setPlayerMap({type:"set",vId:A,domId:R});L.push('id="'+R+'"');}else{if(S.indexOf(N)>-1){P.push(N+":"+D.vAttr[N]+";");}}}}c("[videoPlayer.pandora.LEGACY] Video Source: "+J);var Q=P.join(" ");newVideo='<video controls="" '+L.join(" ")+' src="'+J+'" style="'+Q+'"></video>';M.get(0).innerHTML=newVideo;M.find("video:first").each(function(){var T=d(this);T.data("pandora",true);T.data("pandoraLoaded",true);T.data("autoplay",O);H.video[A]={elm:T,nativeElm:T.get(0)};H.listeners.init(A);if(E._callbacksObj[A]){if(E._callbacksObj[A].dataChanged){E._callbacksObj[A].dataChanged(G);}}if(B||O){H.CONTROLS.play(A);}E.thirdParty.akamaiMediaAnalytics(T.attr("id"));c("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((z)?"TRUE":"FALSE"));if(z){H.ADS.set({id:A,elm:M,url:J,dim:D.dim});}});};c("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((z)?"TRUE":"FALSE"));if(z){H.ADS.load(function(){I();});}else{I();}}};y.prototype.AKAMAI=function(ad,R,C,K){var N=this,V=N.root,F=V.main;var G=function(ae){return ae.replace(/[^0-9]/gi,"");};var Y=F.holderObj[R],H=G(R),E=(Y.elm.data("autoplay"))?true:false,J=(F._config.player.variable)?true:false,Q=Y.elm.parent(),U=Y.vAttr,S=j(U.width)?U.width:G(U.width),O=j(U.height)?U.height:G(U.height),z=F._config.player,X=(!z.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(z.environment==="beta")?"beta.":"",ac=(V.helper.getQuery("_"+p.ox+p.ol.lmp.toLowerCase()+p.ol.arg.toLowerCase())==="y")?true:false,aa=X+F._videoDomain,T=n.PROTOCOL+"//"+aa,B=[];c("[videoPlayer.pandora] Using AKAMAI HTML5 video player.");if(K){B.push("autoplay=true");}var W=false,M,P,I="",ab=[].concat(B);var A=V.helper.getQuery("_ver")||n.BUNDLE_VERSION,L=G(R),D="FOX_VP_LoadHandler_"+L;var Z=function(){var ae={autoplay:K,feed:{url:"/v/feed/video/"+L+".js?template=fox"},flash:{vars:{video_id:L}},mediaanalytics:{fields:{pageName:{type:"value",value:"fullpage"}}},omniture:{account:"foxnews",playerName:"html5"},auditude:{banner:{id:"cb_medrect300x60_div",width:300,height:60}}};if(!W){W=new EventMessageHandler();}W.addHandler("advance",function(af){if(typeof window.playNextVideo==="function"){c("EVENT: advance");window.playNextVideo(af);}});W.addHandler("companion",function(ag){var af,ah=d("#cb_medrect300x60_div");if(d.isArray(ag)&&ag.length>0){ah.empty();for(var af=0;af<ag.length;af++){if(ag[af].content){ah.append(ag[af].content);}}}});if(!window[D]){window[D]=function(){target=d("iframe[data-uid='"+L+"']:first").get(0)||false;if(target){W.sendMessage(target,"FOXVIDEO.IFRAME.Embed",ae);}};}};if(parseInt(A.split(".")[0],10)>=5&&window.EventMessageHandler){I=' onload="'+D+'(event)"';Z();P=T+"/static/p/video/app/bundle/"+A+"/iframe/embed.html";ab.push("id="+L);ab.push("mode=html");ab.push("_fx=y");if(V.helper.getQuery("debug")==="true"){ab.push("debug=true");}}else{P=T+"/static/p/video/app/embed.html";ab.push("video_id="+L);ab.push("_vtcomp=y");if(A){ab.push("_ver="+A);}}if(!J){ab.push("w="+S,"h="+O);P+="?"+ab.join("&");M='<iframe data-uid="'+L+'" src="'+P+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+S+'" height="'+O+'" style="border:0;width:'+U.width+";height:"+U.height+'"'+I+"></iframe>";}else{ab.push("w=1","h=1");P+="?"+ab.join("&");M='<iframe data-uid="'+L+'" src="'+P+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="100%" height="100%" style="border:0;width:100%;height:100%"'+I+"></iframe>";M='<div id="fox-html5-frame" style="width:'+U.width+";height:"+U.height+'">'+M+"</div>";}Q.get(0).innerHTML=M;};return y;}());var q=(function(){var y=function(z){this.root=z;this.zoneIdVal=(function(){var B=n.auditude_code.zoneId,A=B.fn2;switch(z._videoDomain){case"video.foxnews.com":A=B.fn2;break;case"video.foxbusiness.com":A=B.fb2;break;case"video.foxbusiness.com":A=B.fb;break;}return A;}());};y.prototype={set:function(S){if(!S){return false;}var H=this,K=this.root,I=(K.main.dataObj[S.id]&&K.main.dataObj[S.id].guid)?K.main.dataObj[S.id].guid:false,B=S.elm,M=S.url,N=S.dim,A=(S.userData)?S.userData:{};var J=function(V){var T="p-click-"+I;try{d("body").append('<a href="#" id="'+T+'" style="display:none;">Click Me</a>');d("#"+T).click(function(){V.play();return false;});setTimeout(function(){d("#"+T).click().remove();},250);}catch(U){c("[videoPlayer.auditude] No play() function for html5 video element. (Err: "+U+")");}};var P,C,E,D,L=window.FN_AUDITUDE||{};P=(L.adVideoId)?L.adVideoId:I;C=(L.adDomain)?L.adDomain:n.auditude_code.adDomain;E=(L.zoneId)?L.zoneId:H.zoneIdVal;D=(L.defaultAssetId)?L.defaultAssetId:n.auditude_code.defaultAssetId;P=(P)?[P,D]:D;A.mobile=(function(){var T=l();return(T)?T.dev:"false";}());b("mobile platform:"+A.mobile);A=(function(){var T=[];for(var U in A){T.push(U+"="+A[U]);}return T.join(";");}());var F=B.get(0),R=B.find("video:first"),Q=R.get(0),z=false;var G={controls:true,style:{backgroundColor:"#000",width:R.width(),height:R.height()},handlers:{}};var O=aud.html5.AdPlayer(Q,F,C,E,G);O.subscribe(aud.events.init_complete,function(U,T){c("[videoPlayer.auditude] Init Complete event");T.publish(aud.notifications.break_begin);}).subscribe(aud.events.break_begin,function(U,T){c("[videoPlayer.auditude] Break Begin event");}).subscribe(aud.events.break_end,function(U,T){c("[videoPlayer.auditude] Break End event");if(!z){Q.src=M;Q.load();J(Q);}}).subscribe(aud.events.linear_ad_begin,function(V,U,T){c("[videoPlayer.auditude] Linear Ad Begin event");}).subscribe(aud.events.linear_ad_end,function(V,U,T){c("[videoPlayer.auditude] Linear Ad End event");}).subscribe(aud.events.non_linear_ad_begin,function(V,U,T){c("[videoPlayer.auditude] Non-Linear Ad Begin event");}).subscribe(aud.events.non_linear_ad_end,function(V,U,T){c("[videoPlayer.auditude] Non-Linear Ad End event");}).subscribe(aud.events.pause_playback,function(V,U,T){c("[videoPlayer.auditude] Pause playback event");Q.pause();}).subscribe(aud.events.resume_playback,function(V,U,T){c("[videoPlayer.auditude] Resume playback event");J(Q);}).init(P,{userData:A});},load:function(B){var A=this;if(!window.aud){var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=n.PROTOCOL+"//adunit.cdn.auditude.com:80/player/js/lib/plugin/1.2/aud.html5player.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(z);}d.loadAttempt(50,250,function(){return(window.aud&&aud.html5)?true:false;},function(){if(typeof B==="function"){B();}});}};return y;}());var u=(function(){var y=function(z){this.root=z;};y.prototype={init:function(z){this.events(z);this.custom(z);},events:function(B){var A=this.root,z=A.main;A.video[B].elm.bind("loadstart",function(){if(z._callbacksObj[B]){if(z._callbacksObj[B].videoLoadStart){z._callbacksObj[B].videoLoadStart();}}d.removeData(A.video[B].elm,"Event_ended");A.EVENTS.loadStart(B);});A.video[B].elm.bind("progress",function(){A.EVENTS.progress(B);});A.video[B].elm.bind("loadedmetadata",function(){if(z._callbacksObj[B]){if(z._callbacksObj[B].videoMedaLoaded){z._callbacksObj[B].videoMetaLoaded();}}A.EVENTS.loadedMetaData(B);});A.video[B].elm.bind("ended",function(){if(z._callbacksObj[B]){if(z._callbacksObj[B].videoEnded){z._callbacksObj[B].videoEnded(A.CONTROLS);}}A.video[B].elm.data("Event_ended",true);A.EVENTS.ended(B);});A.video[B].elm.bind("playing",function(){if(z._callbacksObj[B]){if(z._callbacksObj[B].videoPlaying){z._callbacksObj[B].videoPlaying();}}A.EVENTS.playing(B);});A.video[B].elm.bind("pause",function(){if(z._callbacksObj[B]){if(z._callbacksObj[B].videoPause){z._callbacksObj[B].videoPause();}}A.EVENTS.pause(B);});A.video[B].elm.bind("timeupdate",function(){if(z._callbacksObj[B]){if(z._callbacksObj[B].videoTimeUpdate){z._callbacksObj[B].videoTimeUpdate();}}A.EVENTS.timeUpdate(B);});},custom:function(z){}};return y;}());var o=(function(){var y=function(z){this.root=z;};y.prototype={play:function(C){var A=this.root,z=A.main,B=z.setPlayerMap({type:"get",vId:C});if(typeof document.getElementById(B)!=="undefined"){document.getElementById(B).play();}},pause:function(C){var A=this.root,z=A.main,B=z.setPlayerMap({type:"get",vId:C});if(typeof document.getElementById(B)!=="undefined"){document.getElementById(B).pause();}},load:function(z){},canPlayType:function(z){},jumpTo:function(D,C){if(isNaN(C)){return false;}var A=this.root,z=A.main,B=z.setPlayerMap({type:"get",vId:D});if(typeof document.getElementById(B)!=="undefined"){document.getElementById(B).currentTime=C;}}};return y;}());var r=(function(){var y=function(z){this.root=z;};y.prototype={loadStart:function(C){var A=this.root,z=A.main,B=z.setPlayerMap({type:"get",vId:C});},progress:function(C){var z=this.root,B=z.STATES.buffered(C,{range:"end",val:0}),A=parseInt((B/z.STATES.duration(C))*100,10);},loadedMetaData:function(z){},timeUpdate:function(z){},ended:function(z){},playing:function(z){},pause:function(z){}};return y;}());var w=(function(){var y=function(z){this.root=z;};y.prototype={currentTime:function(E,A){A=A||false;var z=this.root,D=Math.round(z.video[E].nativeElm.currentTime);if(!A){var C=z.helper.formatTime(D),B=z.STATES.duration(E,true);return(C>B)?B:C;}return D;}};return y;}());var v=(function(){var y=function(z){this.root=z;};y.prototype={duration:function(E,B){B=B||false;var A=this.root,z=A.main,D=z.setPlayerMap({type:"get",vId:E});if(typeof document.getElementById(D)==="undefined"){return 0;}var C=Math.round(document.getElementById(D).duration);if(!B){return A.helper.formatTime(C);}return C;},buffered:function(E,B){B=B||false;if(!B){return false;}var A=this.root,z=A.main,D=z.setPlayerMap({type:"get",vId:E});if(typeof document.getElementById(D)!=="undefined"){try{switch(B.range){case"length":return document.getElementById(D).buffered.length;case"start":return document.getElementById(D).buffered.start(B.val);case"end":return document.getElementById(D).buffered.end(B.val);}}catch(C){c("[videoPlayer.pandora.states] Warning: "+C);}}return false;}};return y;}());return t;}());var g={set:function(){var o,r,p=this,q=arguments,s={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(q.length===1&&typeof q[0]==="object"){for(r in q[0]){s[r]=q[0][r];}}else{for(o=0;o<q.length;o++){switch(o){case 0:s.elm=q[0];break;case 1:s.ratio=q[1];break;case 2:s.dim=q[2];break;case 3:s.position=q[3];break;case 4:s.size=q[4];break;case 5:s.useAltImg=q[5];break;case 6:s.altHover=q[6];break;}}}s.elm.each(function(){var u=d(this),t=new Image(),v=s;v.elm=u;if(v.dim){p.setOverlay(v);}else{t.onload=function(){v.dim=[t.width,t.height];p.setOverlay(v);};t.src=u.find("img").attr("src");}});},useAbsImg:function(s,p){var w,o=["118","96","64","48","32","24","16"],v=false;if(!isNaN(s)){if(s>=o[0]){v=o[0];}else{for(w=0;w<o.length;w++){var q=o[w],u=(o[w+1])?o[w+1]:0,t=Math.abs(q-s),r=Math.abs(q-u);if(s<=q&&s>u){v=(t>r)?u:q;break;}}}}return(v)?v:false;},setOverlay:function(p){var o=this,w=p.elm,y=p.ratio||0.35,q=p.dim,r=p.position||"center",F=p.size||118,s=p.useAltImg,E=p.altHover||false,v=true,B=false;var z=n.PROTOCOL+"//global.fncstatic.com/static/v/all/img/vp-overlay${dim}${hover}.png";function A(G){return Math.floor(G);}function D(G){return G+"px";}function t(H){H=(E)?((H)?false:true):H;var G;if(v&&B){G=B;}G=(G)?("-"+G):"";return z.replace("${dim}",G).replace("${hover}",(H)?"-hover":"");}function C(){var S=(q[1]<q[0])?q[1]:q[0],H=S*y;H=(H>F)?F:H;var P=H,J=P,Q=false,M=false,L=false,G=false,O=0.03,I=0.05;O=A(q[0]*O);I=A(q[1]*I);switch(r){case"top right":M=O;L=I;break;case"bottom right":M=O;G=I;break;case"top left":Q=O;L=I;break;case"bottom left":Q=O;G=I;break;default:Q=Math.floor((q[0]*0.5)-(P*0.5));L=Math.floor((q[1]*0.5)-(J*0.5));}var N={};if(M){N.right=D(M);}if(Q){N.left=D(Q);}if(L){N.top=D(L);}if(G){N.bottom=D(G);}if(v&&o.useAbsImg(P)){P=o.useAbsImg(P);J=P;B=P;}N.width=D(P);N.minHeight=D(J);var K=d('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+t()+'"/></span>'),R=w.parent().find("> h3:first");K.find("img").css(N);w.find("a").css({position:"relative"});w.find("img").each(function(){var U=d(this),T=U.parent(),X=false;T.css({display:"block",padding:"0"}).prepend(K);var W=T.find(".vid-overlay"),Y=W.find("img");function V(Z){if(Z&&!X){X=true;Y.attr("src",t(true));}else{if(X){X=false;Y.attr("src",t());}}}R.hover(function(){V(true);},function(){V();});T.hover(function(){V(true);},function(){V();});});}var u=new Image();u.src=t(true);C();}};function h(){var o=false,p=navigator.userAgent;var q=function(r){return(p.toLowerCase().indexOf(r)>-1)?true:false;};if(q("silk/1.0")){o=false;}else{if(q("android")&&!q("silk")){o="legacy";}else{if(q("blackberry")){o=true;}else{if(q("iemobile")){o="legacy";}else{if("createTouch" in document){o=true;}}}}}return o;}function m(){var o=document.createElement("video");return(o.play)?true:false;}function f(o){o=o||false;return Object.prototype.toString.call(o)==="[object Array]";}function l(){var o={};if(navigator.userAgent.match(/iPhone/i)){o.mobile="ios";o.dev="iPhone";}else{if(navigator.userAgent.match(/iPod/i)){o.mobile="ios";o.dev="iPod";}else{if(navigator.userAgent.match(/iPad/i)){o.mobile="ios";o.dev="iPad";}else{if(navigator.userAgent.match(/Silk/i)){o.mobile="android";o.dev="Kindle";}else{o=false;}}}}return o;}function j(o){return(typeof o==="string"&&o.indexOf("%")===o.length-1)?true:false;}if(!window.console){window.console={log:function(){},error:function(){}};}function c(){var p=false;p=(!p&&(window.location.search.indexOf("stc=y")>-1))?true:p;if(!window.console){window.console={log:function(){},error:function(){}};}if(p&&window.console){try{return console.log.apply(console,arguments);}catch(o){console.log(arguments);}}}var b=c;(function(){var p=function(){var y,r,u=this,v=arguments;if(v.length===0){return false;}var t={attempt:0,timeout:500};if(v.length===1&&typeof v[0]==="object"){for(y in v[0]){t[y]=v[0][y];}if(!t.callback){return false;}else{r=t.callback;}if(!r.check||!r.success){return false;}else{t._check=r.check;t._success=r.success;}if(r.timedOut){t._timeout=r.timedOut;}}else{if(!isNaN(v[0])&&!isNaN(v[1])&&o(v[2])&&o(v[3])){t.attempt=v[0];t.timeout=v[1];t._check=v[2];t._success=v[3];if(v[4]){t._timeout=v[4];}if(v[5]){t._abort=v[5];}}else{if(o(v[0])&&o(v[1])){t._check=v[0];t._success=v[1];if(v[2]){t._timeout=v[2];}if(v[3]){t._abort=v[3];}}else{return false;}}}if(!o(t._check)||!o(t._success)){return false;}if(!o(t._timeout)){t._timeout=function(){};}if(isNaN(t.timeout)){return false;}else{t.timeout=q(t.timeout);}if(isNaN(t.attempt)){return false;}else{t.attempt=q(t.attempt);}var z=false,s=false;if(t.attempt&&t.timeout){var w=function(){if(s){clearTimeout(z);}else{if(t._check()){t._success();clearTimeout(z);}else{if(t.attempt>0){z=setTimeout(function(){w();},t.timeout);}else{t._timeout();}}}t.attempt--;};w();}else{z=setInterval(function(){if(s){clearInterval(z);}else{if(t._check()){t._success();clearInterval(z);}}},t.timeout);}return{abort:function(){s=true;}};};function q(r){return parseInt(r,10);}function o(r){return(typeof r==="function")?true:false;}if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:p});}else{if(!window.loadAttempt){window.loadAttempt=p;}}}());}(jQuery));window.FOX_MediaIconOverlay=(function($){var CONST={classType:{"video-ct":{type:"video",image:"/static/v/all/img/vd-overlay_${dim}.png"},"slideshow-ct":{type:"slideshow",image:"/static/v/all/img/ss-overlay_${dim}.png"},"interactive-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"freeform-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"magnify-ct":{type:"magnify",image:"/static/v/all/img/mg-overlay_${dim}.png"},"listpage-ct":{type:"listpage",image:"/static/v/all/img/lp-overlay_${dim}.png"}}};var App=function(){};App.prototype.set=function(obj){var self=this;if(!obj){return false;}obj.type=(function(type){var ret=false;ret=self.getMediaType(obj.elm);return(ret)?ret:type;}(obj.type||false));if(!obj.type){return false;}obj.elm.find("span.type").hide();obj.container=obj.elm;obj.elm=obj.elm.find(".m");var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});};App.prototype.getMediaType=function(elm){var i,ret=false,type=CONST.classType;for(i in type){if(elm.hasClass(i)){ret=type[i].type;break;}}return ret;};var setAbsImg=function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;};var setOverlay=function(obj){var elm=obj.elm,path="",ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",edge=obj.edge||[0.03,0.05],size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useLink=obj.useLink||false,useAbsImg=true,absDim=false,type=obj.type||"video",hoverElm=obj.hoverElm||false;for(var i in CONST.classType){if(CONST.classType[i].type===type){path=CONST.classType[i].image;break;}}elm.find(".media-overlay").remove();var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=edge[0],edgeH=edge[1];edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&setAbsImg(imgW)){imgW=setAbsImg(imgW);imgH=imgW;absDim=imgW;}var overlaySrc=(function(){var dim,ret=window.location.protocol+"//global.fncstatic.com"+path;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?dim:"";return ret.replace("${dim}",dim);}());var hoverImg=new Image();hoverImg.src=overlaySrc;css.width=px(imgW);css.minHeight=px(imgH);css.background='url("'+overlaySrc+'") no-repeat 0px 0px';var overlay=$('<div class="media-overlay" style="position:absolute;"></div>'),titleLink=elm.parent().find("> h3:first");overlay.css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false;parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=(useLink)?useLink:el.attr("href");if(onclick){eval(onclick);}else{if(href){window.location.href=href;}}return false;});}var overlayElm=parent.find(".media-overlay");function hoverOver(over){if(over&&!isHover){isHover=true;overlayElm.css("background-position","0px "+px("-"+imgH));}else{if(isHover){isHover=false;overlayElm.css("background-position","0px 0px");}}}if(parent.parent().find("> .credit").size()>0){overlayElm.css({bottom:"21px"});}if(hoverElm){hoverElm.hover(function(){hoverOver(true);},function(){hoverOver();});}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});};var mFloor=function(val){var ret=Math.floor(val);return ret;};var px=function(val){var ret=val+"px";return ret;};return(new App());}(jQuery));(function(d){function f(){this.listenersArr=[];this.version="03.31.2010";}f.prototype={append:function(j){j=j||false;if(!j||!j.elm){return false;}var k=this,l=new h();l.init(j);this.listenersArr.push({fn:l,config:j});this.trigger(l);},trigger:function(k){k=k||false;var m=this;if(k){k.trigger();}else{var j;for(j=0;j<m.listenersArr.length;j++){var l=m.listenersArr[j].fn;m.helper.removeListener(l._elm,k.thisEventList);l.trigger();}}},reTriggerListener:function(){var j=this;d(document).ready(function(){var o=500,k=10000,m=0,n=d("iframe").size();function l(){if(n!==m){m=n;}else{o=Math.floor(o/3)+o;}if(o<k){j.trigger();setTimeout(function(){l();},o);}}l();});}};f.prototype.helper={removeListener:function(k,j){k.each(function(){var l,m=d(this);if(a(j)){for(l=0;l<j.length;l++){m.unbind(j[l]);}}else{m.unbind(j);}});}};function h(){this._elm=false;this._eventsCallback={};this._moveSensitivity=15;this.properties={scale:{},move:{origin:{},current:{},diff:{}}};this.thisEventList=["touchstart","touchend","touchmove","gesturestart","gestureend"];}h.prototype={init:function(j){var k;for(k in j){this["_"+k]=j[k];}this.testElm={coords:d("#coords"),start:d("#start"),diff:d("#diff")};this.logger=new b();this.logger.init();},trigger:function(){var j=this;this._elm.each(function(){j.setListeners(d(this));});},setListeners:function(k){k=k||false;if(!k){return false;}var j=this,m=k.get(0);k.bind("touchstart",function(n){var o=n.originalEvent;j._elm.data("EVENT_touchstart.trigger",true);j._elm.data("EVENT_touchmove.setOrigin",false);j._elm.data("EVENT_touchmove.directionalOnce",false);if(j._eventsCallback.touchstart){j._eventsCallback.touchstart(o);}});k.bind("touchend",function(n){var o=n.originalEvent;j._elm.data("EVENT_touchstart.trigger",false);j._elm.data("EVENT_touchmove.directionalOnce",false);if(j._eventsCallback.touchend){j._eventsCallback.touchend(o);}});k.bind("touchmove",function(p){var s=p.originalEvent,r=s.touches[0].pageX,q=s.touches[0].pageY;j.properties.move.current={x:r,y:q};if(!j._elm.data("EVENT_touchmove.setOrigin")){j.properties.move.origin.x=r;j.properties.move.origin.y=q;j._elm.data("EVENT_touchmove.setOrigin",true);}var n={x:j.properties.move.origin.x,y:j.properties.move.origin.y};j.properties.move.diff={x:r-n.x,y:q-n.y};if(j._eventsCallback.touchmoveRaw){j._eventsCallback.touchmoveRaw(j.properties.move,s);}function o(){var u=j._moveSensitivity,v=[];function t(){j._elm.data("EVENT_touchmove.directionalOnce",true);}if(r>=n.x+u){v.push("right");j.logger.log("going right");}else{if(r<=n.x-u){v.push("left");j.logger.log("going left");}}if(q<=n.y-u){v.push("up");j.logger.log("going up");}else{if(q>=n.y+u){v.push("down");j.logger.log("going down");}}if(j._eventsCallback.touchmoveMoveOnce){j._eventsCallback.touchmoveMoveOnce(v,j.properties.move,s);}if(v.length>0){t();}}if(!j._elm.data("EVENT_touchmove.directionalOnce")){o();}});k.bind("gesturestart",function(n){var o=n.originalEvent,p=j.helper.setScale(o.scale);j.properties.scale.current=j.properties.scale.current||p;if(j._eventsCallback.gesturestart){j._eventsCallback.gesturestart(o);}j.properties.scale.changed=false;});k.bind("gestureend",function(n){var o=n.originalEvent,p=j.helper.setScale(o.scale);if(j._eventsCallback.gestureend){j._eventsCallback.gestureend(o);}if(j.properties.scale.current!==p){j.properties.scale.current=p;j.properties.scale.changed=true;j.logger.log("Scale changed to: "+p);if(j._eventsCallback.scaleChange){j._eventsCallback.scaleChange(p,o);}}});var l=d(window);if(!l.data("EVENT_orientationchange")){l.bind("orientationchange",function(n){var o=n.originalEvent;j.logger.log("Orientation change: "+j.helper.orientation(window.orientation,o));});l.data("EVENT_orientationchange",true);}if(j._eventsCallback.orientationchange){l.bind("orientationchange",function(n){var o=n.originalEvent;j._eventsCallback.orientationchange(j.helper.orientation(window.orientation,o));});}}};h.prototype.helper={setScale:function(j){if(!isNaN(j)){return Math.round(j*100)/100;}},orientation:function(k){if(!isNaN(k)){var j=Math.abs(k);return(j===0||j===180)?"vertical":"horizontal";}}};function c(j){if(typeof window.console==="object"){console.log(j);}}function a(j){j=j||false;return Object.prototype.toString.call(j)==="[object Array]";}var b=function(){};b.prototype={init:function(){this.elm=d("#console ul:first");},log:function(j){if(this.getQuery("log")!=="y"){return false;}if(this.elm.size()>0){j="<li>"+j+"</li>";this.elm.append(j);}else{c(j);}},getQuery:function(n){var j,l=(window.location.search).substr(1),m=l.split("&");for(j=0;j<m.length;j++){var k=m[j].split("=");if(k[0]===n){return k[1];}}return false;}};var g=window.touchEventListener=new f();}(jQuery));window.ClientStorageManager=(function(g){var c={},m={_namespace:"ClientStorageManager",_prefix:"FoxCSM_",_cookiePrefix:"FXcsm",_cookiePersistence:30,_showConsole:false,_frameSrc:"/static/v/all/html/IEStore.html",_splitVars:"|#|"};var f=function(){this.dataObj=null;this.initialized=false;this.type=null;this.customType=false;this.control=new b(this);this.init();};f.prototype={init:function(){var n=this,o=a();n.setProperties();n.storageInstance=new j(n,{namespace:m._namespace,prefix:m._prefix,type:o});n.type=o;n.initialized=true;d("[init] Initialized: "+n.type);if(n.type.toLowerCase().indexOf("cookie")>-1){d("[init] Warning: cookie storage maxes out at 4kb only!");}},setProperties:function(){var o,r=(g.location.search).substr(1),s=r.split("&"),n=s.length,p={};for(o=0;o<n;o++){var q=s[o].split("=");p[q[0]]=decodeURIComponent(q[1]);}if(p.showConsole){m._showConsole=true;}},set:function(){var p,n=this,o=arguments,q;var r=function(v){switch(v.key){case"type":var u=v.value;switch(u){case"session":u=(g.sessionStorage)?"sessionStorage":"sessionCookie";break;case"cookie":u="cookie";break;case"sessionCookie":u="sessionCookie";break;default:d("[set] Getting default storage..");u=a();}if(u===n.type){d("[set] Type already: "+u);break;}if(n.type==="MSIEStorage"){n.MSIEStorageInstance=n.storageInstance;}var t={namespace:m._namespace,prefix:m._prefix,type:u,prevType:n.type};var s=(t.type==="MSIEStorage")?n.MSIEStorageInstance:new j(n,t);if(s.initialized){h();k(CS,{customType:true,storageInstance:s,type:t.type});n.control.root=CS;d("[set] Storage changed: "+t.prevType+" -> "+t.type);if(n.type.toLowerCase().indexOf("cookie")>-1){d("[set] Warning: cookie storage maxes out at 4kb only!");}}else{d("[set] Error setting type: "+u);}break;default:d("[set] Invalid property key: "+v.key);}};if(typeof o[0]==="object"){for(p in o[0]){r({key:p,value:o[0][p]});}}else{r({key:o[0],value:o[1]});}},saveItem:function(){var n=arguments,o=(n.length===1&&typeof n[0]==="object")?n[0]:{key:n[0],value:n[1]};this.control.saveItem(o);},deleteItem:function(n,o){var p={key:n};if(o){p.fn=o;}this.control.deleteItem(p);},getItem:function(o,p,n){this.control.getItem({key:o,fn:p,raw:n||false});},getAll:function(n){this.control.getAllItems(n);},clearAll:function(n){this.control.clearAll(n);}};var b=(function(){var o=function(p){this.root=p;};o.prototype={saveItem:function(r){var q=this,p=this.root;if(r.key&&r.value){var s=n.formatValue(r.value);if(s&&s.length>0){p.storageInstance.save({key:q.setPrefix(r.key),value:s,expire:(r.expire)?r.expire:0});if(typeof r.success!=="undefined"){q.attempts=0;q.checkData(r);}}}else{if(r.error){r.error("No Key or Value entered");}}},deleteItem:function(s){var q=this,p=this.root,r=this.setPrefix(s.key);var t=function(){p.storageInstance.deleteItem(r);d("[control] Storage Event: Delete");};if(s.fn){s.fn(t());}else{t();}},getItem:function(p){p.key=this.setPrefix(p.key);this.root.storageInstance.load(p);},getAllItems:function(p){this.root.storageInstance.getAll(p);},clearAll:function(r){var q=this,p=this.root;p.storageInstance.clearAll();d("[control] Storage Event: Clear All");if(typeof r==="function"){r();}},checkData:function(r){var q=this,p=this.root;q.getItem({key:r.key,raw:false,fn:function(t){if(t!==null){r.success({key:r.key,value:t,type:p.storageInstance.type});d("[control] Storage Event: Save");}else{var s="[control] Error saving key: "+r.key;r.success=false;r.error(s);d(s);return null;}}});},setPrefix:function(p){var q="MSIEStorage|cookie|sessionCookie";return(q.indexOf(this.root.type)>-1)?p:n.addPrefix(m._prefix,p);}};var n={addPrefix:function(q,p){return q+this.trim(p);},removePrefix:function(q,p){return p.substr(q.length);},formatValue:function(p){return this.trim(p.toString());},trim:function(p){return p.replace(/^\s+|\s+$/g,"");}};return o;}());var j=(function(){var n=function(t,u){this.root=t;this.sessionStorage=new s(this);this.localStorage=new p(this);this.globalStorage=new q(this);this.MSIEStorage=new o(this);this.cookieStorage=new r(this);return(this.init(u));};n.prototype={init:function(u){var t=this,v;t.initialzed=true;switch(u.type){case"MSIEStorage":k(u,{div:{id:"IEStorageSource",store:"xmldomstore"},frame:{src:m._frameSrc,id:"IEStorageSource",name:"DOMPersistentSource",store:"xmldomstore"}});v="MSIEStorage";break;case"cookie":k(u,{cookieName:m._cookiePrefix,sessionCookie:false});v="cookieStorage";break;case"sessionCookie":k(u,{cookieName:m._cookiePrefix+"s",sessionCookie:true});v="cookieStorage";break;default:v=u.type;}t[v].init(u);return t[v];}};var s=function(t){this.root=t.root;this.main=t;};s.prototype={init:function(t){var u;for(u in t){this[u]=t[u];}this.initialized=true;},save:function(u){try{g.sessionStorage.setItem(u.key,u.value);}catch(t){d("[sessionStorage save] Error Saving: "+t);}},load:function(){var t=arguments;function u(v){return g.sessionStorage.getItem(v);}if(t.length===1&&typeof t[0]==="object"){t[0].fn(u(t[0].key));}else{return u(t[0]);}},deleteItem:function(t){g.sessionStorage.removeItem(t);},getAll:function(y){var u,v={},z=0,A=g.sessionStorage,t=A.length;for(u=0;u<t;u++){var w=A.key(u);if(w.indexOf(this.prefix)===0){v[w.substr(this.prefix.length)]=this.load(w);z++;}}y((z>0)?v:null);},clearAll:function(){var u,w,z=[],A=g.sessionStorage,t=A.length;for(u=0;u<t;u++){var y=A.key(u);if(y.indexOf(this.prefix)===0){z.push(A.key(u));}}var v=z.length;for(w=0;w<v;w++){this.deleteItem(z[w]);}return true;}};var p=function(t){this.root=t.root;this.main=t;};p.prototype={init:function(t){var u;for(u in t){this[u]=t[u];}this.expire=new l();this.initialized=true;this.removeExpired();},save:function(v){var t="";if(v.expire){t=(this.expire.setToExpire(v.expire))?this.expire.set(v.expire):"";}try{g.localStorage.setItem(v.key,v.value.toString()+t);}catch(u){d("[localStorage save] Error Saving: "+u);}},load:function(){var t=this,u=arguments;function v(y,w){var z=g.localStorage.getItem(y);if(z){if(t.expire.isStale(z)){t.deleteItem(y);}else{return(!w)?t.expire.removeExpireStr(z):z;}}return null;}if(u.length===1&&typeof u[0]==="object"){u[0].fn(v(u[0].key,u[0].raw||false));}else{return v(u[0],u[1]||false);}},deleteItem:function(t){g.localStorage.removeItem(t);},getAll:function(y){var u,v={},z=0,A=g.localStorage,t=A.length;for(u=0;u<t;u++){var w=A.key(u);if(w.indexOf(this.prefix)===0){v[w.substr(this.prefix.length)]=this.load(w);z++;}}y((z>0)?v:null);},clearAll:function(){var u,w,z=[],A=g.localStorage,t=A.length;for(u=0;u<t;u++){var y=A.key(u);if(y.indexOf(this.prefix)===0){z.push(A.key(u));}}var v=z.length;for(w=0;w<v;w++){this.deleteItem(z[w]);}return true;},removeExpired:function(){var u,w,y=[],z=g.localStorage,t=z.length;for(u=0;u<t;u++){y.push(z.key(u));}var v=y.length;for(w=0;w<v;w++){if(y[w].indexOf(this.prefix)===0&&this.expire.isStale(z[y[w]])){this.deleteItem(y[w]);}}}};var q=function(t){this.root=t.root;this.main=t;};q.prototype={init:function(t){var u;for(u in t){this[u]=t[u];}this.expire=new l();this.initialized=true;this.removeExpired();},save:function(v){var t="";if(v.expire){t=(this.expire.setToExpire(v.expire))?this.expire.set(v.expire):"";}try{g.globalStorage[document.domain][v.key]=v.value.toString()+t;}catch(u){d("[globalStorage save] Error Saving: "+u);}},load:function(){var t=this,u=arguments;function v(y,w){if(typeof g.globalStorage[document.domain][y]==="undefined"){return null;}var z=g.globalStorage[document.domain][y].value;if(t.expire.isStale(z)){t.deleteItem(y);}else{return(!w)?t.expire.removeExpireStr(z):z;}return null;}if(u.length===1&&typeof u[0]==="object"){u[0].fn(v(u[0].key,u[0].raw||false));}else{return v(u[0],u[1]||false);}},deleteItem:function(t){delete g.globalStorage[document.domain][t];},getAll:function(y){var u,v={},z=0,A=g.globalStorage[document.domain],t=A.length;for(u=0;u<t;u++){var w=A.key(u);if(w.indexOf(this.prefix)===0){v[w.substr(this.prefix.length)]=this.load(w);z++;}}return y((z>0)?v:null);},clearAll:function(){var u,w,z=[],A=g.globalStorage[document.domain],t=A.length;for(u=0;u<t;u++){var y=A.key(u);if(y.indexOf(this.prefix)===0){z.push(A.key(u));}}var v=z.length;for(w=0;w<v;w++){this.deleteItem(z[w]);}return true;},removeExpired:function(){var t;for(t in globalStorage[document.domain]){if(t.indexOf(this.prefix)===0&&this.expire.isStale(globalStorage[document.domain][t].value)){this.deleteItem(t);}}}};var o=function(t){this.root=t.root;this.main=t;};o.prototype={init:function(t){var u;for(u in t){this[u]=t[u];}this.expire=new l();this.initialized=false;this.isDocReady=false;var v=document.createElement("iframe");v.setAttribute("src",this.frame.src+"?n="+t.namespace+"&s="+this.frame.store);v.setAttribute("id",this.frame.id);v.setAttribute("name",this.frame.name);v.setAttribute("width","5");v.setAttribute("height","5");v.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-9999px;");this.iframe=v;this.setFrame();},save:function(v){if(!this.initialized){return false;}if(!this.dataObj){this.dataObj={};}var t="";if(typeof v.expire!=="undefined"){t=(this.expire.setToExpire(v.expire))?this.expire.set(v.expire):"";}this.dataObj[v.key]=v.value.toString()+t;try{this.dataStorage.reloadIEStorage();return true;}catch(u){d("[IEStorage save] Error Saving: "+u);return false;}},load:function(){var t=this,u=arguments;function z(B,A){if(!t.initialized){return null;}var D=t.dataObj;if(D[B]){var C=D[B];if(t.expire.isStale(C)){t.deleteItem(B);}else{return(!A)?t.expire.removeExpireStr(C):C;}}return null;}if(u.length===1&&typeof u[0]==="object"){var w=0,y=u[0];var v=function(){if(t.initialized){clearTimeout(c.IELoad);if(t.dataObj){var A=y.raw||false;y.fn(z(y.key,A));}else{y.fn(null);}}else{c.IELoad=setTimeout(function(){v();},50);}};v();}else{return z(u[0],u[1]||false);}},deleteItem:function(t){if(this.initialized){delete this.dataObj[t];this.dataStorage.reloadIEStorage();}},getAll:function(v){var t=this,w=0;function u(){if(t.initialized){clearTimeout(c.IEGetAll);if(typeof t.dataObj!=="undefined"){var y,B={},z=0;for(y in t.dataObj){var A=t.load(y);if(A){B[y]=A;z++;}}return v((z>0)?B:null);}return v(null);}else{if(w>=2){clearTimeout(c.IEGetAll);return v(null);}else{w++;c.IEGetAll=setTimeout(function(){u();},50);}}}u();},clearAll:function(){if(this.initialized){delete this.dataObj;this.dataStorage.reloadIEStorage();}},removeExpired:function(){if(this.initialized){var t,u=this.dataObj;for(t in u){if(this.expire.isStale(u[t])){delete u[t];}}this.dataObj=u;this.dataStorage.reloadIEStorage();}},loadClientData:function(t){this.dataObj=this.processStrToObj(t);},processStrToObj:function(y){var u,z={},w=y.split(m._splitVars),t=w.length;for(u=0;u<t;u++){var v=w[u].split("=");z[v[0]]=decodeURIComponent(v[1]);}return z;},processObjToStr:function(v){var t,u=[];if(v){for(t in v){u.push(t+"="+encodeURIComponent(v[t]));}}return(u.length>0)?u.join(m._splitVars):"";},setFrame:function(){var t=this;document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);u();}});if(document.documentElement.doScroll&&g===g.top){(function(){if(t.isDocReady){return;}try{document.documentElement.doScroll("left");}catch(v){setTimeout(arguments.callee,50);return;}u();}());}function u(){if(!document.getElementById(t.frameId)){document.documentElement.appendChild(thisObj.iframe);}thisObj.isDocReady=true;thisObj.removeExpired();}}};var r=function(t){this.root=t.root;this.main=t;};r.prototype={init:function(t){var u;for(u in t){this[u]=t[u];}this.expire=new l();this.initialized=true;this.removeExpired();},save:function(u){var z=this.getStorageCookie(),w,t="";if(u.expire&&!this.sessionCookie){if(this.expire.setToExpire(u.expire)){t=this.expire.set(u.expire,"cookieValue");}}var v=encodeURIComponent(u.value.toString())+t;if(z){var y=this.processStrToObj(z);y[u.key]=v;w=this.processObjToStr(y);}else{w=u.key+"="+v;}if(w){this.saveCookie(w);return true;}},saveCookie:function(w){var t=(!this.sessionCookie)?("; expires="+this.expire.set(m._cookiePersistence,"cookie")):"",u=this.cookieName+"="+m._splitVars+w+t+"; path=/";try{document.cookie=u;}catch(v){d("[Cookie save] Error Saving: "+v);}},load:function(){var t=this,u=arguments;function v(z,y){var w=t.getStorageCookie();if(w){var B=t.processStrToObj(w);if(B[z]){var A=B[z];if(t.expire.isStale(A)){t.deleteItem(z);}return(!y)?t.expire.removeExpireStr(A):A;}}return null;}if(u.length===1&&typeof u[0]==="object"){u[0].fn(v(u[0].key,u[0].raw||false));}else{return v(u[0],u[1]||false);}},deleteItem:function(u){var t=this.getStorageCookie();if(t){var v=this.processStrToObj(t);if(v[u]){delete v[u];}this.saveCookie(this.processObjToStr(v));}},getAll:function(v){var t=this.getStorageCookie(),y={},w=0;if(t){var u,z=this.processStrToObj(t);for(u in z){if(z[u]){if(this.expire.isStale(z[u])){delete z[u];}else{y[u]=z[u];w++;}}}return v((w>0)?y:null);}return v(null);},clearAll:function(){this.saveCookie("");},removeExpired:function(){var t=this.getStorageCookie();if(t){var u,v=this.processStrToObj(t);for(u in v){if(v[u]){if(this.expire.isStale(v[u])){delete v[u];}}}this.saveCookie(this.processObjToStr(v));}},getStorageCookie:function(){var u,y,w=document.cookie.split(";"),t=w.length;for(u=0;u<t;u++){var v=w[u].replace(/^\s+|\s+$/g,"");if(v.substring(0,this.cookieName.length+1)===this.cookieName+"="){return decodeURIComponent(v.substring(this.cookieName.length+1));}}return null;},processStrToObj:function(y){var u,z={},w=y.split(m._splitVars),t=w.length;for(u=0;u<t;u++){var v=w[u].split("=");if(v[1]){z[v[0]]=v[1];}}return z;},processObjToStr:function(v){var t,u=[];for(t in v){if(t.length>0){u.push(t+"="+v[t]);}}return u.join(m._splitVars);}};return n;}());var a=function(){if(g.localStorage){return"localStorage";}else{if(g.globalStorage){return"globalStorage";}else{return"cookie";}}};var k=function(p,n){var o;for(o in n){p[o]=n[o];}return p;};var h=function(){var n;for(n in c){clearTimeout(c[n]);}};var d=function(n){if(typeof g.console==="object"&&m._showConsole){console.log(n);}};var l=function(){this.defaultExpire=14;this.expireStr="<!#[${value}]>";this.expireRegex=/\<!#\[(.+)\]>/;};l.prototype={now:function(){return(new Date());},set:function(n,o){n=n||this.defaultExpire;o=o||null;addTime=(n*24*3600000);var p=new Date(this.now().getTime()+addTime);switch(o){case"cookie":n=p.toUTCString();break;default:n=this.expireToStr(this.simpleDateStr(p));}return n;},simpleDateStr:function(n){var p=(n.getUTCMonth()+1)+"/"+n.getUTCDate()+"/"+n.getUTCFullYear(),o=n.getHours()+":"+n.getMinutes();return p+" "+o;},setToExpire:function(n){n=n||0;if(typeof n==="number"&&n>0){return true;}return false;},getExpire:function(p,o){var n=p.match(this.expireRegex);if(n){return(o)?n[0]:n[1];}return false;},isStale:function(o){var n=this.getExpire(o);if(n){return(this.hasExpired(n))?true:false;}return false;},hasExpired:function(o){var n=this.convert(o);return(this.now()>n)?true:false;},convert:function(o){var n=new Date(o);if(typeof o==="string"&&n.toString()==="Invalid Date"){n=new Date(parseInt(o,10));}return(n);},expireToStr:function(n){return this.expireStr.replace("${value}",n);},removeExpireStr:function(n){return n.replace(this.expireRegex,"");}};return(new f());}(window));(function(b){window.FoxISATracker=function(){this.dataObj={trigger:{pageLoad:false}};this.initialized=false;};FoxISATracker.prototype={init:function(c){if(!c){return false;}if(this.initialized){a("[ISA Tracker] Already Initialized");return false;}this.initialized=true;this.control.root=this;this.set(c);},set:function(f){if(!f){return false;}if(!this.initialized){this.init(f);}var d;for(d in f){var g,c=f[d];for(g in c){if(!this.dataObj.trigger[g]){this.dataObj.trigger[g]={};}this.dataObj.trigger[g][d]=c[g];}}},track:function(g,h){this.control.count(g);var c=this.dataObj.trigger;if(!c[g]){a("[ISA Tracker] No event specified for: "+g);return false;}var d,f=c[g];for(d in f){this.control.execTrigger({event:g,trigger:f[d],data:h,count:f._count});}}};FoxISATracker.prototype.control={count:function(g){g=g||false;if(!g){return false;}var c=this.root,d=c.dataObj.trigger;if(!d[g]){return false;}var f=((!isNaN(d[g]._count))?d[g]._count:0)+1;c.dataObj.trigger[g]._count=f;},execTrigger:function(g){if(typeof g!=="object"){return false;}if(!g.trigger){return false;}var c=g.event||false,d=g.trigger.frequency||false,l=g.trigger.callback||false,h=g.data||false,f=g.trigger||false,j=g.count||false;if(!c||isNaN(d)||!f){return false;}var m=this,k=this.root;if(typeof l==="function"){if(c==="pageLoad"&&j===1){l(h);}else{if(c.indexOf("click")===0){l(h);}else{if(j>1&&j%d===0){l(h);}}}}}};function a(d){try{FOX.utils.debug(d);}catch(c){if(typeof window.console==="object"&&window.location.search.indexOf("stc=y")){console.log(d);}}}}(jQuery));window.FOX_DependencyManager=(function(h){var b={prefix:"___"};var f=function(){this._TYPES=[];};f.prototype.addInstance=function(k,l){if(typeof k!=="string"&&k.length<1){return false;}var j=this;if(!j[a(k)]){j._TYPES.push(k);j[a(k)]=new c(k,this);if(h.isArray(l)){j.setDependency(k,l);}}else{d("[DependencyManager.addDependency] '"+k+"' already exists.");}};f.prototype.onReady=function(k,l){if(typeof k!=="string"||typeof l!=="function"){return false;}var j=this;h.loadAttempt(60,500,function(){return(j[a(k)])?true:false;},function(){j[a(k)].onReady(function(m){l(m);});},function(){d("[DependencyManager.onReady] Max attempts to check for the instance of '"+k+"' reached.");});};f.prototype.setDependency=function(k,l){if(typeof k!=="string"||!h.isArray(l)){return false;}var j=this,k=a(k);if(!j[k]){return false;}j[k].setDependency(l);};f.prototype.fireReady=function(k,l){if(typeof k!=="string"){return false;}var j=this,k=a(k);if(j[k]){j[k].EVENT.fireReady(l);}};var c=(function(){var j=function(m,l){this.root=l;this._TYPE=m;this._DEPENDENCY=false;this._IS_READY=false;this._pooler={};this.EVENT=new g(this);};j.prototype.setDependency=function(m){var l=this;if(l._DEPENDENCY){return false;}if(h.isArray(m)&&k(m)){l._DEPENDENCY=m;l.isReady();d("[DependencyManager."+l._TYPE+".setDependency] Dependency set.");}else{d("[DependencyManager."+l._TYPE+".setDependency] Invalid setting.");}};j.prototype.isReady=function(){var o=this,n=this.root;if(!o._DEPENDENCY){return false;}if(o._IS_READY&&!o._pooler.isReady){return o._IS_READY;}o._pooler.isReady=true;var m=function(){var s,t=o._DEPENDENCY,v=true;for(s=0;s<t.length;s++){var u=a(t[s]);if(n[u]&&!n[u].EVENT.inquire()){v=false;break;}}return v;};var q=false,p=0,l=360;var r=function(){p++;if(!q){q=m();}if(!q){if(p>l){d("[DependencyManager."+o._TYPE+".isReady] Max attempts reached to check ready state.");}else{setTimeout(function(){r();},500);}}else{o._IS_READY=true;o._pooler.isReady=false;}};r();};j.prototype.onReady=function(m){if(typeof m!=="function"){return false;}var l=this;h.loadAttempt(360,500,function(){return(l._IS_READY)?true:false;},function(){m(l._READY_DATA);});};var k=function(l){return true;};return j;}());var g=(function(){var j=function(k){this.root=k.root;this.main=k;this._IS_READY=false;this._READY_DATA=null;};j.prototype.fireReady=function(l){var k=this;if(!k._IS_READY){k._IS_READY=true;if(l){k._READY_DATA=l;}}};j.prototype.inquire=function(){var k=this;return k._IS_READY;};return j;}());var d=function(j){if(window.console&&window.console.log){console.log(j);}};var a=function(j){return(b.prefix+j);};return f;}(jQuery));window.MultiFeedParser=(function(k){var q={logName:"[Feed Parser]",jsonpParam:"callback",minRefreshRate:0.5};var h=function(w){w=w||{};var u=this;u.__vars={};var t=u.__vars;t._config=w;t._fn={};t._data={};t._xhr={};t._callStack={};t._initExe={};t._refreshObj={};u.event=new o(u);t._fn.log=(t._config.logging)?j:function(){};var z=(typeof t._config.initOnLoad==="boolean"&&!t._config.initOnLoad)?false:true;var y,s=(t._config&&t._config.feeds)?t._config.feeds:false;if(z&&s){for(y in s){r(t,y);if(s[y].refresh){b(u,y,s[y]);}}}};var o=(function(){var s=function(t){this.__vars={};var u=this.__vars;u.root=t;};s.prototype.reload=function(z){var u,B,w=false,D=this,A=D.__vars.root,C=A.__vars,E=(C._config&&C._config.feeds)?C._config.feeds:false,y=[];if(!E){return false;}var t=function(v){if(!C._refreshObj[v]){b(A,v,E[v]);}};if(typeof z==="string"){z=(a(z)).replace(/\s+/g," ");y=z.split(" ");}if(y.length>0){for(B=0;B<y.length;B++){if(E[y[B]]){C._fn.log(q.logName+" Reloading {type}: '"+y[B]+"'");r(C,y[B]);t(y[B]);w=true;}}}else{C._fn.log(q.logName+" Reloading all feed {type}");for(u in E){r(C,u);t(u);}w=true;}};s.prototype.addFeed=function(){var z=this,w=z.__vars.root,y=w.__vars,t=(y._config&&y._config.feeds)?y._config.feeds:{},B=arguments;var A={type:false,url:false};if(typeof B[0]==="string"&&typeof B[1]==="string"){A.type=B[0];A.url=B[1];}else{if(typeof B[0]==="object"&&B[0].type&&B[0].url){A=B[0];}}if(!A.type||!A.url){y._fn.log(q.logName+" Cannot fire event.addFeed(). Missing config {type} or {url}.");return false;}else{if(t[A.type]){y._fn.log(q.logName+" Cannot fire event.addFeed() for {type}: '"+A.type+"'. This type already exists.");return false;}}var C,u={};for(C in A){if(C!=="type"){u[C]=A[C];}}w.__vars._config.feeds[A.type]=u;r(y,A.type);if(A.refresh){b(w,A.type,u);}};s.prototype.removeFeed=function(z){var y=this,u=y.__vars.root,w=u.__vars,C=(u.__vars._config&&u.__vars._config.feeds)?true:false;if(!C||typeof z!=="string"){return false;}var B=function(D){if(!u.__vars._config.feeds[D]){return false;}u.__vars._config.feeds[D]=null;u.__vars._initExe[D]=null;u.__vars._callStack[D]=null;u.__vars._refreshObj[D]=null;try{delete u.__vars._config.feeds[D];delete u.__vars._initExe[D];delete u.__vars._callStack[D];delete u.__vars._refreshObj[D];}catch(v){}w._fn.log(q.logName+" Notice: Feed removed for {type}: '"+D+"'");};z=(a(z)).replace(/\s+/g," ");var t=[],A=z.split(" ");};s.prototype.onLoad=function(){var y=this,u=y.__vars.root,w=u.__vars,t=(w._config&&w._config.feeds)?w._config.feeds:{},z=c(arguments);if(!z.type||!z.callback||!t[z.type]){return false;}var A=z.type,B=z.callback;if(!w._callStack[A]){w._callStack[A]=[];}w._callStack[A].push(B);if(w._initExe[A]){B(w._data[A]);}};s.prototype.getData=function(){var E=this,A=E.__vars.root,C=A.__vars,F=(C._config&&C._config.feeds)?C._config.feeds:{},w=c(arguments);if(!w.type||!w.callback){return false;}var y=w.type,D=w.callback;var B=0,z=20,t;var u=function(){if(typeof C._data[y]!=="undefined"){D(C._data[y]);}else{if(B<=z){clearTimeout(t);t=setTimeout(function(){u();},250);B++;}}};u();};return s;}());var b=function(s,u,v){var t=(!isNaN(v.refresh)&&parseFloat(v.refresh)>=q.minRefreshRate)?(v.refresh).toFixed(2):false;if(!t){j(q.logName+" Warning: Cannot set refresh for {type}: '"+u+"' refresh rate less than minimum rate allowed.");return false;}t=t*60000;clearInterval(s.__vars._refreshObj[u]);s.__vars._refreshObj[u]=setInterval(function(){if(s.event&&typeof s.event.reload==="function"){s.event.reload(u);}else{j(q.logName+" Warning: Cannot find event.reload(). Reload for {type}: '"+u+"' not fired.");}},t);};var r=function(v,y){var D=v._config.feeds,t=D[y]||false;if(!t){return false;}var s=(function(){var E=false;if(typeof t==="string"){E=t;}else{if(t.url){E=t.url;}}return E;}());if(!s){j(q.logName+" URL not defined for feed {type}: '"+y+"'");return false;}var A=(function(){var E="json",F=f(s);if(typeof t.jsonpCallback==="string"||F){E="jsonp";}else{if(t.type&&g(t.type)){E=t.type;}}E=E.toLowerCase();return E;}());var B={};switch(A){case"json":B={dataType:"json",cache:true,async:true,success:function(E){z(E);}};break;case"jsonp":var w=f(s),C=n(y,((typeof t.jsonpCallback==="string")?t.jsonpCallback:false),w);window[C.name]=function(E){z(E);};B={dataType:"script",async:true,cache:true};if(!w){B.data={};B.data[C.param]=C.name;}break;case"xml":break;case"script":break;case"text":break;}B.url=s;(function(){var E=(v._config.cacheTime&&!isNaN(v._config.cacheTime))?parseFloat(v._config.cacheTime):false;if(E){if(!B.data){B.data={};}B.data.cb=d(E);}}());if(A!=="jsonp"&&v._xhr[y]){try{if(typeof v._xhr[y].abort==="function"){v._xhr[y].abort();}}catch(u){}}v._xhr[y]=k.ajax(B);function z(F){var E=p(t.normalize,D),G=(E)?E(F):F;v._data[y]=G;if(!v._initExe[y]){v._initExe[y]=true;}l(v._callStack[y],v._data[y]);}};var l=function(t,u){if(!m(t)){return false;}for(var s=0;s<t.length;s++){if(typeof t[s]==="function"){t[s](u);}}};var c=function(t){var u=false,s=false;if(typeof t[0]==="string"){u=t[0];}else{if(typeof t[0]==="object"&&!m(t[0])){u=(t[0].type)?t[0].type:false;}}if(typeof t[1]==="function"){s=t[1];}var v={type:u,callback:s};return v;};var p=function(v,s){var u,t=false;if(typeof v==="function"){t=v;}else{if(typeof v==="string"){for(u in s){if(v===u&&typeof s[u].normalize==="function"){t=s[u].normalize;break;}}}}return t;};var n=function(u,v,t){var s={param:"callback"};if(v&&v.split("=").length===2){var w=v.split("=");s.param=w[0];s.name=w[1];}else{if(v){s.name=v;}else{if(t){s.name=t;}else{s.name="jsonp"+u;}}}return s;};var g=function(v){var s,t=false,u=["jsonp","json","xml","html","text","script"];for(s=0;s<u.length;s++){if(u[s]===v.toLowerCase()){t=true;break;}}};var f=function(v){var t,u=false,y=v.split("?"),w=y[1];if(w){var s=((w.toLowerCase()).indexOf(q.jsonpParam+"=")>-1)?w.split("&"):[];for(t=0;t<s.length;t++){var z=s[t].split("=");if(z[0].toLowerCase()===q.jsonpParam){u=decodeURI(z[1]);break;}}}return u;};var j=function(){var t=true;if(t&&window.console){try{return console.log.apply(console,arguments);}catch(s){console.log(arguments);}}};var d=function(v){v=v||false;var s=new Date(),w=s.getFullYear().toString()+(s.getMonth()+1).toString()+s.getDate().toString(),u=s.getHours()+1,t=s.getMinutes();w+=u.toString()+((v&&!isNaN(v))?(Math.floor(t/parseFloat(v))).toString():"");return w;};var m=function(s){s=s||false;return Object.prototype.toString.call(s)==="[object Array]";};var a=function(s){s=(s||"").replace(/^\s+|\s+$/g,"");return s;};return h;}(jQuery));var CallStackTrigger=(function(){var b=function(){this.__vars={};var c=this.__vars;c._stack={};c._trigger=false;c._data=null;};b.prototype.trigger=function(f,g){var d=this,c=d.__vars;c._trigger=f;c._data=(typeof g!=="undefined")?g:null;if(c._stack[f]){a(d,f);}};b.prototype.bind=function(g,h){var f=this,d=f.__vars,c=d._stack;if(typeof h!=="function"){return false;}if(!c[g]){c[g]=[];}c[g].push(h);if(g===d._trigger){if(d._data===null){h();}else{h(d._data);}}};var a=function(g,h){var f=g.__vars,d=f._stack,j=f._data;if(d[h]){var c=d[h];for(x=0;x<c.length;x++){if(typeof c[x]==="function"){c[x](j);}}}};return b;}());window.OutbrainWidgetConnector=(function(h){var a={OBVar:"OB_elements",src:"http://widgets.outbrain.com/outbrain.js",legacySrc:"http://widgets.outbrain.com/outbrainWidget.js"};var f=function(j){if(!j){return false;}this.addWidget(j);};f.prototype.addWidget=function(m,o){var j,k=this;if(!m){return false;}if(!window[a.OBVar]){window[a.OBVar]=[];}var l=d(m);for(j=0;j<l.length;j++){var n=l[j];if(n.addWidgetType&&n.addWidgetType==="data-widget"){}else{if(n.containerId){c(n.containerId);}window[a.OBVar].push(n);}}g(o);};f.prototype.refreshWidgets=function(j){if(!window.OBR){return;}j=j||window.location.href;try{OBR.extern.refreshWidget(j);}catch(k){}};f.prototype.addWidgetLegacy=function(j,k){j=(b(j))?j[0]:j;if(j.containerId){c(j.containerId);}window.OB_permalink=j.permalink;window.OB_widgetId=j.widgetId;window.OB_Template=j.Template;window.OB_langJS=j.langJS;window.OB_isLateStarter=true;g(k,true);};var g=function(n,j){n=(typeof n==="function")?n:function(){};if(window.OB_Script&&window.OutbrainStart){try{window.OutbrainStart();n();}catch(m){log("[Outbrain.Connector] Error: "+m);}}else{var l=document.getElementsByTagName("script")[0],k=document.createElement("script");k.type="text/javascript";k.onreadystatechange=k.onload=function(){window.OB_Script=true;n();};k.async=true;k.src=(j)?a.legacySrc:a.src;l.parentNode.insertBefore(k,l);}};var c=function(j){h("#"+j).addClass("OBR");};var d=function(j){if(j&&!b(j)){j=[j];}return j;};var b=function(j){j=j||false;return Object.prototype.toString.call(j)==="[object Array]";};return f;}(jQuery));var DateTime=(function(){var a=function(c,g){g=g||null;var f;var d={month:c.getUTCMonth(),day:c.getDay(),year:c.getFullYear(),date:c.getDate(),hour:c.getHours(),minutes:c.getMinutes(),seconds:c.getSeconds(),ampm:((c.getHours()<12)?"am":"pm"),fullStr:c.toString()};var m=function(q){q=q||"";q=q.toString();if(q.length<1){return q;}var o="",p=parseInt(q.charAt(q.length-1),10);switch(p){case 1:o="st";break;case 2:o="nd";break;case 3:o="rd";break;default:o="th";break;}return(q+o);};var k=function(r,p){p=p||"full";var q=["January","February","March","April","May","June","July","August","September","October","November","December"],o=q[r]||"";if(p==="short"){o=o.slice(0,3);}return o;};var h=function(n){n=(!isNaN(n))?n:"";return n.toString();};var j=function(r,q){q=q||"full";var o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=o[r];if(q==="short"){p=p.slice(0,3);}return p;};var b={"${mm}":(d.month+1),"${month}":k(d.month),"${month:short}":k(d.month,"short"),"${day}":j(d.day),"${day:short}":j(d.day,"short"),"${yr}":d.year,"${yr:short}":h(d.year).substr(2),"${dd}":((d.date<10)?("0"+h(d.date)):h(d.date)),"${ddTH}":m(d.date),"${hr}":((d.hour>12)?d.hour-12:d.hour),"${hr:mil}":((d.hour<10)?("0"+h(d.hour)):h(d.hour)),"${min}":((d.minutes<10)?("0"+h(d.minutes)):h(d.minutes)),"${sec}":((d.seconds<10)?("0"+h(d.seconds)):h(d.seconds)),"${ampm}":d.ampm,"${AMPM}":(d.ampm).toUpperCase(),"${AmPm}":((d.ampm).charAt(0)).toUpperCase()+(d.ampm).charAt(1)};for(f in b){var l=g.indexOf(f);while(l!==-1){g=g.replace(f,b[f]);l=g.indexOf(f);}}return g;};return a;}());window.WatchNow=(function(j){var o={feeds:{FN:{"sched-tool":"http://www.foxnews.com/feeds/schedule/channel/foxnewscom-live/feed/json",playlist:"http://video.foxnews.com/v/feed/playlist/1621774019001.js?template=fox"},FB:{"sched-tool":"http://www.foxbusiness.com/feeds/watch/show-schedule/feed/json/",playlist:"http://video.foxbusiness.com/v/feed/playlist/87187.js?template=fox"}},imageDimension:[132,74]};var c=function(r){if(!window.MultiFeedParser||!window.AKAMAI_TIME_HELPER){return false;}var q=this;q.__vars={};var p=q.__vars;p.data={};r=(typeof r==="object"&&!j.isArray(r))?r:{};p._config=r;var u=o.feeds.FN;if(r.site==="foxbusiness"){u=o.feeds.FB;}var s=false;if(r.refresh&&!isNaN(r.refresh)){s=parseInt(r.refresh,10);}var t={};t.feeds={};t.logging=true;t.initOnLoad=true;if(s){t.cacheTime=s;}t.feeds.playlist={url:u.playlist,jsonpCallback:"FOX_WatchNowPlaylist",normalize:function(w){var v=w;if(w){v=b(r,w);}return v;}};t.feeds["sched-tool"]={url:u["sched-tool"],jsonpCallback:"FOX_WatchNowSchedTool",normalize:function(y){var v=y,w=(r.fullSchedule)?true:false;if(y){v=k(r,y,w);}return v;}};p._parser=new MultiFeedParser(t);};c.prototype.getData=function(p){var r=this,q=r.__vars;if(typeof p!=="function"){return false;}q._parser.event.onLoad("sched-tool",function(s){q.data["sched-tool"]=s;q._parser.event.getData("playlist",function(t){q.data.playlist=t;var u=a(s,t);p(u);});});};c.prototype.getScheduleFeed=function(p){var r=this,q=r.__vars;if(typeof p!=="function"){return false;}q._parser.event.onLoad("sched-tool",function(s){q.data["sched-tool"]=s;p(s);});};c.prototype.getPlaylistFeed=function(p){var r=this,q=r.__vars;if(typeof p!=="function"){return false;}q._parser.event.onLoad("playlist",function(s){q.data.playlist=s;p(s);});};var a=function(s,u){var r=999,q=(u.length>r)?r:u.length,p=[];if(s){q--;p.push(s);}var t=0,v=[];while(t<u.length){if(u[t]&&u[t].isLive){v.push(u[t]);u.splice(t,1);}else{t+=1;}}u.reverse();v.reverse();u=u.concat(v);u.reverse();for(x=0;x<q;x+=1){p.push(u[x]);}return p;};var b=function(q,r){var p=(r&&r.channel&&r.channel.item)?r.channel.item:false;if(!p){return false;}p=((!j.isArray(p))?[p]:p);var w,t=[],u=p.length,s=(q.imageDimension)?q.imageDimension:o.imageDimension;var v=function(B){var z=false;if(B){B=(!j.isArray(B))?[B]:B;for(var A=0;A<B.length;A+=1){if(B[A].indexOf("live_stream")>-1){z=true;break;}}}return z;};var y=function(A){var z=l(A["media-group"]["media-thumbnail"]["@attributes"].url,s);var B={isLive:v(A.category),title:A.title,link:A.link,guid:A.guid,img:z,raw:A};return B;};for(w=0;w<u;w+=1){t.push(y(p[w]));}return t;};var k=function(q,s,v){var B,w,u=[],r=[],A=false,y=s.day,C=window.AKAMAI_TIME_HELPER.getCurrent();var z=function(F,D,E){E=E||false;r.push({current:E,show:F,index:D});};var t=function(F){var G,E=F.show||[];E=(j.isArray(E))?E:[E];for(G=0;G<E.length;G+=1){var D=E[G];D.start=h(D.start);D.end=h(D.end);D.description=(typeof D.description!=="string")?"":j(D.description).text();D.showImg=(function(L,K){L=(typeof L==="string")?j.trim(L):"";var J="http://global.fncstatic.com/static/v/all/img/clear.gif",M=(q.imageDimension)?q.imageDimension:o.imageDimension;if(K){J=n(K,M);}else{if(L.length>0){var H="http://global.fncstatic.com";if(q.imagePattern){var I=q.imagePattern;I=I.replace("${machineTitle}",L);H+=I;}else{H+="/static/p/live.foxnews.com/img/schedule/144x81-live-"+L+".jpg";}J=n(H,M);}}return J;}(D["machine-title"],D.image));u.push(D);D.start_early=new Date(D.start.getTime()-(60000*5));if(!A&&D.start_early<=C&&D.end>=C){r=[];z(D,(u.length-1),true);A=true;}else{if(r.length<3&&A){z(D,(u.length-1));}else{if(r.length<3&&D.start>=C){z(D,(u.length-1));}}}}};for(B=0;B<y.length;B+=1){t(y[B]);}w={latest:r,normalized:u,raw:s};var p={},r=(w&&w.latest[0]&&w.latest[0].current)?w.latest[0].show:false;if(r){p={title:r.title,img:r.showImg,isLive:true,link:r.link,guid:r["machine-title"],webShow:true,raw:r,rawDump:w};w=p;}else{if(v){p={rawDump:w};w=p;}else{w=r;}}return w;};var l=function(s,u){if(!u){return s;}var r=s.split("/"),q=r.length,t=r[q-3],p=r[q-2];r[q-3]=(!isNaN(t))?u[0]:t;r[q-2]=(!isNaN(p))?u[1]:p;return r.join("/");};var n=function(s,t){if(!t){return s;}var v="http://a57.foxnews.com/",u=s.replace("http://",""),q=u.split("/"),p=q.length;q[p-1]=t.join("/")+"/"+q[p-1];var r=v+q.join("/");return r;};var d=function(t,p){t=new Date(t);p=new Date(p);var s=[],r=DateTime(t,"${hr}:${min}"),q=DateTime(p,"${hr}:${min} ${ampm}");s=[r,q].join(" - ");return s;};var h=function(t){var q,r=t.split("T"),p=r[0],s=r[1].split("-")[0];p=p.split("-");p=[p[1],p[2],p[0]].join("/");q=new Date([p,s].join(" "));return q;};var g=function(t){t=new Date(t);if(Object.prototype.toString.call(t)==="[object Date]"&&!isNaN(t.getTime())){var p=t.getDay(),r=t.getHours(),q=t.getMinutes(),s=(r*100)+q;return(p===3&&s>=1500&&s<=1930)?true:false;}else{return false;}};var m=function(u){u=new Date(u);var q=false;if(Object.prototype.toString.call(u)==="[object Date]"&&!isNaN(u.getTime())){var p=u.getDay(),s=u.getHours(),r=u.getMinutes(),t=(s*100)+r;if(p>=1&&p<=5&&t>=2000&&t<=2359){q=true;}else{if(p>=2&&p<=6&&t===0){q=true;}}}else{q=false;}return q;};var f=function(p){if(typeof window.console==="object"&&console.log){console.log(p);}};return c;}(jQuery));if(typeof JSON!=="object"){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());(function(){var v,t,u,w;function s(){var c=this;this.pageReady=function(){var f=c._PRStack||!1;if(!d.isArray(f)){return !1;}C(f)();delete c._PRStack;v=!0;};this.site=new a(this);this.utils=new B(this);this.addUtil=function(f,g){c.utils.Add(f,g);};}function r(p,q,n){function f(g){var g=g||"",c=0<g.length?-1<t.indexOf(g)?!0:!1:!1;c&&A("[AddConstructor] Error: Reserved word '"+g+"'");return c;}q=d.trimStr(q);if(-1<q.indexOf(".")){for(var q="."===q.charAt(0)?q.slice(1,q.length):q,o=q.split("."),j=o.length,m=0;m<j;m++){var l=o[m];if(0===m&&f(l)){return !1;}p[l]||(p[l]=m!==j-1?{}:"function"!==typeof n?{}:n);p=p[l];}}else{if(0<q.length&&!p[q]){if(f(q)){return !1;}p[q]="function"!==typeof n?{}:n;}else{if(p[q]){return A("[AddConstructor] Warning: Constructor already exists (constructor:"+q+"). Ignoring another instantiation."),!1;}if(f(q)){return !1;}}p=p[q];}if("object"===typeof n&&!d.isArray(n)){for(var k in n){p[k]&&A("[AddConstructor] Warning: Overwriting '"+k+"' "+typeof p[k]+". (constructor:"+q+" )"),p[k]=n[k];}}return p;}function a(c){var f=this;this.Add=function(g,h){return r(f,g,h);};this.OnPageReady=(new b(f,c)).callback;this.OnDocReady=(new y(f,c)).callback;}function B(){var c=this;this.Add=function(f,g){return r(c,f,g);};}function b(c,f){this.callback=function(){var h=arguments,j=1===h.length?"":h[0],g=1===h.length?h[0]:h[1],g=(h=0<j.length?!0:!1)?c.Add(j,g):g;v?z(g):(f._PRStack||(f._PRStack=[]),f._PRStack.push({n:!h?"GEN":j,t:g}));};}function y(c,f){this.callback=function(){var j=arguments,g=1===j.length?"":j[0],h=1===j.length?j[0]:j[1],h=(j=0<g.length?!0:!1)?c.Add(g,h):h;u?z(h):(f._DRStack||(f._DRStack=[]),f._DRStack.push({n:!j?"GEN":g,t:h}),w||(w=!0,DomReady.ready(function(){var k=f._DRStack||!1;if(!d.isArray(k)){return !1;}C(k)();delete f._DRStack;u=!0;})));};}function z(c,f){var f="function"===typeof f?f:!1,g=function(){};"function"===typeof c?g=function(){f&&f();c();}:c&&"function"===typeof c.init&&(g=function(){f&&f();c.init();});if(f){return g;}g();}function C(g){for(var h=0,l=g.length,m=[],j=function(){};h<=l;){var k=g[h];k&&"GEN"===k.n?(m.push(k),g.splice(h,1),l=g.length):h++;}m=m.concat(g);l=m.length;for(g=0;g<l;g++){j=z(m[g].t,j);}return j;}function A(c){window.console&&console.log&&console.log(c);}t="Add|OnPageReady|OnDocReady";v=void 0;u=void 0;w=void 0;s.prototype={newInstance:function(){return new s;}};var d={isArray:function(c){return"[object Array]"===Object.prototype.toString.call(c||!1);},trimStr:function(c){return !c?"":c.toString().replace(/^\s+/,"").replace(/\s+$/,"");}};window._$tartup=window.$tartup=new s;})();(function(){var r,f,o;function s(){if(!t&&(t=!0,u)){for(var g=0;g<u.length;g++){u[g].call(window,[]);}u=[];}}function d(h){var g=window.onload;window.onload="function"!=typeof window.onload?h:function(){g&&g();h();};}function c(){if(!b){b=!0;document.addEventListener&&!r&&document.addEventListener("DOMContentLoaded",s,!1);f&&window==top&&function(){if(!t){try{document.documentElement.doScroll("left");}catch(h){setTimeout(arguments.callee,0);return;}s();}}();r&&document.addEventListener("DOMContentLoaded",function(){if(!t){for(var h=0;h<document.styleSheets.length;h++){if(document.styleSheets[h].disabled){setTimeout(arguments.callee,0);return;}}s();}},!1);if(o){var g;(function(){if(!t){if("loaded"!=document.readyState&&"complete"!=document.readyState){setTimeout(arguments.callee,0);}else{if(void 0===g){for(var j=document.getElementsByTagName("link"),h=0;h<j.length;h++){"stylesheet"==j[h].getAttribute("rel")&&g++;}j=document.getElementsByTagName("style");g+=j.length;}document.styleSheets.length!=g?setTimeout(arguments.callee,0):s();}}})();}d(s);}}var a=window.DomReady={},v=navigator.userAgent.toLowerCase();v.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/);o=/webkit/.test(v);r=/opera/.test(v);f=/msie/.test(v)&&!/opera/.test(v);/mozilla/.test(v)&&/(compatible|webkit)/.test(v);var b=!1,t=!1,u=[];a.ready=function(g){c();t?g.call(window,[]):u.push(function(){return g.call(window,[]);});};c();})();var DateTime=function(){return function(B,A){var A=A||null,w,z=B.getUTCMonth(),v=B.getDay(),q=B.getFullYear(),u=B.getDate(),y=B.getHours(),s=B.getMinutes(),r=B.getSeconds(),t=12>B.getHours()?"am":"pm",p=function(d,f){var g="January,February,March,April,May,June,July,August,September,October,November,December".split(",")[d]||"";"short"===(f||"full")&&(g=g.slice(0,3));return g;},C=function(a){a=!isNaN(a)?a:"";return a.toString();},b=function(d,g){var f="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(",")[d];"short"===(g||"full")&&(f=f.slice(0,3));return f;},z={"${mm}":z+1,"${month}":p(z),"${month:short}":p(z,"short"),"${day}":b(v),"${day:short}":b(v,"short"),"${yr}":q,"${yr:short}":C(q).substr(2),"${dd}":10>u?"0"+C(u):C(u),"${ddTH}":function(c){c=(c||"").toString();if(1>c.length){return c;}var d="";switch(parseInt(c.charAt(c.length-1),10)){case 1:d="st";break;case 2:d="nd";break;case 3:d="rd";break;default:d="th";}return c+d;}(u),"${hr}":12<y?y-12:y,"${hr:mil}":10>y?"0"+C(y):C(y),"${min}":10>s?"0"+C(s):C(s),"${sec}":10>r?"0"+C(r):C(r),"${ampm}":t,"${AMPM}":t.toUpperCase(),"${AmPm}":t.charAt(0).toUpperCase()+t.charAt(1)};for(w in z){for(v=A.indexOf(w);-1!==v;){A=A.replace(w,z[w]),v=A.indexOf(w);}}return A;};}();(function(){if(!window.console){window.console={log:function(){}};}}());(function($){window.FOX_DomainPath=(function(){var ret="",loc=window.location,host=loc.hostname,qStr=loc.search;var idx=function(val){return(host.indexOf(val)>-1)?true:false;};if(qStr.length>2){var x,arr=qStr.slice(1).split("&"),len=arr.length,env=false;for(x=0;x<len;x+=1){var pair=arr[x].split("=");if(pair[0]==="apath"){env=pair[1];break;}}switch(env){case"qa":ret="http://qa.global.fncstatic.com";break;default:ret="http://global.fncstatic.com";}}else{ret="http://global.fncstatic.com";}return ret;}());window.FOX_metadescriptor=(function(){var obj={};$("meta").each(function(){var item=$(this),nameAttr=item.attr("name"),propAttr=item.attr("property"),val=item.attr("content");if(nameAttr){if(!obj.name){obj.name={};}obj.name[nameAttr]=(val)?val:false;}else{if(propAttr){if(!obj.property){obj.property={};}obj.property[propAttr]=(val)?val:false;}}});return obj;}());window.FOX_HP=$tartup.newInstance();var Add=FOX_HP.addUtil;Add("mediaIconOverlay",{set:function(obj){var self=this;if(!obj){return false;}obj.type=(function(type){var ret=false;if(obj.elm.hasClass("video-ct")){ret="video";}else{if(obj.elm.hasClass("slideshow-ct")){ret="slideshow";}else{if(obj.elm.hasClass("interactive-ct")||obj.elm.hasClass("freeform-ct")){ret="interactive";}else{if(obj.elm.hasClass("magnify-ct")){ret="magnify";}}}}return(ret)?ret:type;}(obj.type||false));if(!obj.type){return false;}obj.elm.find("span.type").hide();obj.container=obj.elm;var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];self.setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){self.setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});},useAbsImg:function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;},setOverlay:function(obj){var FS=this,elm=obj.elm,path="",ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false,type=obj.type||"video";switch(type){case"slideshow":path="/static/v/all/img/ss-overlay_${dim}.png";break;case"interactive":path="/static/v/all/img/ia-overlay_${dim}.png";break;case"magnify":path="/static/v/all/img/mg-overlay_${dim}.png";break;default:path="/static/v/all/img/vd-overlay_${dim}.png";}function mFloor(val){return Math.floor(val);}function px(val){return val+"px";}function set(){var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=0.03,edgeH=0.05;edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&FS.useAbsImg(imgW)){imgW=FS.useAbsImg(imgW);imgH=imgW;absDim=imgW;}var overlaySrc=(function(){var dim,ret=(window.FOX_DomainPath||"")+path;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?dim:"";return ret.replace("${dim}",dim);}());var hoverImg=new Image();hoverImg.src=overlaySrc;css.width=px(imgW);css.minHeight=px(imgH);css.background='url("'+overlaySrc+'") no-repeat 0px 0px';var overlay=$('<div class="media-overlay" style="position:absolute;"></div>'),titleLink=elm.parent().find("> h3:first");overlay.css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false;parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".media-overlay");function hoverOver(over){if(over&&!isHover){isHover=true;overlayElm.css("background-position","0px "+px("-"+imgH));}else{if(isHover){isHover=false;overlayElm.css("background-position","0px 0px");}}}if(parent.parent().find("> .credit").size()>0){overlayElm.css({bottom:"21px"});}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});}set();}});Add("extLink",{set:function(elm,customLink,validate){elm=elm||$("a[rel*='external']");var self=this,linked="ext-linked";elm.each(function(){var a=$(this),rel=$.trim(a.attr("rel")||""),href=(customLink&&typeof customLink==="string")?customLink:($.trim(a.attr("href")||"")),isValid=(validate)?(!self.confirmLink(href)):true;if((rel.toLowerCase()).indexOf(linked)<0&&href.length>0&&href!=="#"&&isValid){rel=(rel.indexOf("external")>-1)?rel:[rel,"external"].join(" ");rel=$.trim([rel,linked].join(" "));a.attr("rel",rel);a.click(function(){window.open(href,"_blank");return false;});if(!a.attr("target")){a.attr("target","_blank");}}});},confirmLink:function(val){var x,ret=false,valid=[".foxnews.com",".foxbusiness.com"];for(x=0;x<valid.length;x+=1){if(val.indexOf(valid[x])>-1){ret=true;break;}}return ret;}});Add("setImageResizer",function(url,dim){if(!dim){return url;}var resizerDomain="http://a57.foxnews.com/",src=url.replace("http://",""),arr=src.split("/"),len=arr.length;arr[len-1]=dim.join("/")+"/"+arr[len-1];var resized=resizerDomain+arr.join("/");return resized;});Add("getQueryStr",function(param){var x,val=false,query=window.location.search.substr(1),qArr=query.split("&"),len=qArr.length;for(x=0;x<len;x++){var pair=qArr[x].split("=");if(pair[0]===param){val=(pair.slice(1)).join("=")||"";val=(decodeURIComponent(val)).toString();break;}}return val;});}(jQuery));window.videoPlayerScript=function(h,c,f,b,a){h=h||"";c=c||"";f=f||"";b=b||"/";a=a||false;var d=function(j){return j.toLowerCase().replace(/ /g,"-").replace(/[^-a-zA-Z0-9]/g,"");};if(h.length>0){var g=[];g.push("http://video.foxnews.com"+b+h);if(f.length>0){g.push("/"+d(f));}if(c.length>0){g.push("/?playlist_id="+c);}if(a){window.open(g.join(""),"_blank");}else{window.location=g.join("");}}};window.videoPlayer=function(j,d,s,o,c,t,p,m){var g="";var l="";var c=c.replace(/'/g,"&#39;");var p=(typeof p==="undefined")?"":p.replace(/'/g,"&#39;");var m=(typeof m==="undefined")?180:m;if(!o||o==""){o="acc";}if(s==="Campaign_Carl"||s==="5_-_You_Decide"){o="elec";}if(g==""){g="resize05.html";}l=j.split("_::_");var n=(l[0]==="liveSiteStream"&&l[2]==="chat")?700:325;var f=(screen.width>1000&&!$.browser.opera)?"exp":"col";var k=[];k.push(j).push(escape(s)).push(escape(d)).push(escape(o)).push(escape(c)).push(t).push(escape(p)).push(m).push(f);var b=fnDomain+"/video2/"+g+"?"+k.join("&");var r=((screen.width-700)/2)-5;var a="height="+n+",width=700,top=5,left="+r;var q=window.open(b,"fncVidPlayer",a);if(q){q.focus();}};window.foxGrabPlayer=function(d,b,c){var a="/v/";videoPlayerScript(d,b,c,a,true);return false;};window.foxVideoPlayer=function(c,a,b){videoPlayerScript(c,a,b);return false;};window.videoMPlayer=function(b,a){videoPlayerScript(b,a);return false;};window.siteStreamFlashPlayer=function(b,a){var o=typeof(b)=="undefined"?1:b;var k=typeof(a)=="undefined"?"foxnews":a;var m=850;var g=506;var c=(screen.width-m)/2;var l=(screen.height-g)/2;var f="height="+g+",width="+m+",top="+l+",left="+c+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no";var j=window.open("http://interactive."+k+".com/livestream/live.html?chanId="+o+"&openAIR=true","livePlayer",f);j.focus();};window.siteStreamLivePlayer=function(c,a){var b="http://live.foxnews.com/#/"+c;window.open(b,"_blank");};window.siteStreamPlayer=function(b,a){if(typeof b==="undefined"){liveFile="liveSiteStream";}else{liveFile="liveSiteStream_::_"+b+"_::_"+a;}videoPlayer(liveFile,"Live%20Stream","Live_Site_Stream","acc","Live%20Stream","-1","News",180);};window.setDefault=function(){};window.clearDefault=function(){};(function(f){var d=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1020";(function(){var u=function(z){z=z||false;var v=new Date(),A=v.getFullYear().toString()+(v.getMonth()+1).toString()+v.getDate().toString(),y=v.getHours()+1,w=v.getMinutes();A+=y.toString()+((z&&!isNaN(z))?(Math.floor(w/parseInt(z,10))).toString():"");return A;};document.write('<script type="text/javascript" src="'+window.location.protocol+"//global.fncstatic.com/static/v/all/js/geo.js?cb="+u(1)+'"><\/script>');}());f(document).ready(function(){window.FOX_metadescriptor=(function(){var u={};f("meta").each(function(){var y=f(this),v=y.attr("name"),w=y.attr("property"),z=y.attr("content");if(v){if(!u.name){u.name={};}u.name[v]=(z)?z:false;}else{if(w){if(!u.property){u.property={};}u.property[w]=(z)?z:false;}}});return u;}());});var s=(function(){var v="fn",y=window.location,w=y.host||y.hostname;var u=function(z){return(w.indexOf(z)>-1)?true:false;};if(u("foxnews.com")){if(u("latino.foxnews.com")){v="fn-latino";}else{v="fn";}}else{if(u("foxbusiness.com")){if(u("smallbusiness.foxbusiness.com")){v="sbc";}else{v="fb";}}}return v;}());var r={feed:{whatsHotLive:{feedFunction:"FeedSource_WhatsHotWatchLive",url:"http://www.foxnews.com/js/whatshot.js",rotate:3,show:{hot:false,live:2},fade:{use:true,delay:900}},onAir:{feedFunction:"FeedSource_FNCTV",url:"http://www.foxnews.com/js/onair.js",descCharLimit:35,imageDomainLoc:""},onAirCarousel:{feedFunction:"FOX_FN_OnAir_Data",url:"http://global.fncstatic.com/static/managed/json/onair-feed-data.js"}},onAir:{hideDelay:200},authentication:{use:"render",domain:"foxnews.com",check:"/authentication/registration/validate/"}};window.FOX_Auth_Use_Janrain=(function(){var u=true;u=(window.location.search.indexOf("_authj=n")>-1)?false:u;return u;}());var b=function(){this.headObj={};};b.prototype={init:function(w){var u=this;if(f("body").data("HasHeaderInit")){return false;}f("body").data("HasHeaderInit",true);var y;for(y in w){if(w.hasOwnProperty(y)){this["_"+y]=w[y];}}this.setHolders();var v=function(){var A=false;A=("createTouch" in document)?true:false;A=(!A&&navigator.userAgent.match(/BlackBerry/i))?true:A;return A;};var z=function(){var A=v(),B=f.cookie("FNMT8431"),C=window.location.hash;if(B){return true;}else{if(A&&!B&&C.indexOf("#?fxM")>-1){f.cookie("FNMT8431","8431",{path:"/"});return true;}else{if(!A){return true;}else{return false;}}}};if(!window.FOX_Auth_Use_Janrain||!window.AuthenticationService_Janrain){window.FOX_Auth_Use_Janrain=false;if(v()){f("#account").css("visibility","hidden");}else{f("#account").css("visibility","visible");this.authentication=new t(this);}}else{f("#account").css("visibility","visible");this.authentication=new k(this);}this.feeds=new q(this);this.onAir=new l(this);switch(s){case"fn":u.whatsHot=new m(this);break;case"fb":u.whatsHot=new h(this);break;}this.searchAutocomplete=new a(this);},setHolders:function(){this.headObj={headlines:f("#headlines-primary"),primaryNav:f("#nav-primary"),onAir:f("#section-head .slide.slide-1"),authentication:f("#account")};this.setListeners();},setListeners:function(){var u=function(B){var z=false,y=B.split("/")[2]||false,A=window.location.hostname||window.location.host;if(y&&y.length>1){y=y.replace("www.","");if(A.indexOf(y)>-1){z=true;}}return z;};var v=f("#util dl dd");var w=function(){v.find("> a").removeClass("active");};v.each(function(){var A=f(this),y=A.find("> a"),z=y.attr("href");if(u(z)){w();y.addClass("active");}});}};var t=(function(){var u=function(v){this.root=v;this.set();};u.prototype={set:function(){var y=this,w=this.root;if(w.headObj.authentication.size()===0){return false;}function v(){var D=document.location.hostname,C=D.split("."),A=C.length,B=C[A-2]+"."+C[A-1];r.authentication.domain=B;}function z(){v();if(typeof y[r.authentication.use]==="function"){y[r.authentication.use]();}else{y.render();}}if(typeof AuthService!=="undefined"){z();}else{f(document).ready(function(){if(typeof AuthService!=="undefined"){z();}else{j("[head.authentication] Authentication Service not found.");}});}this.setHolders();},setHolders:function(){var v=this.root.helper.getQueryStr("usr");if(v){f(".login-fields > .field > input[name='userName']").attr("value",v);}},render:function(){var B=this.root,z=B.headObj.authentication,y=(z.hasClass("alt-style"))?true:false,D=false,w=false;z.show();if(!y){D=z.find(".user-options > p:first");w=z.find("> .username > .encapsulate");var v=z.find("> .username"),E=f("body");w.hover(function(){f(this).addClass("hover");},function(){f(this).removeClass("hover");});w.click(function(){if(z.hasClass("active")){z.addClass("inactive").removeClass("active");}else{z.addClass("active").removeClass("inactive");}});v.hover(function(){window.FXAuthClickIsOver=true;},function(){if(window.FXAuthClickIsOver){window.FXAuthClickIsOver=false;}});if(!E.data("FXAuthClick")){E.data("FXAuthClick",true);E.mousedown(function(){if(!window.FXAuthClickIsOver&&z.hasClass("active")){z.removeClass("active").addClass("inactive");}});}}else{z=f("#authentication").parent();D=z.find(".username");}function A(H){H=H||"Profile";var F="",G="";if(r.authentication.domain!=="foxnews.com"){F=' target="_blank"';if(typeof f.cookie!=="undefined"&&f.cookie("p_DN")){G="?usr="+f.cookie("p_DN");}}return"<a"+F+' href="http://www.foxnews.com/community/user/profile'+G+'">'+H+"</a>";}var C=window.authentication_service=new AuthService({domain:r.authentication.domain});C.extend({createLoginLogout:function(J){var G=this,I=[],H=z.find("#authentication");if(G.isLoggedIn()){if(y){H=H.children(":first");H.each(function(){if(!G.isThirdParty()){f(this).html(A());}else{f(this).css({display:"none"});}});H.next().each(function(){var K=f('<a href="#">Log Out</a>');K.click(function(){try{G.logout(G.domain);}catch(L){j("[head.authentication] Logout - An error occured: "+L);}return false;});f(this).html(K);});D.html('<img src="http://global.fncstatic.com/static/v/all/img/head/profile.png" alt="" /> Welcome, <strong>'+G.getDisplayName()+"</strong>");D.css({display:"inline"});}else{H=z.find(".user-options > ul").children(":first");H.each(function(){if(!G.isThirdParty()){f(this).html(A(f(this).text()));}else{H.css({display:"none"});}});H.next().find("a").click(function(){try{G.logout(G.domain);}catch(K){j("[head.authentication] Logout - An error occured: "+K);}return false;});z.addClass("inactive");var F=(function(){var M=G.getDisplayName(),L=M,N="",K="<span${title}>${name}</span>";if(M.length>13){L=M.slice(0,13)+"...";N=' title="'+M+'"';}return K.replace("${title}",N).replace("${name}",L);}());D.html("You're logged in as "+F);}}else{H.children().find("a").each(function(){var K=f(this),L=K.text().toLowerCase();if(L.indexOf("register")>-1){K.click(function(){try{G.registrationOverlay(G.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(M){j("[head.authentication] Register - An error occured: "+M);}return false;});}else{if(L.indexOf("login")>-1){K.click(function(){try{G.providerOverlay(G.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(M){j("[head.authentication] Login - An error occured: "+M);}return false;});}}});if(y){H.css({display:"inline"});}else{D.html("Please login.");}}},onSuccessLogin:function(){var F=this;F.createLoginLogout();F.closeOverlay("login-provider");},callback:function(F){var G=this,H=G.createObjFromJSON(F);if(H.authentication.status==="ok"){if(G.thirdPartyAPI){G.thirdPartyAPI.disqus.login(H,function(){G.thirdPartyAPI.idms.login(H,function(){G.thirdPartyAPI.fileMobile.login(H,function(){window.FOX_TP_Reload=setTimeout(function(){window.location.reload();},1000);});});});}}G.closeOverlay("login-provider");}});C.init();C.createLoginLogout();}};return u;}());var k=(function(){var u=function(v){this.root=v;this.set();};u.prototype={set:function(){if(window.AuthenticationService_Janrain){f("p.login-link").hide();var v=window.authentication_service_v3=new AuthenticationService_Janrain();}else{j("[head.Authentication] Fatal Error: Janrain service not found.");}}};return u;}());var l=(function(){var u=function(v){this.root=v;f(".section-head > .slide.slide-1").hide();this.set();};u.prototype={set:function(){var w=this,v=this.root;window[r.feed.onAir.feedFunction]=function(y){w.renderOnAirNow(y);};v.feeds.onAir();},renderOnAirNow:function(R){var F=this,N=this.root,C=R.schedules.today,z=R.schedules.tomorrow,G=f("#show-data"),O=G.children("ul:first");if(G.size()===0){return false;}function K(S){S=f.trim(S);return(S.split(":"))[0]+S.charAt(S.length-2)+"<span>et</span>";}function I(T){var S=r.feed.onAir.descCharLimit;return(T.length>S)?T.substring(0,S)+"...":T;}function w(V,W){W=W||false;var Y,Z=[],U=(W)?V:V+1,S=f("#section-head").hasClass("fn"),X=0;var aa=function(ab){X++;if(S){Z.push("<li"+((X===1)?' class="first"':"")+">");Z.push('<p class="media"><a href="'+ab.link+'"><img src="'+r.feed.onAir.imageDomainLoc+ab.img+'" alt="" /></a></p>');Z.push('<p class="time">'+K(ab.time)+"</p>");Z.push('<div class="info">');Z.push('<p class="summary"><a href="'+ab.link+'" title="'+ab.dek+'">'+ab.title+"</a></p>");Z.push('<p class="relation">'+I(ab.dek)+"</p>");if(X===1){Z.push('<a class="watch-now-link" href="http://watch.foxnews.com/"><img src="http://global.fncstatic.com/static/all/img/watch-icon.gif"></a>');}Z.push("</div>");Z.push("</li>");}else{Z.push("<li"+((X===1)?' class="first"':"")+">");Z.push('<p class="media"><a href="'+ab.link+'"><img src="'+r.feed.onAir.imageDomainLoc+ab.img+'" alt="" /></a></p>');Z.push('<div class="info">');Z.push('<p class="relation">'+ab.title+"</p>");Z.push('<p class="summary"><a href="'+ab.link+'" title="'+ab.dek+'">'+I(ab.dek)+"</a></p></div>");Z.push('<p class="time">'+K(ab.time)+"</p></li>");}};for(Y=V;Y<=U;Y++){var T=C[Y];aa(T);}if(W&&z[0]){aa(z[0]);}O.html(Z.join(""));}var J,M=new Date(R.now.date+" "+R.now.time),H=parseInt(M.getHours()+""+((M.getMinutes()<10)?"0"+M.getMinutes():M.getMinutes()),10);for(J=0;J<C.length;J++){var P=C[J],L=(C[J+1])?C[J+1]:false;try{var A=f.trim(P.time).toLowerCase();A=(A.charAt(A.indexOf("m")-2)!==" ")?A.replace("pm"," pm").replace("am"," am"):A;var D=new Date(R.now.date+" "+A),Q=parseInt(D.getHours()+""+((D.getMinutes()<10)?"0"+D.getMinutes():D.getMinutes()),10);if(L){var B=f.trim(L.time).toLowerCase();B=(B.charAt(B.indexOf("m")-2)!==" ")?B.replace("pm"," pm").replace("am"," am"):B;var y=new Date(R.now.date+" "+B),v=parseInt(y.getHours()+""+((y.getMinutes()<10)?"0"+y.getMinutes():y.getMinutes()),10);if(H>=Q&&H<v){w(J);break;}}else{w(J,true);break;}}catch(E){j("[head.onAir] Error: "+E);}}},renderOnAirCarousel:function(B,A){var w=this,v=this.root,y=B;var z=function(){var J=v.headObj.onAir.find("> .content > .slideshow");var F=[],E=y.length;for(var D=0;D<E;D++){var I=y[D],C=(D===0)?true:false,H=(D+1===E)?true:false,G=(C)?" section-first":(H)?" section-last":"";F.push('<li class="section'+G+'">');F.push('<p class="media"><a href="'+I.link+'"><img alt="'+I.title+'" pre-src="'+I.img+'" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></a></p>');F.push('<h3><a href="'+I.link+'">'+I.title+"</a></h3>");F.push('<p class="time"><span>'+I.day+"</span> "+I.time+"</p></li>");}J.html("<ul>"+F.join("")+"</ul>");};z();if(typeof A==="function"){A();}},carousel:function(){var w=this.root,y=w.headObj.onAir.children(".content");var v={elm:y,slide:"horizontal",scroll:5,speed:1200,show:5,rotate:false};function z(C){var A,B=[];for(A=1;A<=C.batch.max;A++){B.push('<li><a href="#">&nbsp;</a></li>');}return B.join("");}v.elm.each(function(C){var B=0,E=f(this);if(E.data("carousel_initialized")){return false;}var D=E.find("ol");var F={prev:E.find(".prev"),next:E.find(".next"),first:E.find(".first-page"),last:E.find(".last-page")};var A={auto:{set:false,speed:3000},slide:v.slide,scroll:v.scroll,show:v.show,speed:v.speed,rotate:v.rotate,eventCallback:function(G){if(G.event==="init"){B=G.batch.max;D.html(z(G));D.children(":first").addClass("active");E.data("carousel_initialized",true);}else{D.children().each(function(H){f(this).toggleClass("active",function(){return(H+1===G.batch.current)?true:false;});});}if(G.batch.current===1){F.prev.addClass("inactive-prev");F.first.addClass("inactive-first");}else{F.prev.removeClass("inactive-prev");F.first.removeClass("inactive-first");}if(G.batch.current===G.batch.max){F.next.addClass("inactive-next");F.last.addClass("inactive-last");}else{F.next.removeClass("inactive-next");F.last.removeClass("inactive-last");}},controlsCallback:function(G){D.children().find("a").each(function(H){f(this).click(function(){G.stopAutoScroll();G.scrollToBatch(H+1);return false;});});F.first.click(function(){G.stopAutoScroll();G.scrollToItem(1);return false;});F.prev.click(function(){G.stopAutoScroll();G.slide("prev");return false;});F.next.click(function(){G.stopAutoScroll();G.slide("next");return false;});F.last.click(function(){G.stopAutoScroll();G.scrollToItem(B);return false;});}};if(typeof f.fn.jfoxCarousel!=="undefined"){E.jfoxCarousel(A);}else{f(document).ready(function(){E.jfoxCarousel(A);});}});},setCarouselListeners:function(){var D=this.root,w=D.headObj.primaryNav,v=w.children("ul:first").children("li.on-air"),z=D.headObj.onAir,F=z.css("height").replace("px",""),y=r.onAir.hideDelay;var C={close:v.find("img").filter(function(){return(f(this).attr("src").indexOf("close.png")>-1)?true:false;}),open:v.find("img").filter(function(){return(f(this).attr("src").indexOf("plus.png")>-1)?true:false;})};function B(){var G=z.find(".slideshow > ul > li");G.each(function(){var I=f(this),K=I.find("> .media img"),J=K.attr("pre-src"),H=new Image();if(J&&!K.data("preloaded")){H.onload=function(){K.attr("src",J);};H.src=J;K.data("preloaded",true);}});}function A(){z.data("isRendering",true);z.data("hidden",true);z.animate({height:"0px",opacity:"0"},y,"swing",function(){z.css({display:"none"}).data("isRendering",false);});C.close.hide();C.open.show();v.removeClass("active");}function E(){if(!z.data("initToFirst")){z.data("initToFirst",true);z.find("p.controls > a.prev").click();}z.data("isRendering",true);z.data("hidden",false);z.css("display","block");z.animate({height:F,opacity:"1"},y,"swing",function(){z.data("isRendering",false);});C.close.show();C.open.hide();v.addClass("active");}C.close.hide();z.css({height:"0px",opacity:"0"}).data("hidden",true);v.find("a").click(function(){B();if(z.data("isRendering")){return false;}if(z.data("hidden")){E();}else{A();}return false;});}};return u;}());var m=(function(){var u=function(w){this.root=w;this.render=new v(this);this.set();};u.prototype={set:function(){var y=this,w=this.root;if(w.headObj.headlines.size()===0){return false;}window[r.feed.whatsHotLive.feedFunction]=function(z){y.render.set(z);};w.feeds.whatsHotLive();}};var v=function(w){this.main=this;this.root=w.root;};v.prototype={set:function(D){var z=this.root,y=z.headObj.headlines;var B=this.hot({title:"Full Coverage",feed:D.whatshot,len:r.feed.whatsHotLive.show.hot});var E=this.live({title:"Watch Live",feed:D.watchlive,len:r.feed.whatsHotLive.show.live});if(typeof D.whatshot!=="undefined"){if(D.whatshot.length===0){return false;}var A=f('<dl class="first"></dl>');A.append(B).children("dd:first").addClass("first");y.html(A);}if(typeof D.watchlive!=="undefined"){if(D.watchlive.length===0){return false;}var C=f("<dl></dl>");C.append(E).children("dd:first").addClass("first");y.append(C);var w=y.children("dl:nth-child(2)");if(D.watchlive.length>r.feed.whatsHotLive.show.live){this.rotate(w);}else{w.children("dd").css("display","inline");}}},hot:function(z){if(typeof z.feed==="undefined"){return false;}z.len=z.len||z.feed.length;var y,w=[];if(z.len>0){w.push("<dt>"+z.title+"</dt>");for(y=0;y<z.feed.length;y++){var B=z.feed[y],A=(y>=z.len)?' style="display:none;"':"";w.push("<dd"+A+'><a href="'+B.link+'">'+B.title+"</a></dd>");}}return f(w.join(""));},live:function(z){if(typeof z.feed==="undefined"){return false;}z.len=z.len||z.feed.length;var y,w=[];if(z.len>0){w.push("<dt>"+z.title+"</dt>");for(y=0;y<z.feed.length;y++){var B=z.feed[y],A=(y>=z.len)?' style="display:none;"':"";w.push("<dd"+A+'><a href="'+B.link+'">'+B.title+"</a></dd>");}}return f(w.join(""));},rotate:function(C){var D=C.children("dd"),E=C.children("dt:first"),y=D.size(),B=r.feed.whatsHotLive.fade;if(y===0){return false;}var w=r.feed.whatsHotLive.rotate*1000;if(B.use){w=w+B.delay;}var z=false;D.each(function(G){var H=f(this);H.addClass("first");H.css("display",(G===0)?"inline":"none");if(G===0){H.data("rotateNumber",G+1);}});if(!C.data("rotateNumber")){C.data("rotateNumber",1);}function A(H){H=H||false;var G=C.data("rotateNumber")+1;G=(G>y)?1:G;C.data("rotateNumber",G);D.each(function(I){var K=f(this),J=I+1;if(!B.use||H==="click"){K.css("display",(J===G)?"inline":"none");}else{if(J===G){K.fadeIn(B.delay);}else{K.hide();}}});}function F(){clearInterval(z);z=setInterval(function(){A();},w);}F();E.css("cursor","pointer").click(function(){A("click");});C.hover(function(){clearInterval(z);},function(){F();});}};return u;}());var h=(function(){var u=function(v){this.root=v;this.set();};u.prototype={set:function(){var v=this;f("#headlines .dv-list:first").each(function(){v.trigger(f(this));});},trigger:function(z){var v=this,y="fox_header_whatshot",w="http://global.fncstatic.com/static/all/generated/js/fb2-whatshot.js";window[y]=function(A){v.render(A,z);};(function(){var B=document,A=B.createElement("script");A.src=w;A.async=true;(B.getElementsByTagName("head")[0]||B.getElementsByTagName("body")[0]).appendChild(A);}());},render:function(B,C){if(!B&&!B.length){return false;}var y,w=[],v=B.length;w.push("<h2>What's Hot</h2><ul>");for(y=0;y<v;y++){var A=B[y],z=(y===0)?" dv-item-first":(y===v-1)?" dv-item-last":"";w.push('<li class="dv-item'+z+'">');w.push('<a href="'+A.link+'">'+A.title+"</a>");w.push("</li>");}w.push("</ul>");C.html(w.join(""));}};return u;}());var q=(function(){var u=function(v){this.root=v;};u.prototype={whatsHotLive:function(){this.get.append({url:r.feed.whatsHotLive.url});},onAir:function(){this.get.append({url:r.feed.onAir.url});},onAirCarousel:function(){this.get.append({url:r.feed.onAirCarousel.url});},get:{append:function(v){(function(){var w=document.createElement("script");w.src=v.url;w.async=true;f("head").get(0).appendChild(w);}());},json:function(v){f.ajax({type:"GET",url:v.url,data:v.query,success:function(w){if(v.callback){v.callback(w);}}});}}};return u;}());var a=(function(){var v=function(w){this.root=w;this.set();};v.prototype={set:function(){var w=this;switch(s){case"fb":u();break;}}};var u=function(){var w=f("form#searchArea");if(w.size()===0){w=f("#search-site").parent();}w.each(function(){var A=f(this);var y=A.find("input[type='text']");var B=A.find("input[type='image'],input[type='submit']");var z=y.attr("value");y.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var C=f(this);var D=(C.attr("value").length>0)?C.attr("value"):z;C.attr("value",D);}).focus(function(){var C=f(this);var D=(C.attr("value").indexOf(z)>-1)?"":C.attr("value");C.attr("value",D);});IDC_quoteComplete.init();});};return v;}());b.prototype.helper={getQueryStr:function(A){var y=(window.location.search).substr(1);if(y.length>0){var u,z=y.split("&"),v={};for(u=0;u<z.length;u++){var w=z[u].split("=");v[w[0]]=w[1];}return(v[A])?v[A]:false;}return false;}};var j=function(u){if(window.console&&window.console.log){console.log(u);}};var o={isIE:function(){return f.browser.msie;},animate:function(v,u){if(!this.isIE()){if(!u.speed){u.speed=300;}if(!u.type){u.type="swing";}v.animate(u.css,u.speed,u.type,function(){if(u.callback){u.callback();}});}else{v.css(u.css);v.css("opacity","");if(u.callback){u.callback();}}},hide:function(y,u){if(!y){return false;}var v,w={opacity:"0"};if(u.css){for(v in u.css){if(u.css.hasOwnProperty(v)){w[v]=u.css[v];}}}u.css=w;this.animate(y,u);},show:function(y,u){if(!y){return false;}var v,w={opacity:"1"};if(u.css){for(v in u.css){if(u.css.hasOwnProperty(v)){w[v]=u.css[v];}}}u.css=w;this.animate(y,u);}};var c=new b();(function(){var v=function(){f(document).ready(function(){c.init();});};try{if(window.FOX&&FOX.site&&typeof FOX.site.bottomInit==="function"){var u=FOX.site.bottomInit;FOX.site.bottomInit=function(){c.init();u();};}else{if(window.FOX_HP&&FOX_HP.site.OnPageReady){FOX_HP.site.OnPageReady(function(){c.init();});}else{v();}}}catch(w){v();}}());var p=window.siteStreamFlashPlayer=function(v,u){var F=(typeof v==="undefined")?1:v,C=(typeof u==="undefined")?"foxnews":u,E=850,A=506,y=(screen.width-E)/2,D=(screen.height-A)/2,z="height="+A+",width="+E+",top="+D+",left="+y+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",B=window.open("http://interactive."+C+".com/livestream/live.html?chanId="+F+"&openAIR=true","livePlayer",z);B.focus();};var g=window.siteStreamLivePlayer=function(w,u){var v="http://live.foxnews.com/#/"+w;window.open(v,"_blank");};var n=window.FOX_isMnt=function(){var u=false,w=window.CONST_Akamai_TIME||false;try{if(w.yr==="2011"&&w.mm==="11"&&(w.dd==="05"||w.dd==="06")){u=true;}else{if(w.yr==="2011"&&w.mm==="11"&&w.dd==="04"&&parseInt(w.hr,10)>=17){u=true;}}}catch(v){}return u;};}(jQuery));(function(a){a(document).ready(function(){var b=a("#section-footer a[rel*='external']");if(window.FOX&&FOX.utils&&FOX.utils.extLink){FOX.utils.extLink.set(b);}else{b.each(function(){var d=a(this),f=a.trim(d.attr("href")||""),c=a.trim(d.attr("rel")||"");if(f.length>0&&f!=="#"){c=(c.indexOf("external")>-1)?c:[c,"external"].join(" ");c=a.trim([c,"ext-linked"].join(" "));d.attr("rel",c);d.click(function(){window.open(f,"_blank");return false;});if(!d.attr("target")){d.attr("target","_blank");}}});}});}(jQuery));window.IDC_quoteComplete=(function(b){var a={index:-1,totalResults:0,results:false,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){b("."+a.resultsDiv).html("");a.results=false;a.index=-1;},init:function(){b(a.field).focus(function(){if(b(this).val()===a.defaultText){b(this).val("");}a.reset();});b(a.field).blur(function(d){if(b(this).val()===""){b(this).val(a.defaultText);}setTimeout(function(){a.reset();},500);});b(a.field).parents("form").submit(function(){if(a.index>-1){b(a.field).val(b("#search_drop_overlay ul li:eq("+a.index+") a span.ticker").text());}if(a.index>-1){a.action=a.quoteUrl;}a.action+=encodeURIComponent(b(a.field).val());if(a.index>-1){a.reset();}document.location=a.action;return false;});var c="FOX_IDC_QuoteResponse";window[c]=function(d){a.response(d);};b(a.field).keyup(function(d){if((d.keyCode>=65&&d.keyCode<=90)||(d.keyCode>=97&&d.keyCode<=122)||d.keyCode===8){a.index=-1;var f=b(a.field).val();b("."+a.resultsDiv).html("");if(f!==""){b.getJSON(a.url+"?q="+f+"&callback="+c+"&jsonp=?");a.results=true;}else{a.results=false;}}else{if(d.keyCode===40||d.keyCode===38){if(a.results){b("#search_drop_overlay ul li:eq("+a.index+")").removeClass("selected");b("#search_drop_overlay ul li a:eq("+a.index+")").removeClass("selected");if(d.keyCode===40){if(a.index<(a.totalResults-1)){a.index++;}else{a.index=0;}}else{if(a.index>0){a.index--;}else{a.index=a.totalResults-1;}}b("#search_drop_overlay ul li:eq("+a.index+")").addClass("selected");b("#search_drop_overlay ul li a:eq("+a.index+")").addClass("selected");}}else{if(d.keyCode===27){a.reset();}}}});b(a.field).parents("form").after('<div class="'+a.resultsDiv+'"></div>');},response:function(d){var c="";var f=b(a.field).val();if(d!==""){a.totalResults=b(d).size();c+="<ul>";b.each(d,function(k,o){var l=new RegExp(f,"i");var n=this.s.search(l);var g=this.n.search(l);var h=n>-1?this.s.replace(l,"<strong>"+this.s.slice(n,(n+f.length))+"</strong>"):this.s;var j=g>-1?this.n.replace(l,"<strong>"+this.n.slice(g,(g+f.length))+"</strong>"):this.n;var m=this.s;c+='<li><a href="'+a.quoteUrl+m+'"><span class="ticker">'+h+'</span><span class="corporation">'+j+"</span></a></li>";});c+="</ul>";}else{a.totalResults=0;c="<p>No suggestions available</p>";}b("."+a.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+c+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+a.action+f+'">Search for News &amp; Videos "<strong>'+f.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>');a.initMouseEvents();},initMouseEvents:function(){b("."+a.resultsDiv+" ul li").mouseover(function(){if(a.index>-1){b("."+a.resultsDiv+" ul li:eq("+a.index+")").removeClass("selected");}b(this).addClass("selected");});b("."+a.resultsDiv+" ul li").mouseout(function(){b(this).removeClass("selected");});b("."+a.resultsDiv+" ul li a").mouseover(function(){if(a.index>-1){b("."+a.resultsDiv+" ul li a:eq("+a.index+")").removeClass("selected");}b(this).addClass("selected");});b("."+a.resultsDiv+" ul li a").mouseout(function(){b(this).removeClass("selected");});}};return a;})(jQuery);(function($){var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};function WeatherService(namespace){this.namespace=namespace;var initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:false,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_HEALTH_CHECK:"http://www.foxnews.com/feeds/web/status/wsi/json/",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};var i;for(i in initVars){this[i]=initVars[i];}this.extService=new ExternalServices(this);}WeatherService.prototype={init:function(fn){var ws=this;ws.getCurrentLocation(function(data){ws.createWeatherLocationCookie(data);ws.renderWidget();if(typeof fn==="function"){fn();}});},getCurrentLocation:function(){var args=arguments,fn=false,compiled=false;if(args.length===0){return false;}else{if(args.length===1){fn=args[0];}else{compiled=(typeof args[0]==="boolean")?args[0]:false;fn=args[1];}}if(typeof fn!=="function"){return false;}var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}';var trigger=function(val){val=(compiled)?ws.createObjFromJSON(val):val;fn(val);};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);if(!weatherlocObj||!weatherlocObj.location||!weatherlocObj.location[0].loc_id){trigger(initData);}else{trigger(cookie);}}else{if(window.CONST_Akamai_GEO&&CONST_Akamai_GEO.countryCode==="US"){ws.getGeoLocation(function(data){trigger(data||initData);});}else{trigger(initData);}}},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo";var ret=function(info){if(typeof fn==="function"){fn(info);}};var zip=(function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return(!isNaN(zip))?zip:false;}());if(zip){ws.location_searchresults_callback_geo=function(data){ret(data);};$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}else{ret(false);}},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)};this.extService.reloadWidgets();},weatherCookie:function(name,value,options){if(typeof value!=="undefined"){options=options||{};if(value===null){value="";options.expires=-1;}var expires="";if(options.expires&&(typeof options.expires==="number"||options.expires.toUTCString)){var date;if(typeof options.expires==="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires="; expires="+date.toUTCString();}var path=options.path?"; path="+(options.path):"",domain=options.domain?"; domain="+(options.domain):"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("");}else{var cookieValue=null;if(document.cookie&&document.cookie!==""){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&city!==""&&country!==""){var expDate=new Date();if(tempHi===""||tempLo===""){expDate.setTime(expDate.getTime()+(60*1000));}else{expDate.setTime(expDate.getTime()+(3*60*60*1000));}this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});this.renderFavorites();}},createWeatherLocationCookie:function(jsonString){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(favLocCookieString!==""){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}else{this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId);},createObjFromJSON:function(jsonString){if(jsonString!==""){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}else{return null;}},createLocJSObj:function(data){if(!data.loc_id){return null;}var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];if(i==="city"){val=val.replace("`","'");}obj[i]=val;}var fullArr=[];fullArr.push(obj.city||"");fullArr.push((obj.loc_id.substr(0,2).toUpperCase()!=="US"&&(obj.country||obj.state))?obj.country:obj.state);obj.fullCityString=fullArr.join(", ");return obj;},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered){return false;}else{this.serviceTriggered=true;}config=(typeof config==="object")?config:{};if(typeof serviceDomain!=="undefined"){this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS;this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER;this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP;this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP;if(document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)==-1){this.WEATHER_COOKIE_DOMAIN=document.location.hostname;}}if(config){for(i in config){var val=config[i];switch(i){case"icons":if(val===24){self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24");}break;}}}this.init();},renderWidget:function(){$("body").data("weather-rendered",true);var ws=this;ws.serviceTriggered=true;setTimeout(function(){ws.renderHeaderWeather();ws.renderHeaderLocationChange();},500);},renderHeaderWeather:function(){var ws=this;var trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current");});};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc"));var locObject=this.createLocJSObj(weatherlocObj.location[0]);if(this.getWeatherDataCookie(locObject.loc_id)){this.headerDisplayAction(locObject.loc_id);ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id));ws.renderWeatherWidget(locObject.loc_id);}else{this.fetchAndSaveWeatherJSONCookie(locObject.loc_id);}trigger();}else{this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id);trigger();});}},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml);},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML;},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(widgetElm.size()===0){return false;}var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=(widgetElm.hasClass("use-lg-icons"))?true:false,useImgSrc=(useLgIcons)?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE;var imgDim=(function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];val=val.replace("icons_","").split("x");return val;}());if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie);var wdObj=headerDataObj.weatherData;var form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+((wdObj.stateShort.length>0)?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i];var imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT;var hiTemp=dataSource.hi;var lowTemp=dataSource.lo;if(i===0){item.find(".current").html(wdObj.currentTemp+"&#176;");}if(item.find(".media img").size()===0){item.find(".media").html("<img />");}item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}});var hiLow="Hi "+((hiTemp.length>0)?hiTemp+"&#176;":"-")+" | Lo "+((lowTemp.length>0)?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow);item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});}});}widgetElm.addClass("active");if(widgetElm.data("setListeners")){return false;}widgetElm.data("setListeners",true);widgetElm.find("form:first").each(function(){var timeout,form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=true;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val);elm.val("");}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val((val==="")?elm.data("currVal"):val);});form.hover(function(){overSearch=true;},function(){overSearch=false;});$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");if(val!==curr&&val!==txt){form.submit();}}});form.submit(function(){ws.weathetStatusCheck(function(){search.data("currVal",search.val());ws.locationSearchAction(this,"#weather_widgetInput",ws.UPDATE_HEADER_ACTION);},function(){search.data("currVal",search.val());widgetElm.addClass("na");if(form.find("> fieldset > legend").size()>0){widgetElm.addClass("w-mod-1");}if(widgetElm.find("p.notice").size()===0){$('<p class="notice">Sorry, cannot update location at this time.</p>').insertBefore(form);}clearTimeout(timeout);timeout=setTimeout(function(){widgetElm.removeClass("na");widgetElm.removeClass("active");search.val(txt);ws.renderWidget();},10000);});return false;});});},weathetStatusCheck:function(successFN,failFN){var self=this,callbackFN="FOX_WeatherServ";if(!window[callbackFN]){window[callbackFN]=function(data){if(!data){failFN();}else{if(data.online&&data.online==="true"){successFN();}else{failFN();}}};}$.ajax({type:"GET",url:self.SERVICE_HEALTH_CHECK,data:{cb:cacheBuster(10)},dataType:"script",async:true,cache:true});},searchFieldOnFocus:function(inputField){if(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD){inputField.value="";}},searchFieldOnBlur:function(inputField,message){if(inputField.value===""){inputField.value=message;}},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();if(!reqAC.match(regexp)){showToConsole(ws.MSG_AIRPORT_CODE_ERROR);return false;}$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(parsed.location.length>0){var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(airportLocId).attr("value",airportLocObj.loc_id);}else{showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}}},error:function(){showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}});},getSetLocationAction:function(location,callback){if(!location){return false;}var ws=this;var locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");var upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(location)&&typeof callback==="function"){ws.fetchAndSaveWeatherJSONCookie(location,false,function(data){callback(ws.createObjFromJSON(data));});}},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId)){$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",ws.currentLocId);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget();});}}else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length===1){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget();});}else{$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",exactMatchObj.loc_id);}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}},gotoYourWeatherPage:function(locId,city,state,country){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL;},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);if(!locationId||locationId===""){locationId=ws.WEATHER_DEFAULT_LOCATION;}$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& ");feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>');weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>');weather_dayly.addClass("c");weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>');weather_hourly.addClass("c");average_records.replaceWith('<h2 class="title">'+text+"</h2>");});},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length>1){searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>';for(resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;if(resultsIndex%2===0){searchResultsHtml+='<tr class="even">';}else{searchResultsHtml+="<tr>";}searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>";}searchResultsHtml+="</table>";}else{if(locationJson.location.length===1){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country);}else{searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";}}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}$(divClass).html(searchResultsHtml);};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>");}});},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){airportDelayHtml+='<div class="delay">';for(delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>";}airportDelayHtml+="</div>";}else{airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";}$(divClass).html(airportDelayHtml);}});},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>';$(divClass).html(marineHtml);$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine");});try{FOX.site.channel.listDropdown.init("marineState");}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var marineLocJson=ws.createObjFromJSON(data);if(marineLocJson){if(marineLocJson.marineLocations.length>0){ws.generateTideLocationsList(marineLocJson.marineLocations);}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>";}$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").removeClass("disabled");}else{tideLocDropdown+='<li lang=""></li>';$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").html("- select -");$("#tide-cities-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("marineCities");}catch(err){}},generateStatesList:function(statesList){var i,ws=this,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++){listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";}return listHtml;},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>';$(divClass).html(skiHtml);$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003");});try{FOX.site.channel.listDropdown.init("skiState");}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var skiResortJson=ws.createObjFromJSON(data);if(skiResortJson){if(skiResortJson.skiResorts!==null&&skiResortJson.skiResorts.length>0){var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts;for(var x=0;x<skiArray.length;x+=1){if(x===0){newSkiReportHolder.push(skiArray[0]);}else{if(newSkiReportHolder[newSkiReportHolder.length-1]["resort_name"]!==skiArray[x]["resort_name"]){newSkiReportHolder.push(skiArray[x]);}}}ws.generateSkiResortsList(newSkiReportHolder);}else{return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>";}$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").removeClass("disabled");}else{skiResortsDropdown+='<li lang=""></li>';$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").html("- select -");$("#ski-resorts-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("skiResorts");}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml);});},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";if(skiObj.base_min&&skiObj.base_max){baseDepth=skiObj.base_min+" of "+skiObj.base_max;}var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml;},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=true;for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){alert("You have already saved this location to My Favorites.");saveFavorite=false;}}if(saveFavorite){favLocationArray.push(locId);this.createWeatherFavoritesCookie(favLocationArray);this.renderFavorites();}}else{alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.");}}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray);this.renderFavorites();}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break;}}this.createWeatherFavoritesCookie(favLocationArray);}var li=$("#li_"+locId),ul=li.closest("ul.favorites");li.remove();if(ul.children().size()===0){ul.closest(".weather.favorites > ul").children(":not(:last-child)").remove();}},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;if(dataObj.locationId.substr(0,2)!=="US"){stateToDisplay=dataObj.country;}var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml;},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(ws.weatherCookie("weatherfavlocs")).split("|");favoritesHtml+='<li><ul class="favorites">';for(favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie){favDataObj=ws.createObjFromJSON(favDataCookie);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){if(data){ws.createWeatherDataCookie(favLocationId,data);favDataObj=ws.createObjFromJSON(data);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});}}favoritesHtml+="</ul></li><li>&nbsp;</li>";}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml);$("ul.favorites li:last-child",favoritesObj).addClass("last");$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this);});},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml);},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie=(typeof setAsCookie==="boolean")?setAsCookie:true;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){if(setAsCookie){ws.createWeatherDataCookie(locId,data);ws.renderWidget();}else{if(typeof callback==="function"){callback(data);}}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data);if(typeof fn==="function"){fn();}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data,textStatus){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode);}},error:function(XMLHttpRequest,textStatus,errorThrown){showToConsole(ws.MSG_DEFAULT_ERROR);}});return regionCode;},weatherCityAutoComplete:function(element){var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(inputValue.length<1){return;}var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" ");if(tempIndex>0){appendix=appendix.substr(0,tempIndex);}var initial=inputValue.charAt(0).toLowerCase();if(initial.match(/[a-z]/)===null){return;}if(typeof ws.weatherCityData[initial]==="undefined"){if(typeof ClientStorageManager==="undefined"){triggerAjaxCall(false);}else{var restrict=["cookie","msiestorage"];if(restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())===-1){ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities;triggerAutoComplete(cities);}else{triggerAjaxCall(true);}});}else{triggerAjaxCall(false);}}}else{triggerAutoComplete(ws.weatherCityData[initial]);}function triggerAjaxCall(useCSM){if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}if(!ws.ACListener[ACElementId].ajaxReady){return;}ws.ACListener[ACElementId].ajaxReady=false;$(preloaderObj).show();$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:({cityNameInitial:initial,cb:cacheBuster()}),dataType:"text",cache:true,success:function(data,textStatus){if(data){var cities=data.replace(/var cities\=/,"");if(useCSM){ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value;},error:function(err){}});if(typeof ws.weatherCityData[initial]==="undefined"){ws.weatherCityData[initial]=cities;}triggerAutoComplete(ws.weatherCityData[initial]);}else{ws.weatherCityData[initial]=cities;triggerAutoComplete(ws.weatherCityData[initial]);}$(preloaderObj).fadeOut("slow");ws.ACListener[ACElementId].ajaxReady=true;}else{$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}},error:function(XMLHttpRequest,textStatus,errorThrown){$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}});}function triggerAutoComplete(cities){cities=eval(cities);if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}else{if(ws.ACListener[ACElementId].fchar!==initial){ws.ACListener[ACElementId].init=false;}}if(!ws.ACListener[ACElementId].init){$(element).autocomplete(cities,{max:20,width:193,selectFirst:false,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t;}}).result(function(event,item){ws.currentLocId=item.id;ws.currentCityString=item.t;});ws.ACListener[ACElementId].init=true;ws.ACListener[ACElementId].fchar=initial;}}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=false;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>');htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />');htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this);clearTimeout(formTimeout);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?ws.TXT_HEADER_SEARCH_FIELD:val);formTimeout=setTimeout(function(){ws.changeHeaderLocation();},3000);});elm.submit(function(){clearTimeout(formTimeout);ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION);return false;});});$(".weather-search, #weather_corner").append(htmlElm);},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");if(info.is(":hidden")){search.css("display","none");info.css({opacity:"0",display:"inline"});animateFn.show(info,{speed:300,type:"swing"});}else{info.css("display","none");search.css({opacity:"0",display:"inline"});animateFn.show(search,{speed:300,type:"swing"});}},headerDisplayAction:function(locationId){var ws=this;var headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px; height:24px;"/></span> ');htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(wdObj.days[0].image.length===0){elm.css("display","none");}else{if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}}});htmlElm.find("a").each(function(){var aTag=$(this);var text=aTag.text().toLowerCase();aTag.click(function(){if(text.indexOf("forecast")>-1){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);}if(text.indexOf("edit")>-1){ws.changeHeaderLocation();}return false;});});$(".weather-search, #weather_corner").html(htmlElm);}}};function ExternalServices(root){this.root=root;this._DataObj=false;this._ExtWidgets=[];}ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;x<len;x++){var fn=widgets[x];if(typeof fn==="function"){fn();}}},setWidget:function(fn,execute){var EX=this;if(typeof fn==="function"){EX._ExtWidgets.push(fn);if(execute){fn();}}},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm){return false;}var EX=this,root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val===txt)?"":val);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?txt:val);});form.submit(function(){root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION);return false;});});}};function showToConsole(str){if(typeof(console)==="object"){console.log(str);}}function cacheBuster(freq){freq=freq||false;var date=new Date(),str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();str+=hr.toString()+((freq&&!isNaN(freq))?(Math.floor(min/parseFloat(freq))).toString():"");return str;}var weather_service=window.weather_service=new WeatherService("weather_service");var animateFn={isIE:function(){return $.browser.msie;},animate:function(elm,cfg){if(!this.isIE()){if(!cfg.speed){cfg.speed=300;}if(!cfg.type){cfg.type="swing";}elm.animate(cfg.css,cfg.speed,cfg.type,function(){if(cfg.callback){cfg.callback();}});}else{elm.css(cfg.css);elm.css("opacity","");if(cfg.callback){cfg.callback();}}},hide:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"0"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);},show:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"1"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);}};}(jQuery));var FOX_WeatherService=(function(f){var q={};q.protocol=window.location.protocol;q.feed={info:q.protocol+"//www.foxnews.com/feeds/web/weather/conditions/${type}/${zip}.json",airport:q.protocol+"//www.foxnews.com/feeds/web/weather/airport/${type}/${code}.json",marine:q.protocol+"//www.foxnews.com/feeds/web/weather/marine/${type}/${id}.json",details:q.protocol+"//www.foxnews.com/feeds/web/weather/details/zip/${zip}.json"};q.state={id:"USNY0996",zip:"10108",city:"New York",state:"NY"};q.cookies={};q.cookies.domain="foxnews.com";q.cookies.location={name:"FXN_w_locinfo",expires:(60*24*365)};q.cookies.info={name:"FXN_w_stinfo",expires:30};var p=function(){this.__vars={};var u=this.__vars;u._INVALID_ZIPS=[];u._CALL_STACK={};this.render=new o(this);this.event=new l(this);this.init();};p.prototype.init=function(){var u=this,v=q.cookies.location;(function(){var y="FXN_w_ckbt_2";if(!k.get(y)){k.set(y,1,365);k.set("FXN_w_ckbt",1,(new Date()));f.cookie(q.cookies.location.name,q.state.zip,{expires:(new Date()),path:"/"});}}());if(!k.get(v.name)){k.set(v.name,q.state.zip,v.expires);u.__vars._CURRENT_ZIP=q.state.zip;}else{u.__vars._CURRENT_ZIP=k.get(v.name);}try{this.init=function(){};}catch(w){}};p.prototype.getWeatherInfo=function(y,E,I){var H=this,C=this.__vars,A=C._CALL_STACK,v="FOX_Weather_getWeatherInfo_${zip}",F=q.cookies.info,u=s.getItem(F.name),B=q.cookies.location;if(typeof E!=="function"){return false;}var z=function(O,L,K,J,N){var M={};if(!K){M.data=L;M.zip=O;}else{M=L;}if(J&&!K){C._CURRENT_ZIP=O;k.set(B.name,O,B.expires);s.setItem(F.name,M,F.expires);}if(J){j.trigger("Weather.Event.onWidgetUpdate",M);}if(K){E(M);}else{t.execStack(A,N,M);}};var G=(!y)?true:(f.inArray(y,C._INVALID_ZIPS)===-1)?true:false;if(u&&(u.zip===y||(!y&&I))){var D=((y)?y:u.zip);h("[Weather.Service] Storage: Getting data for "+D);z(D,u,true,I);}else{if(G){if(!y){if(I){y=H.getCurrentZip();}else{h("[Weather.Service] Error: No ZIP Code passed.");return false;}}v=v.replace("${zip}",y);if(t.inStack(A,v)){t.setStack(A,v,E);}else{t.setStack(A,v,E);var w=(function(){var J=q.feed.info;J=J.replace("${type}","zip");J=J.replace("${zip}",y);J+="?callback="+v;return J;}());window[v]=function(J){var K=(J&&J.weatherData&&J.weatherData.locationId&&J.weatherData.locationId.length>0)?J.weatherData:false;if(K){z(y,K,false,I,v);}else{if(f.inArray(y,C._INVALID_ZIPS)===-1){C._INVALID_ZIPS.push(y);}h("[Weather.Service] Invalid: "+y);E(K);}t.killStack(A,v);};h("[Weather.Service] Request: Getting data for "+y);r(w);}}else{h("[Weather.Service] Invalid: "+y);E(false);}}};p.prototype.getWeatherDetails=function(w,C){var E=this,B=E.__vars,z=B._CALL_STACK,u="FOX_Weather_getWeatherDetails_${zip}",A=q.cookies.location;if(typeof C!=="function"){return false;}if(!w){w=c()||root.__vars._CURRENT_ZIP;}var y=function(F,H){var G={};G.zip=F.zipCode;G.data=F;t.execStack(z,H,G);};var D=(f.inArray(w,B._INVALID_ZIPS)===-1)?true:false;if(D){u=u.replace("${zip}",w);if(t.inStack(z,u)){t.setStack(z,u,C);}else{t.setStack(z,u,C);var v=(function(){var F=q.feed.details;F=F.replace("${zip}",w);F+="?callback="+u;return F;}());window[u]=function(F){var G=(F&&F.weatherData&&F.weatherData.locationId&&F.weatherData.locationId.length>0)?F.weatherData:false;if(G){y(G,u);}else{if(f.inArray(w,B._INVALID_ZIPS)===-1){B._INVALID_ZIPS.push(w);}h("[Weather.Service] Invalid: "+w);C(G);}t.killStack(z,u);};h("[Weather.Service] Request: Getting 'Your Weather' data for "+w);r(v);}}else{C(false);}};p.prototype.updateWidget=function(v,w){var u=this;b(u.render.__vars._widgetStack,v);if(typeof w==="function"){u.event.onWidgetUpdate(w);}};p.prototype.loadImage=function(w,v,u){d(w,v,u);};p.prototype.getCurrentZip=function(){var u=this,w=q.cookies.location,v=k.get(w.name);if(!v){v=q.state.zip;}return v;};var l=(function(){var u=function(w){this.__vars={};var y=this.__vars;y._root=w;};u.prototype.onWidgetUpdate=function(w){var v=this;if(typeof w!=="function"){return false;}j.bind("Weather.Event.onWidgetUpdate",w);};u.prototype.onWeatherInfoUpdate=function(y,A){var w=this,z=this.__vars,v=z._root;if(typeof A!=="function"){return false;}if(f.inArray(y,v.__vars._INVALID_ZIPS)===-1){j.bind("Weather.Event.onWeatherInfoUpdate_"+y);}};return u;}());var o=(function(){var u=function(w){this.__vars={};var y=this.__vars;y._root=w;y._widgetStack=[];};u.prototype.WeatherWidget=function(C){var J=this,D=J.__vars,G=D._root;if(!C){return false;}var w=C.find("form"),H=w.find("#weather_widgetInput"),E=C.find("form fieldset > .region"),F=C.find("form fieldset > div:first"),B=C.find("> ul li"),I="Enter Zip Code";var y=function(M){var L=M.data;B.each(function(Q){var U=f(this),R=U.find(".section-pr span"),O=L.day[Q],T;if(Q===0){T=L.currentImage;}else{T=O.image;}var S=U.find(".media img");if(S.size()===0){U.find(".media").html('<img src="'+q.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:60px;width:60px;display:inline;" />');S=U.find(".media img");}d(S,T,[60,60]);if(Q===0){U.find(".current").html(L.currentTemp+"&#176;");}var P="Hi "+O.hi+"&#176; | Lo "+O.lo+"&#176;";R.html(P);var N="/weather/your-weather/index.html";U.unbind("click").bind("click",function(){window.open(N,"_self");});});F.hide();H.val(I);var K=[L.cityName,L.stateShort].join(", ");E.find("label").html(K);E.show();C.addClass("active");};var A=function(K){H[(!K)?"removeClass":"addClass"]("error");};var v=function(K){if(K){f("input").attr("disabled","disabled");w.addClass("loading");}else{f("input").removeAttr("disabled");w.removeClass("loading");}};var z=function(M){if(C.data("_weatherInitialized")){return false;}C.data("_weatherInitialized");E.find(".close").bind("click",function(){E.hide();F.show();return false;});var N=false;C.hover(function(){N=true;},function(){N=false;});H.focus(function(){var P=f(this),O=P.val();P.data("currVal",O);P.val("");}).blur(function(){var P=f(this),O=P.attr("value");P.val((O==="")?P.data("currVal"):O);if(!N){E.show();F.hide();A(false);P.val(I);}});var L=false;var K=function(O){if(L){return false;}L=true;O=O||g(H.val());A(false);if(!O){A("zip");L=false;}else{v(true);G.getWeatherInfo(O,function(P){v(false);if(P&&P.data){A(false);y(P);}else{A(M);}L=false;},true);}};w.submit(function(){K();return false;});D._widgetStack.push(K);f("html, body").bind("mouseup",function(){if(!N&&!L){E.show();F.hide();A(false);H.val(I);}});};G.getWeatherInfo(null,function(K){if(K&&K.data){y(K);z(K);}},true);};u.prototype.HomeWeatherWidget=function(D){var K=this,E=K.__vars,H=E._root;if(!D){return false;}var y=D.find("form"),I=y.find("#weather_widgetInput"),F=D.find("form fieldset > .region"),G=D.find("form fieldset > div:first"),w=D.find("p.details"),C=D.find("ul .section-pr"),J="Enter Zip Code";var z=function(P){var N=P.data;C.find(".current").html(N.currentTemp+"&#176;");C.find(".day").html("Today");var O=C.find(".media img");if(O.size()===0){C.find(".media").html('<img src="'+q.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px;width:24px;display:inline;" />');O=C.find(".media img");}d(O,N.currentImage,[24,24]);G.hide();I.val(J);var M=[N.cityName,N.stateShort].join(", ");F.find("label").html(M);F.show();var L="/weather/your-weather/index.html";w.find("a").attr("href",L);C.bind("click",function(){window.open(L,"_self");return false;});w.show();D.addClass("active");f(document).trigger("FOX.Events.FormWeatherUpdate");};var B=function(N){var L=w.find("a"),M=w.find("span");if(!N){L.show();M.html("&nbsp;&rsaquo;");}else{var O=false;if(N==="zip"){O="Invalid ZIP Code";}else{if(N="data"){O="Invalid ZIP Code";}}if(O){L.hide();M.html(O);}}w.show();};var v=function(L){if(L){f("input").attr("disabled","disabled");y.addClass("loading");}else{f("input").removeAttr("disabled");y.removeClass("loading");}};var A=function(N){if(D.data("_weatherInitialized")){return false;}D.data("_weatherInitialized");F.find(".close").bind("click",function(){F.hide();G.show();w.hide();return false;});var O=false;D.hover(function(){O=true;},function(){O=false;});I.focus(function(){var Q=f(this),P=Q.val();Q.data("currVal",P);Q.val("");}).blur(function(){var Q=f(this),P=Q.attr("value");Q.val((P==="")?Q.data("currVal"):P);if(!O){F.show();G.hide();B(false);w.show();Q.val(J);}});var M=false;var L=function(P){if(M){return false;}M=true;P=P||g(I.val());B(false);if(!P){B("zip");M=false;}else{v(true);H.getWeatherInfo(P,function(Q){v(false);if(Q&&Q.data){B(false);z(Q);}else{B(N);}M=false;},true);}};y.submit(function(){L();return false;});E._widgetStack.push(L);f("html, body").bind("mouseup",function(){if(!O&&!M){F.show();G.hide();B(false);w.show();I.val(J);}});};H.getWeatherInfo(null,function(L){if(L&&L.data){z(L);A(L);}},true);};u.prototype.LatinoWeatherWidget=function(C){var I=this,D=I.__vars,E=D._root;if(!C){return false;}var w=C.find("form"),G=w.find("#weather_widgetInput"),F=C.find("p.state"),B=C.find("> ul li"),H="Enter Zip Code";var y=function(L){var K=L.data;var J=[K.cityName,K.stateShort].join(", ");F.html(J);B.each(function(P){var T=f(this),Q=T.find(".section-pr span"),N=K.day[P],S;if(P===0){S=K.currentImage;}else{S=N.image;}var R=T.find(".media img");if(R.size()===0){T.find(".media").html('<img src="'+q.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:60px;width:60px;display:inline;" />');R=T.find(".media img");}d(R,S,[60,60]);if(P===0){T.find(".current").html(K.currentTemp+"&#176;");}var O="Hi "+N.hi+"&#176; | Lo "+N.lo+"&#176;";Q.html(O);var M="/weather/your-weather/index.html";T.unbind("click").bind("click",function(){window.open(M,"_self");});});C.addClass("active");};var A=function(J){G[(!J)?"removeClass":"addClass"]("error");};var v=function(J){if(J){f("input").attr("disabled","disabled");w.addClass("loading");}else{f("input").removeAttr("disabled");w.removeClass("loading");}};var z=function(L){if(C.data("_weatherInitialized")){return false;}C.data("_weatherInitialized");var M=false;w.hover(function(){M=true;},function(){M=false;});G.focus(function(){var O=f(this),N=O.val();O.data("currVal",N);O.val("");A(false);}).blur(function(){var O=f(this),N=O.attr("value");O.val((N==="")?H:N);A(false);});var K=false;var J=function(N){if(K){return false;}K=true;N=N||g(G.val());A(false);if(!N){A("zip");K=false;}else{v(true);E.getWeatherInfo(N,function(O){v(false);if(O&&O.data){A(false);y(O);}else{A(L);}K=false;},true);}};w.submit(function(){J();return false;});D._widgetStack.push(J);f("html, body").bind("mouseup",function(){if(!M&&!K){A(false);G.val(H);}});};E.getWeatherInfo(null,function(J){if(J&&J.data){y(J);z(J);}else{C.hide();}},true);};u.prototype.YourWeatherLocationWidget=function(D){var K=this,E=K.__vars,H=E._root;if(!D){return false;}var y=D.find("form"),I=y.find("#weather_widgetInput"),F=D.find("form fieldset > .region"),G=D.find("form fieldset > div:first"),w=D.find("p.error"),J="Enter Zip Code";var A=function(){C(false);G.hide();F.show();};var C=function(L){if(L){w.show();}else{if(w.not(":hidden")){w.hide();}}};var v=function(L){if(L){I.attr("disabled","disabled");y.addClass("loading");}else{I.removeAttr("disabled");y.removeClass("loading");}};var z=false;D.find("> div:first").hover(function(){z=true;},function(){z=false;});var B=function(){if(D.data("_weatherInitialized")){return false;}D.data("_weatherInitialized");F.find("a").bind("click",function(){F.hide();G.show();w.hide();return false;});I.focus(function(){var O=f(this),N=O.val();O.data("currVal",N);O.val("");C(false);}).blur(function(){var O=f(this),N=O.attr("value");O.val((N==="")?J:N);C(false);if(!z){F.show();G.hide();C(false);O.val(J);}});var M=false;var L=function(N){if(M){return false;}M=true;N=N||g(I.val());C(false);if(!N){C("zip");M=false;}else{v(true);H.getWeatherInfo(N,function(O){v(false);if(O&&O.data){C(false);A(O);}else{C("data error");}M=false;},true);}};y.submit(function(){L();return false;});E._widgetStack.push(L);f("html, body").bind("mouseup",function(){if(!z&&!M){F.show();G.hide();C(false);I.val(J);}});};B();};return u;}());var a=(function(){var u={};u.LocationInfo=function(v){var w={};w.city=v.cityName;w.state=v.stateShort;w.country=v.country;w.current=v.currentTemp;w.forecast=v.forecast;w.id=v.locationId;w.region=v.regionImage;};return u;}());var t=(function(){var u=function(){};u.prototype.inStack=function(v,B,A){var w=this,z,y=false;for(z in v){if(z===B&&v[z]){y=(A)?v[z]:true;break;}}return y;};u.prototype.execStack=function(y,C,B){var z=this,w=z.getStack(y,C);if(w){for(var v=0;v<w.length;v++){var A=w[v];if(typeof A==="function"){A(B);}}}};u.prototype.getStack=function(v,z){var w=this,y=w.inStack(v,z,true);return y;};u.prototype.setStack=function(v,A,z){var y=this,w=y.inStack(v,A);if(w){v[A].push(z);}else{v[A]=[z];}};u.prototype.killStack=function(v,y){if(v[y]){try{delete v[y];}catch(w){v[y]=null;}}};u=new u();return u;}());var j=(function(){var u={};u.bind=function(v,w){if(typeof w!=="function"){return false;}f(document).bind(v,function(y,z){w(z);});};u.trigger=function(v,w){f(document).trigger(v,[w]);};return u;}());var s=(function(){var u={};u.setItem=function(w,z,v){var y=(window.JSON&&window.JSON.stringify)?true:false;if(!y){return false;}z=encodeURIComponent(JSON.stringify(z));k.set(w,z,v);};u.getItem=function(w){var z=k.get(w),v=(z)?z:false;try{if(v&&window.JSON&&window.JSON.parse){v=JSON.parse(decodeURIComponent(v));}}catch(y){v=false;}return v;};u.removeItem=function(v){k.set(v,null);};return u;}());var k=(function(){var u={};u.set=function(y,z,v){var A={};A.path="/";A.domain=q.cookies.domain;if(typeof v==="number"){var w=new Date();A.expires=new Date(w.setTime(w.getTime()+(v*60*1000)));}else{A.expires=v;}f.cookie(y,z,A);};u.get=function(v){var w=f.cookie(v);return w;};return u;}());var g=function(w){var v=/^\d{5}([\-]\d{4})?$/,u=v.test(w);return(u)?w.slice(0,5):false;};var m=function(w){var v=/^[a-zA-Z]{4}[0-9]{4}$/,u=v.test(w);return(u)?w:false;};var d=function(y,z,w){var v=q.protocol+"//global.fncstatic.com/static/v/all/img/weather/icons_"+w.join("x")+"/"+z+".png",u=new Image();if(v!==y.attr("src")){y.css("opacity","0");u.onload=function(){y.attr("src",v);y.animate({opacity:1},400,"linear");};u.src=v;}};var r=function(u){f.ajax({url:u,data:{cb:n(30)},dataType:"script",async:true,cache:true});};var c=function(){var u,v=false,A=window.location,z=A.search.substr(1)||"";if(z.length>0){var y=z.split("&");for(u=0;u<y.length;u++){var w=y[u].split("=");if(w[0]==="zip"){v=w[1];break;}}}return v;};var b=function(v,w){if(!f.isArray(v)){return false;}for(var u=0;u<v.length;u++){if(typeof v[u]==="function"){v[u](w);}}};var n=function(y){y=y||false;var u=new Date(),z=u.getFullYear().toString()+(u.getMonth()+1).toString()+u.getDate().toString(),w=u.getHours()+1,v=u.getMinutes();z+=w.toString()+((y&&!isNaN(y))?(Math.floor(v/parseFloat(y))).toString():"");return z;};var h=function(){var v=true;if(v&&window.console){try{return console.log.apply(console,arguments);}catch(u){console.log(arguments);}}};return(new p());}(jQuery));(function($){var _cbStr=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1002";var CONST={thirdParty:{recaptcha:{url:"/ajax/authentication/recaptcha.jsp",elmId:"recaptcha_div",id:"6LcspgwAAAAAAPIfJ3yUt1aUl_Thr8TQfQmR1oRP",settings:{theme:"clean"}},disqus:{widget:"DQIntegrationService",cookie:{name:"p_DQS",expires:14},hash:{empty:"e30=",expires:60}},idms:{cookie:{name:"p_IDMS",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_IDMS_auth_logged_in",logout:"FOX_IDMS_auth_logged_in"}},fm:{cookie:{name:"SABRE_ID",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_FM_auth_logged_in",logout:"FOX_FM_auth_logged_in"}}}};var AuthService=window.AuthService=function(initVars){this.validationUrl="/authentication/registration/validate/";this.getRegistrationDataUrl="/authentication/registration/get";this.loginSubmitUrl="/authentication/login/submit";this.logoutSubmitUrl="/authentication/logout/submit";this.requestLogoutUrl="/authentication/logout/submit";this.refreshAuthUrl="/authentication/login/refresh?"+_cbStr+"=t";this.forgottenPasswordSubmitUrl="/authentication/forgotten_password/submit";this.registrationSubmitUrl="/authentication/registration/submit";this.ajaxRetrieveHtmlUrl="/ajax/authentication/includes.jsp";this.newsAlertSubscriptionUrl="/portal/newsalertsubscribe";this.defaultDomain="foxnews.com";var i;for(i in initVars){this[i]=initVars[i];}};AuthService.prototype={init:function(config){var i,as=this;for(i in config){this[i]=config[i];}if(window.FOX_isMnt&&FOX_isMnt()){$("#account, #authentication").hide();}this.thirdPartyAPI=new ThirdPartyAPI(this);},extend:function(obj){var i,self=this;for(i in obj){this[i]=obj[i];}},createObjFromJSON:function(jsonString){if(typeof jsonString==="string"){if(($.trim(jsonString)).length>0){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}}return false;},isLoggedIn:function(){return($.cookie("p_UN")&&$.cookie("p_UN")!=="")?true:false;},isThirdParty:function(){return($.cookie("p_Thirdparty"))?true:false;},getDisplayName:function(){var as=this;function pipeCheck(str){var separator="|id:",idx=str.lastIndexOf(separator);if(idx<1){return str;}return str.substr(0,idx);}if(as.isLoggedIn()){var displayName=false;if(typeof $.cookie("p_DN")==="string"){var dn=$.cookie("p_DN");if(dn.length>0){dn=pipeCheck(dn);displayName=dn.replace(/\+/g," ").replace(/\"/g,"");}}return(displayName)?displayName:as.getUsername();}return"";},getUsername:function(){if(this.isLoggedIn()){return $.cookie("p_UN");}},getUserEmail:function(){return(this.isLoggedIn())?$.cookie("p_EM"):"";},getUserLocation:function(){return(this.isLoggedIn())?$.cookie("p_UL"):"";},getOverlayHtml:function(overlayView,origDomain,callbackFn){callbackFn=callbackFn||false;var as=this;if(!origDomain){origDomain=as.defaultDomain;}$.ajax({type:"GET",async:false,url:as.ajaxRetrieveHtmlUrl,data:({view:overlayView,authDomain:origDomain,cb:_cbStr}),success:function(data,textStatus){$("body").append(data);if(typeof callbackFn==="function"){callbackFn();}}});},closeOverlay:function(elementId){var as=this,elm=$("#"+elementId);elm.find("input[type*=text], input[type*=password]").val("");elm.find("input:checkbox:checked").attr("checked","");elm.find("input[type*=text]").removeClass("error");as.overlay.hide(elm);},providerOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#login-provider").size()===0){as.getOverlayHtml("login-provider",authDomain,callbackFn);}as.initProviderOverlay();as.overlay.show("#login-provider");$("#user-login-form-overlay").find("input[name*=username]").focus();return false;}return true;},initProviderOverlay:function(){var as=this;var login_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("User name and password are required.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.login(elm);return false;}};$("#user-login-form-overlay").validate(login_validation_options);$(".thirdparty a img").hover(function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html($(this).attr("alt"));thirdPartyTooltip.addClass($(this).attr("name")).css("visibility","visible");},function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html("");thirdPartyTooltip.removeClass($(this).attr("name")).css("visibility","hidden");});var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("The email address you entered is invalid.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);$("#forgot-password-overlay").unbind("click").click(function(){$("#reset-password.reset").toggle();});},registrationOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#registration-overlay").length===0){as.getOverlayHtml("registration-overlay",authDomain,callbackFn);}increaseRefresh();$("#reg_user_name").removeAttr("readonly");$("#reg_user_name").next(".validate").next(".validate").children(".sprites").show();as.initRegistrationOverlay();as.overlay.show("#registration-overlay");return false;}return true;},initRegistrationOverlay:function(){var as=this;var registration_validation_options={submitHandler:function(form){as.register($(form));return false;},errorElement:"p",errorPlacement:function(err,elm){var errMsg=err.text(),id=elm.attr("id");if(elm.data("_errMsg")===errMsg){return false;}elm.data("_errMsg",errMsg);var parent=elm.parent(),marker=parent.find("> .validate:first .sprites"),msgAlert=parent.find("> .error-tip p.err-msg"),errMsg=err.text(),reqTxt=parent.find("> .req-text");var css={valid:"check",invalid:"red-exclamation"};reqTxt.hide();var noMsg="reg_birth_year";var noMarker="reg_zip_code|reg_location";if(msgAlert.size()===0&&noMsg.indexOf(id)===-1){var validate=parent.find("> .validate:first");if(id==="agreement"){validate=elm;}msgAlert=$('<div class="error-tip"><span class="form-note"><p class="err-msg"></p></span></div>').insertAfter(validate);msgAlert=parent.find("> .error-tip p.err-msg");if(id==="agreement"){parent.find("> .error-tip").css({position:"absolute",width:"220px",right:"0",top:"0"});}}msgAlert.css("padding-top","0px");if(errMsg.length===0){if(noMarker.indexOf(id)===-1){marker.removeClass(css.invalid).addClass(css.valid);}msgAlert.html("&nbsp;");}else{if(noMarker.indexOf(id)===-1){marker.removeClass(css.valid).addClass(css.invalid);}msgAlert.html(errMsg);}if(marker.is(":hidden")&&noMarker.indexOf(id)===-1){marker.css("display","block");}},success:function(){},rules:{propID_username:{required:true,minlength:5,maxlength:15,validChars:true,remote:{url:as.validationUrl,type:"post"}},propID_email:{required:true,email:true,maxlength:250,strictEmail:true,remote:{url:as.validationUrl,type:"post"}},propID_pass1:{required:true,noSpaces:true,minlength:5,maxlength:12},propID_pass2:{required:true,noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true,remote:{url:as.validationUrl,type:"post"}},propID_birthyear:{required:true,min:1900,isMaxYear:true},propID_terms:{required:true}},messages:{propID_username:{required:"Please enter a username",minlength:"Your username must consist of at least 5 characters",maxlength:"Your username is too long",validChars:"please supply valid characters only.",remote:"This username is already in use."},propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_terms:{required:"In order to join Fox News community you must agree to our terms and conditions. Please review and check the box to join."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code.",remote:"Please enter a valid United States zip code."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#registration").validate(registration_validation_options);as.showRecaptcha();},initOpxLogin:function(){var as=this;var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){var message="The email address you entered is invalid.";elm.find(".error-box-login").html(message).show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);},initEditProfile:function(){var as=this;var edit_profile_validation_options={debug:false,submitHandler:function(form){if($("#reg_email").val()===""&&$("#reg_email2").val()===""){$("#reg_email").val($("#reg_curemail").val());$("#reg_email2").val($("#reg_curemail").val());}form.submit();return false;},errorElement:"p",errorPlacement:function(error,element){var elm=$(element),elem_pos=elm.position(),error_message=$(error[0]).html(),error_name=elm.attr("id").replace("reg","err");error_html=[];error_html.push('<div class="regoverlay_container error-tip" id="'+error_name+'">');error_html.push('<div class="overlaytip_top"></div><div class="form-note"><img src="/static/v/all/img/alert-yellow.gif" alt="" />');error_html.push('<p class="err-msg">'+error_message+'</p></div><div class="overlaytip_btm"></div></div>');error_html.join("");$("div.regoverlay_container.error-tip").hide();var errorElm=$("div#"+error_name);if(errorElm.size()>0){if(error_message!==""){errorElm.find("p.err-msg").html(error_message).show();}}else{elm.after(error_html);errorElm.hide();}errorElm.css({top:(elem_pos.top-80)+"px",left:(elem_pos.left+50)+"px"});errorElm.next(".validate > .sprites").removeClass("check").addClass("red-exclamation").show();},success:function(label){var errDiv=$("div#"+$(label).attr("htmlfor").replace("reg","err"));errDiv.hide();errDiv.next(".validate > .sprites").removeClass("red-exclamation").addClass("check");},rules:{propID_email:{required:false,email:true,maxlength:250,strictEmail:true},propID_email2:{equalTo:"#reg_email"},propID_pass1:{noSpaces:true,minlength:5,maxlength:12},propID_pass2:{noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true},propID_gender:{required:true},propID_birthyear:{required:true,min:1900,isMaxYear:true}},messages:{propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_email2:{required:"Please confirm your email address.",equalTo:"Please double check your email. They do not match."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code."},propID_gender:{required:"Please submit your gender."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#reg_profile").validate(edit_profile_validation_options);},forgotPasswordOverlay:function(obj){var as=this;if(!as.isLoggedIn()){if($("#forgot-password-overlay").size()===0){as.getOverlayHtml("forgot-password-overlay");}var offset=$(obj).offset();var leftPos=offset.left-$("#forgot-password-overlay").width();as.overlay.show("#forgot-password-overlay");return false;}return true;},login:function(formObj){formObj=$(formObj);var as=this,user=formObj.find("input[name*=username]").val(),pass=formObj.find("input[name*=password]").val(),rememberMe=(formObj.find("input[name*=rememberMe]:checked").size()>0)?true:false,numOfDays=(rememberMe)?365:0;$.ajax({type:"POST",url:as.loginSubmitUrl,data:({username:user,password:pass,authDomain:as.domain,rememberMe:rememberMe}),dataType:"text",success:function(data,textStatus){var loginResponse=as.createObjFromJSON(data);var messageArr=loginResponse.authentication.message.split(" ");if(!loginResponse){showToConsole("[authSrv.login] No data returned from request.",true);return false;}if(loginResponse.authentication.status==="ok"){if(typeof $.ad!="undefined"){$.ad.track({login:{userid:"fox login - id: "+as.getDisplayName()+" email:"+as.getUserEmail()}});}as.onSuccessLogin();as.thirdPartyAPI.disqus.login(loginResponse);as.thirdPartyAPI.idms.login(loginResponse);as.thirdPartyAPI.fileMobile.login(loginResponse);as.closeOverlay("login-provider");if(as.domain==="foxnews.com"&&window.location.pathname.indexOf("/community/user/")>-1){window.location.reload();}}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again.").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again later.").show();}});},logout:function(origDomain){var as=this;origDomain=origDomain||as.defaultDomain;$.ajax({type:"POST",url:as.logoutSubmitUrl,data:({authDomain:origDomain}),success:function(data,textStatus){if(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.logout] No data returned from request.",true);return false;}if(authObj.authentication.status==="ok"){as.thirdPartyAPI.disqus.logout(authObj,function(){as.thirdPartyAPI.idms.logout(authObj,function(){as.thirdPartyAPI.fileMobile.logout(authObj,function(){if(window.location.pathname.indexOf("/community/user/profile")>-1){window.location.href="http://www.foxnews.com/index.html";}else{window.location.reload();}});});});}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});},requestLogOut:function(config){config=config||{};var as=this;$.ajax({type:"GET",url:as.requestLogoutUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},requestLoginInfo:function(config){config=config||{};var as=this;$.ajax({type:"POST",url:as.refreshAuthUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},forgotPassword:function(formObj){formObj=$(formObj);var as=this,email=formObj.find("input[name*=emailResetField]").val();$.ajax({type:"POST",url:as.forgottenPasswordSubmitUrl,data:({email:email}),dataType:"text",success:function(data,textStatus){var forgotPasswordResponse=as.createObjFromJSON(data);if(!forgotPasswordResponse){showToConsole("[authSrv.forgotPassword] No data returned from request.",true);return false;}if(forgotPasswordResponse.authentication.status==="ok"){formObj.find(".error-box-login").hide();formObj.find(".reset-input-container").hide();formObj.find(".confirm-box-login").html("A reset link has been sent to the email provided.").show();}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("The email address you entered is invalid").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("We're sorry your password cannot be reset at this time. Please try again later.").show();}});},register:function(formObj){var as=this,privacy=(formObj.find("#reg_location_confirm:checked").size()>0)?"hide":"",challenge=as.thirdPartyAPI.recaptcha.getChallenge(),response=as.thirdPartyAPI.recaptcha.getResponse();var slids=[];if(formObj.find("#fnbreaking:checked").size()>0){slids.push("C2F278094FACCEA62391025B7A52D8EB");}if(formObj.find("#fbbreaking:checked").size()>0){slids.push("5C84B893BD6D939E84FAE1A8E6E9525A");}if(slids.length>0){$.ajax({type:"GET",url:as.newsAlertSubscriptionUrl,data:({slids:slids.join(","),email:$("#reg_email").val()}),dataType:"text"});}$.ajax({type:"POST",url:as.registrationSubmitUrl,data:{authDomain:as.domain,realm:"realm1",username:formObj.find("#reg_user_name").val(),password:formObj.find("#reg_password").val(),email:formObj.find("#reg_email").val(),zip:formObj.find("#reg_zip_code").val(),country:formObj.find("#reg_country").val(),location_privacy:privacy,birth_year:formObj.find("#reg_birth_year").val(),recaptcha_challenge_field:challenge,recaptcha_response_field:response},dataType:"text",success:function(data,textStatus){var registrationResponse=as.createObjFromJSON(data);var message=registrationResponse.authentication.message;if(message.indexOf("successful registration")>-1&&typeof $.ad!=="undefined"){$.ad.track({registration:{userid:"fox registration - id:"+as.getDisplayName()+" - email:"+as.getUserEmail()}});}if(!registrationResponse){showToConsole("[authSrv.register] No data returned from request.",true);return false;}if(registrationResponse.authentication.status==="ok"){$("#registration-error").hide();$("#registration-overlay").hide();as.getOverlayHtml("registration-thankyou-overlay");decreaseRefresh();authentication_service.onSuccessLogin();as.thirdPartyAPI.disqus.login(registrationResponse);as.thirdPartyAPI.idms.login(registrationResponse);as.thirdPartyAPI.fileMobile.login(registrationResponse);as.overlay.show("#registration-thankyou-overlay");$.scrollTo("#registration-thankyou-overlay");$("#clickToClose").focus();}else{var errorMsg=registrationResponse.authentication.message;as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please fix the error and try again. <br/> *"+errorMsg).show();$.scrollTo("#registration-error");}},error:function(XMLHttpRequest,message,errorThrown){as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please try again. <br> *"+message).show();$.scrollTo("#registration-error");}});},overlay:{init:function(action,target){target=$((target||"#registration-overlay"));var as=this;$(action).each(function(){$(action).unbind("click").click(function(){as.show(target);});});},show:function(target){target=$(target);var as=this;if(typeof increaseRefresh!=="undefined"){increaseRefresh();}target.find(".validate a.sprites").unbind("click");if($(".overlay-layer").size()===0){$("body").prepend('<div class="overlay-layer"></div>');}$(".overlay-layer").show();target.each(function(){var elm=$(this);elm.show().fixedBox();if($(window).height()<elm.height()){var scrollTop=$(document).scrollTop();var overlayTop=(target.css("top")).replace(/[a-z]/g,"");var abs=Math.abs(overlayTop)+scrollTop;elm.css({top:abs+"px",position:"absolute"});}elm.find(".field input").removeClass("error").attr("value","");elm.find(".validate a.sprites,.error-tip").hide();var usr=elm.find("#reg_user_name"),usrParent=usr.parent(),pwd=elm.find("#reg_password"),pwdParent=pwd.parent();if(usrParent.find("span.req-text").size()===0){usr.after('<span class="req-text req-user">5-15 characters, cannot be changed</span>');usrParent.focus(function(){elm.find(".req-user").remove();});}if(pwdParent.find("span.req-text").size()===0){pwd.after('<span class="req-text req-password">5-12 characters, no space, case-insensitive</span>');pwdParent.focus(function(){elm.find(".req-password").remove();});}});var close=target.find(".close").parent(),signUpReg=$(".sign_up_registration");close.unbind("click").removeAttr("onclick").click(function(){as.hide(target);return false;});target.find(".buttons input[type='reset']").click(function(){as.hide(target);return false;});signUpReg.click(function(){$(".overlay-layer").show();});},hide:function(target){if(typeof decreaseRefresh!=="undefined"){decreaseRefresh();}$(".overlay-layer").hide();$(target).hide();}},instantiateValidators:function(){var as=this;$.validator.addMethod("validChars",function(value){var i,result=true,iChars="!@#$%^&*()+=-[]\\';,./{}|\":<>?";for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}}return result;},"Please supply valid characters only.");$.validator.addMethod("strictEmail",function(value){return(value.match(/^([a-zA-Z0-9_.\-\+])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/)!==null)||(value==="");},"Please supply valid email characters only.");$.validator.addMethod("noSpaces",function(value){var result=true,strArr=[];if(typeof value==="string"&&value.split(" ").length>1){return false;}return result;},"Please remove the blank spaces.");$.validator.addMethod("validCharsName",function(value){var i,resultName=true,iChars='!@#$%^&*()\\+=[];,./{}|":<>?',iCharshp="-",iCharsap="'",counterhp=0,counterap=0;for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}if(iCharshp.indexOf(value.charAt(i))!==-1){counterhp=counterhp+1;}if(iCharsap.indexOf(value.charAt(i))!==-1){counterap=counterap+1;}}if(counterhp>1){return false;}if(counterap>1){return false;}return resultName;},"Please supply valid characters only.");$.validator.addMethod("isMaxYear",function(value){var result=true,d=new Date(),curr_year=d.getFullYear();if($("#reg_birth_year").val()>(curr_year-13)){return false;}return result;},"You must be at least 13 years old to register for this site.");$.validator.addMethod("zipRequired",function(value){var result=true;country=$("#reg_country").val();if(country==="United States"&&value===""){return false;}return result;},"Zip Code is required.");$.validator.addMethod("zipCheck",function(value){var result=true,regLocation=$("#reg_location");if($("#reg_country").val()==="United States"){regLocation.show();$.ajax({type:"GET",url:as.getRegistrationDataUrl,async:false,data:({zip:$("#reg_zip_code").val()}),dataType:"text",success:function(data,textStatus){if(data){var stateObj=as.createObjFromJSON(data);if(!stateObj){showToConsole("[authSrv.validator] No data returned from request.",true);return false;}var state=stateObj.state_for_zip;regLocation.val((state!=="")?state:"");result=false;}else{regLocation.val("");result=false;}},error:function(XMLHttpRequest,textStatus,errorThrown){regLocation.val("");}});result=(regLocation.val()!=="")?true:false;}else{regLocation.hide();}return result;},"Please enter a valid United States zip code.");},showRecaptcha:function(){var as=this;as.thirdPartyAPI.recaptcha.create();}};var ThirdPartyAPI=(function(){API=function(root){this.root=root;this.recaptcha=new RecaptchaAPI(this);this.disqus=new Disqus(this);this.idms=new IDMS(this);this.fileMobile=new FileMobile(this);};var RecaptchaAPI=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.recaptcha;};RecaptchaAPI.prototype={set:function(fn){var self=this,root=this.root,cfg=this._config;if(typeof Recaptcha!=="undefined"){if(typeof fn==="function"){fn();}}else{window.Recaptcha_Create_Instance=function(){$.loadAttempt(30,500,function(){return(typeof Recaptcha!=="undefined")?true:false;},function(){if(typeof fn==="function"){fn();}});};(function(){var e=document.createElement("script");e.src=cfg.url;e.type="text/javascript";e.async=true;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);}());}},create:function(){var self=this,cfg=this._config,recaptcha_id=cfg.id,divId=cfg.elmId,settings=cfg.settings;self.set(function(){Recaptcha.create(recaptcha_id,divId,settings);});},getChallenge:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_challenge();}return false;},getResponse:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_response();}return false;}};var Disqus=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.disqus;this.set();};Disqus.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;if(cookieVal){unescape(cookieVal);}var trigger=function(){var data={dqs:cookieVal};root.requestLoginInfo({data:data,callback:function(obj){if(!obj){log("[api.disqus] Refresh service returned no hash value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);if(typeof fn==="function"){fn(hash);log("[api.disqus] Hash Refresh Initiated");}}catch(err){log("[api.disqus] Refresh service: "+err);}}});};var loggedOutCookie=function(){root.requestLogOut({callback:function(obj){if(!obj){log("[api.disqus] logout hash service returned no value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);fn(hash);}catch(err){log("[api.disqus] Refresh service: "+err);return false;}}});};var hasExpired=function(hasExpiredFn){var cDate=new Date();var curr={time:cDate,epoch:Math.round(cDate.getTime()/1000),expire:new Date(cDate.getTime()+(cfg.hash.expires*60*1000))};curr.expireEpoch=Math.round(curr.expire/1000);var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0],timestamp=arr[2];if(typeof timestamp==="undefined"){return getLoggedOut();}if(isNaN(timestamp)){return getLoggedOut();}if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}timestamp=parseInt(timestamp,10);var tDate=new Date(timestamp*1000);var ts={time:new Date(tDate),epoch:timestamp,expire:new Date(tDate.getTime()+(cfg.hash.expires*60*1000))};ts.expireEpoch=Math.round(ts.expire/1000);if(curr.epoch>=ts.expireEpoch){if(arr[0]!==cfg.hash.empty){return"yes";}}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;case"yes":log("[api.disqus] Hash Expired");trigger();break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var message=data.authentication.message;if(message.indexOf("|")>-1&&typeof $.ad!=="undefined"){regExpId=/([\w]+)[=]([\w,\s]+)$/;var idArr=message.match(regExpId);$.ad.track({login:{userid:"third party login - id:"+idArr[2].replace(/\s/,"")+", service:"+idArr[1]+".com"}});}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging In");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},logout:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging Out");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},integrate:function(config){config=config||{};var cfg=this._config;var trigger=function(){$.loadAttempt(50,500,function(){return((window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function")||(typeof window["FOX_"+cfg.widget]==="function"))?true:false;},function(){if(window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function"){log("[api.disqus] Integrating ");fox.widgets[cfg.widget](config);}else{if(typeof window["FOX_"+cfg.widget]==="function"){log("[api.disqus] Integrating ");window["FOX_"+cfg.widget](config);}}});};$(document).ready(function(){trigger();});},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host="*."+root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",host:host,expires:exp,domain:root.domain};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":$.cookie(cName,null);break;case"get":cName=(data)?data:cName;return($.cookie(cName))?$.cookie(cName):false;}}};var IDMS=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.idms;this.set();};IDMS.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.idms){log("[api.idms] Logging In");self.cookie("set",data.authentication.idms);self.integrate({token:data.authentication.idms,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};var FileMobile=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.fm;this.set();};FileMobile.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.fm){log("[api.idms] Logging In");self.cookie("set",data.authentication.fm);self.integrate({token:data.authentication.fm,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};return API;}());var disablezip=window.disablezip=function(value){var zip=$("#reg_zip_code"),loc=$("#reg_location");if(value==="United States"){zip.removeAttr("readonly").css("background","#fff");zip.next(".validate").children(".sprites").hide();loc.val("");}else{zip.attr("readonly",true).css("background","#ddd").val("");loc.val(value);}};var formatField=window.formatField=function(id,value){var elm=$("#"+id);switch(id){case"reg_first_name":elm.val(value.join(""));break;case"reg_last_name":elm.val(value.join(""));break;default:elm.val(value.toLowerCase().replace(/\s+/gi,""));}};var formatTrim=window.formatTrim=function(id,value){$("#"+id).val(value.replace(/\s+/gi,""));};var isNumberKey=window.isNumberKey=function(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return(charCode>31&&(charCode<48||charCode>57))?false:true;};var increaseRefresh=window.increaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),refresh=item.attr("content"),orig=(typeof item.attr("content")!=="undefined")?refresh:false;item.data("RefreshOrig",orig);item.attr("content","7200");});}};var decreaseRefresh=window.decreaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_enableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),orig=item.data("RefreshOrig");if(orig){item.attr("content",orig);}});}};var showToConsole=function(str,force){force=force||false;var search=(window.location.search).substr(1);if(search.length>0){var x,pairs=search.split("&"),valuePair={};for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");valuePair[split[0]]=split[1];}if(valuePair.stc==="y"||force){if(typeof window.console==="object"){console.log(str);}}}};var log=showToConsole;(function(){function d(c){return typeof c==="function"?!0:!1;}var f=function(){var c,b=arguments;if(b.length===0){return !1;}var a={attempt:0,timeout:500};if(b.length===1&&typeof b[0]==="object"){for(c in b[0]){a[c]=b[0][c];}if(a.callback){c=a.callback;}else{return !1;}if(!c.check||!c.success){return !1;}else{a._check=c.check,a._success=c.success;}if(c.timedOut){a._timeout=c.timedOut;}}else{if(!isNaN(b[0])&&!isNaN(b[1])&&d(b[2])&&d(b[3])){a.attempt=b[0];a.timeout=b[1];a._check=b[2];a._success=b[3];if(b[4]){a._timeout=b[4];}if(b[5]){a._abort=b[5];}}else{if(d(b[0])&&d(b[1])){a._check=b[0];a._success=b[1];if(b[2]){a._timeout=b[2];}if(b[3]){a._abort=b[3];}}else{return !1;}}}if(!d(a._check)||!d(a._success)){return !1;}if(!d(a._timeout)){a._timeout=function(){};}if(isNaN(a.timeout)){return !1;}else{a.timeout=parseInt(a.timeout,10);}if(isNaN(a.attempt)){return !1;}else{a.attempt=parseInt(a.attempt,10);}var e=!1,g=!1;if(a.attempt&&a.timeout){var f=function(){g?clearTimeout(e):a._check()?(a._success(),clearTimeout(e)):a.attempt>0?e=setTimeout(function(){f();},a.timeout):a._timeout();a.attempt--;};f();}else{e=setInterval(function(){g?clearInterval(e):a._check()&&(a._success(),clearInterval(e));},a.timeout);}return{abort:function(){g=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:f});}else{if(!window.loadAttempt){window.loadAttempt=f;}}})();}(jQuery));var FOX_Janrain_Auth_TPL=(function(){var a='<div style="display:none;" id="resendVerification">    <h1>Resend Email Verification</h1>    <div class="hr"></div>    <p>To sign in you must verify your email address. Fill out the form below and we\'ll send you an email to verify.</p>    {* #resendVerificationForm *}        {* resendVerification_emailAddress *}        <div class="capture_fox_buttoncol">            {* newPasswordFormButton *}        </div>     {* /resendVerificationForm *}</div><div style="display:none;" id="resendVerificationSuccess">  <div style="display:none;" id="postLoginScreen1">      <h1>Please change your display name.</h1>      <p>Your Display Name is unavailable.</p>      {* #postLoginForm1 *}      {*postLogin_displayName *}      <div align="right">{* postLogin_acceptButton *}</div>      {* /postLoginForm1 *}  </div>    <h1>Your Verification Email Has Been Sent</h1>    <div class="hr"></div>    <p>Check your email for a link to reset your password.</p>    <a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></div><div style="display:none;" id="resetPasswordUserSuccess">            <h1>Your password has been changed</h1>            <div class="hr"></div>           <p>Password has been successfully updated.</p>            <div class="capture_textRight">                <p><a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></p>            </div>        </div><div style="display:none;" id="resetPassword">    <h1>Please enter your email address and we\'ll send you a new password.</h1>    <div class="hr"></div>    {* #forgotPasswordForm *}        {* forgotPassword_emailAddress *}        {* errorMessages *}        {* forgotPassword_sendButton *}    {* /forgotPasswordForm *}</div><div style="display:none;" id="resetPasswordSuccess">    <h1>Reset your password</h1>     <div class="hr"></div>    <p>Please reset your password.</p>    {* #resetPasswordForm *}        {* newpassword *}        {* newpasswordConfirm *}          <div class="capture_textRight">             {* newPasswordFormButton *}           </div>    {* /resetPasswordForm *}</div><div style="display: none" id="registrationVerify">            <h2>Sorry we could not verify that email address.</h2>            <p>Please resend verification.</p>        </div><div style="display: none" id="registrationVerified">    <h2>Thanks for verifying your email address</h2>    <p>You will be redirected to your new user profile in <span id="redirectTime">10 seconds</span></p></div><div style="display:none;" id="editProfile">           <div id="accounts-header">              <ul>                 <li id="account-tab" class="active tabs"><a href="#">Account</a></li>                 <li id="ureport-pro-tab" class="tabs"><a href="#">uReport</a></li>                 <li id="ureport-act-tab" class="tabs"><a href="#">Activity</a></li>              </ul>           </div>           <div id="account-wrap" class="wrap">                {* savedProfileMessage *}                {* #photoManager {"custom": true} *}                    {| mainDiv |}                         {| profileImage |}                        <div class="capture_fox_photoLinks">                          <h1>{* public_displayName *}</h1>                          <div id="capture_profile_saved" style="display:none;"><span class="capture_fox_profile_saved"></span>Your profile was last saved <span class="capture_fox_alert_callout" id="capture_alert_callout">just now</span></div>                        {| photoLinks |}                        <span class="janrain_traditional_account_only">                          <a href="#" data-capturescreen="changepassword" class="capture_fox_change_password">Change Password</a>                        </span>                        <div class="cancel-button"><span></span>Back</div>                      </div><div class="badge-stats"><div></div><div class="stats"><ul><li><span>My Status</span><span></span></li><li><span>Current Points</span><span></span></li><li><span>Next Level</span><span></span><span class="next-level"></span></li></ul><div class="bar-cont"><div class="bar"><span></span></div><span></span><a href="#">How does it work?</a></div></div></div>                    {| closeDiv |}                    <!-- hidden crop form -->                    <div style="display: none;">                    {| editFormOpen |}                    <div class="capture_footer">                    {| editSubmitButton |}                      <p>or</p>                    {| chooseDifferentPhotoLink |}                    </div>                    {| editFormClose |}                    </div>                    <!-- hidden upload form -->                    <div style="display: none;">                    {| uploadFormOpen |}                    {| uploadFileField |}                    {| uploadSubmitButton |}                    {| photoChooserErrors |}                    {| uploadFormClose |}                    </div>                    <!-- hidden upload screen -->                    <div style="display: none;">                        <div id="{| uploadPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div id="{| prefixFieldName |}_profile_pic_upload" class="{| profilePicClass |}capture_profile_pic_upload capture_default">                                {| uploadImage |}                            </div>                            <div id="{| prefixFieldName |}_profile_pic_uploadform_container" class="capture_uploadPhoto_container">                            </div>                        </div>                    </div>                    <!-- hidden edit photo screen -->                    <div style="display: none;">                        <div id="{| editPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div class="capture_fox_clearfix">                                <div id="{| prefixFieldName |}_profile_pic_editPhoto_container" class="capture_editPhoto_container">                                    <h2><span class="capture_fox_crop_icon"></span>Crop your avatar</h2>                                    <div class="janrainCrop_container_dashed">{| cropImage |}</div>                                </div>                                 <div class="{| profilePicClass |}profile_pic_edit_container">                                    <h2><span class="capture_fox_preview_icon"></span>Avatar Preview</h2>                                    <div id="{| prefixFieldName |}_profile_pic_edit" class="{| profilePicClass |}capture_profile_pic_edit capture_default">                                        {| editImage |}                                    </div>                                </div>                              </div>                       </div>                    </div>                {* /photoManager *}                {* publicProfileLink *}                <h2>Profile</h2>                <div class="hr"></div>                    <div class="capture_fox_editProfile">                    {* editProfileForm *}                        {* edit_firstName *}                        {* edit_lastName *}                        {* edit_email *}                        {* edit_country *}                        {* edit_address1 *}                        {* edit_address2 *}                        {* edit_city *}                        {* edit_state *}                        {* edit_zip *}                        {* edit_birthdate *}                        {* edit_gender *}                        {* politicalViews *}                      <div class="newsletter-container">                         <h2>Newsletter Subscriptions</h2>                         <div class="hr"></div>                         <div class="news-sub-form">                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="greta-wire"><input type="checkbox" name="" id="foxpromosIDList_139" value="" />GetaWire Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking News Alerts</a></label>                            <label for="bo-opinion"><input type="checkbox" name="" id="foxnewsletterIDList_96" value="" />Best of Opinion</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxbusinessIDList_32" value="" />Fox Business Breaking News Alerts</a></label>                            <label for="pow-pol"><input type="checkbox" name="" id="foxnewsletterIDList_173"  value="" />Daily Politics</a></label>                            <label for="ceo-news"><input type="checkbox" name="" id="foxnewsletterIDList_90" value="" />CEO Newsbrief</a></label>                            <label for="fox-411"><input type="checkbox" name="" id="foxnewsletterIDList_106" value="" />Fox 411</a></label>                            <label for="scitech-geek"><input type="checkbox" name="" id="foxnewsletterIDList_153" value="" />SciTech Geek Sheet</a></label>                            <label for="fb-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_151" value="" />Fox Business Morning Headlines</a></label>                            <label for="health-weekly"><input type="checkbox" name="" id="foxnewsletterIDList_160" value="" />Health Weekly Dose</a></label>                            <label for="most-pop"><input type="checkbox" name="" id="foxnewsletterIDList_69" value="" />Fox Business Most Popular</a></label>                            <label for="latino-rep"><input type="checkbox" name="" id="foxnewsletterIDList_178" value="" />Latino Report</a></label>                            <label for="sbc-week"><input type="checkbox" name="" id="foxnewsletterIDList_108" value="" />Small Business Center Weekly Report</a></label>                            <label for="fn-mag"><input type="checkbox" name="" id="foxpromosIDList_174" value="" />Fox News Magazine</a></label>                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="fan-scoop"><input type="checkbox" name="" id="foxpromosIDList_43" value="" />Fox Fan Scoop</a></label>                            <label for="fn-fired"><input type="checkbox" name="" id="foxnewsletterIDList_99" value="" />Fox Nation Fired Up</a></label>                         </div>                      </div>                      <h2>Commenting Notifications</h2>                      <div class="hr"></div>                      {* table *}                      <div class="capture_fox_clearfix">                        <div class="capture_right capture_checkbox">                          {* autofollow_conversations *}                        </div>                      </div>                      <div class="hr"></div>                                            <h2>Linked Accounts</h2>                      <div class="hr"></div>                          {* linkedAccounts *}                          {* linkAccountContainer *}                              <h1>Linked Accounts</h1>                              <div class="hr"></div>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Facebook" height="24" width="24" /></span>&nbsp;&nbsp;Facebook</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Google" height="24" width="24" /></span>&nbsp;&nbsp;Google</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Twitter" height="24" width="24" /></span>&nbsp;&nbsp;Twitter</a>                               <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Yahoo" height="24" width="24" /></span>&nbsp;&nbsp;Yahoo</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="LinkedIn" height="24" width="24" /></span>&nbsp;&nbsp;Linkedin</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="AOL" height="24" width="24" /></span>&nbsp;&nbsp;AOL</a>                          {* /linkAccountContainer *}                      <div class="hr"></div>                        <div class="capture_form_item">                          {* submitButton *}                        </div>                    {* /editProfileForm *}                      </div>                  </div>                      <div class="profile-footer">                         <div class="fox-logo">                         </div>                         <p>&copy;2012 FOX News Network, LLC. All rights reserved.</p>                         <p>This material may not be published, broadcast, rewritten, or redistributed.</p>                         <p>All market data delayed 20 minutes.</p>                         <p><a href="http://www.foxnews.com/about/privacy-policy" target="_blank">Privacy</a> - <a href="http://www.foxnews.com/about/terms-of-use" target="_blank">Terms</a> - <a href="http://help.foxnews.com/index.html" target="_blank">FAQ</a></p>                      </div><div id="how-to" ><h1>How does it work?</h1><p>With the points you earn you will be rewarded with increases in rank and recognition within the Fox News community.</p><div class="key"><span>Levels</span><span>Points required</span><span>Get more points:</span></div><div class="col"><ul><li> <div></div> <span>Rookie</span> <strong>0</strong> </li><li> <div></div> <span>Apprentice</span> <strong>250</strong> </li><li> <div></div> <span>Specialist</span> <strong>1,500</strong> </li><li> <div></div> <span>Commentator</span> <strong>5,000</strong> </li><li> <div></div> <span>Pundit</span> <strong>10,000</strong> </li><li> <div></div> <span>Analyst</span> <strong>30,000</strong> </li><li> <div></div> <span>Advisor</span> <strong>60,000</strong> </li><li> <div></div> <span>Captain</span> <strong>1,000,000</strong> </li></ul></div><div class="col"><a href="http://www.foxnews.com/alerts/subscribe.html" target="_blank">Subscribe to our newsletters</a><a href="http://ureport.foxnews.com/" target="_blank">Submit a uReport</a><a href="http://video.foxnews.com/" target="_blank">Watch the latest videos</a></div><a style="position: absolute; cursor: pointer; z-index: 1000;" href="#" class="janrain_modal_closebutton"></a></div>              </div>        <div style="display:none;" id="newPasswordSuccess" class="capture_med_footer">              <h1>You did it!</h1>              <div class="hr"></div>              <p>Your password has been successfully changed.</p>            <div class="capture_footer">                <a href="#" class="capture_btn capture_secondary">Close</a>            </div>        </div>        <div style="display:none;" id="changepassword">            <h1>Change Your Password</h1>            <div class="hr"></div>            {* newPasswordForm *}                  {* oldpassword *}                  {* newpassword *}                  {* newpasswordConfirm *}                  <div class="capture_textRight">                     <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                     {* newPasswordFormButton *}                   </div>            {* /newPasswordForm *}        </div><div style="display: none;" id="publicProfile">        <h1>Member Profile</h1><div class="make-acc">Don\'t have an account? <a onclick="window.janrain.capture.ui.renderScreen(\'signIn\')">Create One Now</a></div>        <div class="capture_profile_section">            <div class="capture_profile_pic capture_default inline">                <div id="profile_pic" class="capture_default">                    {* profilePhotoCustom *}                </div>            </div>        </div>        <div class="capture_profile_section">             <h1 class="capture_display_name">{* public_displayName *}</h1>            {* created *}            {* public_city *}            {* public_state *}            {* public_country *}            {* public_birthdate *}            {* public_gender *}        </div>        <div class="capture_data_item">          {* slider_public *}        </div><div class="rank"><h2>Rank</h2><div></div><span>advisor</span><img src="//global.fncstatic.com/static/v/all/img/loader-trans-3.gif" /></div>        <div class="user-stats">        <h2>User Stats</h2>        <div class="hr"></div>		  <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public#{* public_displayName *}">Comments</a></h3>            <h2 class="capture_right" id="fox_lf_comments" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public?tab=ureport#{* public_displayName *}">uReports</a></h3>            <h2 class="capture_right" id="fox_ur_reports"><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Likes</h3>            <h2 class="capture_right" id="fox_lf_likes" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Shares</h3>            <h2 class="capture_right" id="fox_jr_shares" >{* public_shares *} </h2>        </div>        </div></div><div style="display:none;" id="signIn">            <h1>Sign In</h1>            <div class="capture_signin">                <h2>With your existing account</h2>                <div class="hr"></div>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24 janrain-provider-icon-facebook-custom"></span>&nbsp;&nbsp;Facebook</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24 janrain-provider-icon-google-custom"></span>&nbsp;&nbsp;Google</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24 janrain-provider-icon-twitter-custom"></span>&nbsp;&nbsp;Twitter</a>                         <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24 janrain-provider-icon-yahoo-custom"></span>&nbsp;&nbsp;Yahoo</a>                       <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24 janrain-provider-icon-linkedin-custom"></span>&nbsp;&nbsp;Linkedin</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24 janrain-provider-icon-aol-custom"></span>&nbsp;&nbsp;AOL</a>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">With a Fox News account</h2>                     <a href="#" data-capturescreen="traditionalRegistration" class="capture_right capture_fox_marginTop">Sign Up &rarr;</a>                </div>                <div class="hr"></div>                    {* #userInformationForm *}                        {* traditionalSignIn_emailAddress *}                        {* traditionalSignIn_password *}                        <div class="capture_fox_buttoncol">                             <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                            {* traditionalSignIn_signInButton *}                        </div>                    {* /userInformationForm *}                    <p>Find answers to your questions about the Fox News Community in our <a href="http://help.foxnews.com/index.html" target="_blank">FAQs</a>.</p>            </div>        </div>        <div style="display:none;" id="returnSocial">                <h1>Sign In</h1>                <div class="hr"></div>                <h2>Welcome back, {* welcomeName *} (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">Sign In with your account</h2>                     <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>                <div class="hr"></div>                    <a href="#" onclick="janrain.engage.signin.triggerFlow(\'{* returnProvider *}\')" class="capture_secondary capture_fox_social_btn capture_{* returnProvider *}"><span class="janrain-provider-icon-24 janrain-provider-icon-{* returnProvider *}-custom"></span>&nbsp;&nbsp;{* returnProvider *}</a>                <div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>            </div>                <div style="display:none;" id="returnTraditional">            <h1>Sign In</h1>            <div class="hr"></div>            <h2>Welcome back, <span id="displayNameData"></span>  (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>            <div class="capture_fox_clearfix">                <h2 class="capture_left">Sign in with your account</h2>                <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>            <div class="hr"></div>                        {* #userInformationForm *}                            {* traditionalSignIn_emailAddress *}                            {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                                {* traditionalSignIn_signInButton *}                            </div>                        {* /userInformationForm *}<div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>                    </div>        <div style="display:none;" id="socialRegistration">                <h1>You\'re Almost Done!</h1>                <p>Complete the following form to submit your registration.</p>                <div class="hr"></div>                {* #socialRegistrationForm *}                    {* socialRegistration_firstName *}                    {* socialRegistration_lastName *}                    {* socialRegistration_displayName *}                    {* socialRegistration_emailAddress *}                    {* registration_birthday *}                    <h2>Terms of Service</h2>                    <div class="hr"></div>                    {* agreeToTerms *}                    <div class="capture_textRight">                        {* socialRegistration_button *}                </div>                {* /socialRegistrationForm *}        </div>        <div style="display:none;" id="traditionalRegistration">                <h1>Create a Fox News Account</h1>                <p>Already have an account? <a href="#" data-capturescreen="signIn">Sign In &rarr;</a></p>                <div class="hr"></div>                {* #registrationForm *}                    {* traditionalRegistration_firstName *}                    {* traditionalRegistration_lastName *}                    {* traditionalRegistration_displayName *}                    {* traditionalRegistration_emailAddress *}                    {* traditionalRegistration_password *}                    {* traditionalRegistration_passwordConfirm *}                    {* registration_birthday *}                    <div class="capture_fox_clearfix">                        <h2 class="capture_left">Subscribe to Fox News Email Newsletters</h2>                         <div class="capture_right capture_fox_marginTop">Optional</div>                    </div>                    <div class="hr"></div>                          <div class="news-sub-form-reg">                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxpromosIDList_32" value="" />Fox Business Breaking Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking Alerts</a></label>                          </div>                    <h2>Security Check</h2>                    <div class="hr"></div>                    {* captcha *}                    {* agreeToTerms *}                    <div class="capture_textRight">                    {* createAccountButton *}                    </div>                {* /registrationForm *}        </div>                <div style="display:none;" id="registrationSuccess">                <h1>Thank you for registering!</h1>                <div class="hr"></div>                <p>Once you confirm your email address you will be able to access commenting and exclusive content on all the Fox News Digital websites!</p>                <h2>Verify your email</h2>                <div class="hr"></div>                <p>We just sent an email to your account to verify your email address. Check your inbox and click on the link to confirm your account.</p>                <!--                 <p>You are also signed up for the following newsletters:</p>                <ul>                    <li>FPO</li>                    <li>FPO</li>                </ul>                -->                <div class="capture_textRight">                    <a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_primary">Close</a>                </div>        </div>        <div style="display:none;" id="forgotPassword">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <h2>Enter your current email address, and we\'ll send you instructions to create a new password.</h2>            {* #forgotPasswordForm *}                {* forgotPassword_emailAddress *}                <div class="capture_textRight">                    {* forgotPassword_sendButton *}                </div>            {* /forgotPasswordForm *}        </div>        <div style="display:none;" id="forgotPasswordSuccess">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <div class="capture_fox_clearfix">              <h2 class="capture_left">Success! You should receive an email shortly with instructions to change your password.</h2>              <a href="#" class="capture_btn capture_primary capture_right" onclick="janrain.capture.ui.modal.close()">Close</a>            </div>            </div><div style="display:none;" id="mergeAccounts">{* mergeAccounts {"custom": true} *} <h1>Create a Fox News Account</h1><div class="hr"></div><h2>It looks like you\'ve been here before.<br /><br>We already have an account for: <br /><span class="capture_fox_alert">{| current_emailAddress |}</span></h2><h2>Connect this session with your existing account</h2><div class="hr"></div><button id="capture_mergeAccounts_mergeAccounts_connectButton" name="mergeAccounts_connectButton" data-capturefield="mergeAccounts_connectButton" type="button" class="capture_secondary capture_fox_social_btn"><span class="janrain-provider-icon-24 janrain-provider-icon-{| existing_provider_lowerCase |}-custom"></span><span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp; Connect</button><a href="#" data-capturescreen="forgotPassword">Forgot Password?</a><br><h2>Not You? Continue creating a new account</h2><div class="hr"></div><button name="mergeAccounts_createButton" data-capturefield="mergeAccounts_createButton" type="submit" class="capture_secondary capture_fox_social_btn capture_{| current_provider_lowerCase |}" id="capture_mergeAccounts_mergeAccounts_createButton" style="display:none"><span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp;{| current_provider |}</button></div>        <div style="display:none;" id="traditionalAuthenticateMerge">            <h1>Sign in to complete account merge</h1>            <div class="hr"></div>            {* #tradAuthenticateMergeForm *}                {* traditionalSignIn_emailAddress *}                {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                    {* traditionalSignIn_signInButton *}					  <a href="#" data-capturescreen="forgotPassword">Forgot Password?</a><br>        		  </div>             {* /tradAuthenticateMergeForm *}        </div>';return a;}());window.FOX_AuthJanrain_CONFIG=(function(d){function b(g){return !!(d.location.hostname.indexOf(g)>-1);}var c=true,a={},f=d.location.hash;d.FOX_Auth_live_settings=(typeof d.FOX_Auth_live_settings==="undefined")?false:d.FOX_Auth_live_settings;if(!c&&(f.indexOf("live")>-1||d.FOX_Auth_Live_Settings)){c=true;}else{if(f.indexOf("dev")>-1){c=false;}else{if(b("pvw-dev")){c=false;}}}a.live=c;if(c){a={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",siteURL:"http://www.foxnews.com/",profile:"http://quill.foxnews-1.fyre.co/profile/",activityAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}",activityActiveAPI:"http://www.foxnews.com/feeds/app/user/comments/active?callback={cb}&uuid={uuid}",activityPublicRequestAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}&userInfoFormat=true",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://login.foxnews.com",apiURL:"https://signin.foxnews.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews-prod/load.js",appId:"macbnjrmzryj7utchqmtukf3se",clientId:"t6emets785a92rr2zc5wkbnrsy59kyny",captureServer:"https://signin.foxnews.com",federateServer:"https://sso.foxnews.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news",publicRequestAPI:"http://www.foxnews.com/feeds/app/user/photos?username="},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"www",subscribe:"http://www.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://www.foxnews.com/feeds/app/newsletters/"}};a.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.orig.css"];a.editProfile="http://www.foxnews.com/community/user/profile/edit";}else{a={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",profile:"http://quill.foxnews-1.fyre.co/profile/",siteURL:"http://www.foxnews.com/",activityAPI:"http://v8-qa.foxnews.com/feed/apps/user/comments/{uuid}.json?callback={cb}",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://fox-news-dev.rpxnow.com",apiURL:"https://fox-news.dev.janraincapture.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews/load.js",appId:"n49qmf6h6ssvuvnevbxgj88h97",clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q",captureServer:"https://fox-news.dev.janraincapture.com",federateServer:"https://fox-news-dev.janrainsso.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news-dev",publicRequestAPI:"http://www.foxnews.com/feeds/app/user/photos?username="},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"v8-qa",subscribe:"http://v8-qa.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://v8-qaportala.lan.vig.tpa.foxnews.com:8080/foxnewsletter/unsubscribe.json"}};a.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.orig.css"];a.editProfile="http://global.fncstatic.com/static/v/all/html/edit-profile.html";}if(d.location.host.indexOf("ureport")>-1){a.xdcomm=d.location.protocol+"//"+location.host+"/xdcomm.html";a.logout=d.location.protocol+"//"+location.host+"/logout.html";}else{a.xdcomm=d.location.protocol+"//"+location.host+"/static/v/all/html/xdcomm.html";a.logout=d.location.protocol+"//"+location.host+"/static/v/all/html/logout.html";}a.templateUrl="/static/v/all/html/auth-tpl.html";return a;})(window);window.AuthenticationService_Janrain=(function(h,p){function H(L){return !!(p.location.hostname.indexOf(L)>-1);}if(!p.console){p.console={log:function(){},error:function(){}};}var n=function(){var M=false;if(M&&p.console){try{console.log.apply(console,arguments);}catch(L){console.log("err",L,arguments);}}};var A=(function(){var L=function(N){var M,O,P={},Q=this;for(M=0,O=N.length;M<O;M+=1){N[M][2].prototype=N[M][1];P[N[M][0]]=new N[M][2];}for(var R in P){L.prototype[R]=P[R];}};return L;})();var F=function(){},o=function(){},s=function(){},D=function(){},g=function(){},C=function(){},J=function(){},m=function(){},d=function(){},f=function(){},w=function(){},c=function(){},r=function(){},l={},E={},I={},B={},k={},z={},j={},q={},u={},v={},b={},t={},G={};var K=p.FOX_AuthJanrain_CONFIG;g=function(){};z={loadExtJs:function(P,R,Q,N){var O=document.createElement("script"),L;O.type="text/javascript";O.id=R||"";O.async=true;O.setAttribute("type","text/javascript");if(N==="share"){O.src="http://widget-cdn.rpxnow.com/js/lib/fox-news/widget.js";}else{O.src=document.location.protocol+"//"+((N==="www")?"www.":"")+P;}if(typeof Q==="function"){O.onload=O.onerror=O.onreadystatechange=function(S){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){Q();}};}var M=document.getElementsByTagName("script")[0];M.parentNode.insertBefore(O,M);},assert:function(L,M){return(typeof L===M)?true:false;},domTest:function(L){return(L.length!=0)?true:false;},getDomain:function(){var O=p.location,M=O.hostname,N=O.protocol,L=M.split(".");return"www."+L[(L.length-2)]+"."+L[(L.length-1)];}};c=function(){};t={setDomReady:function(M){var O=h("#authentication"),P=h("#account"),Q=P.find(".user-options"),L=h("body"),N=h("#section-content");var R={acc:P,body:L,user:P.find(".username"),login:O.find(">li:last-child"),authen:O,name:Q.find("span"),register:O.find(".first"),noAccount:O,userOptions:Q,accountNav:P.find(".encapsulate"),profile:Q.find("ul > li.first"),logout:Q.find("ul > li:last-child"),hasAccount:P.find(".username"),publicProfile:function(){return{likes:h("#fox_lf_likes"),shares:h("#fox_jr_shares"),ureport:h("#fox_ur_reports"),comments:h("#fox_lf_comments")};},whatCounts:function(){return h(".news-sub-form");},uReport:function(){var S=h("#account");return{acc:S,redBtn:h("#main").find(".red-butt ")};},sectionContent:N};AUTH_Manager.onReady("capture",function(){});M(R);}};m=function(){};B={token:null,template:null,getToken:function(){var L=this;try{if(p.localStorage){L.token=localStorage.getItem("janrainCaptureToken");}else{}}catch(M){n(M);}},classLogin:"capture_modal_open",janrainFlow:false,state:{janrain:false,ureport:false,livefyre:false,template:false,backplane:false,badgeville:false},dataConfig:{janrain:{clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q"},livefyre:{},ureport:{},whatcounts:{}},loadTemplate:function(){var X=this,M,Q,S,U=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified","editProfile"],L=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess"],P=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","signIn","registrationVerify","registrationVerified","returnTraditional","returnSocial","forgotPasswordSuccess"];Q=document.createElement("div");Q.id="templateHolder";S=(p.FOX_Janrain_Auth_TPL)?true:false;if(S){var V=h(FOX_Janrain_Auth_TPL);if(X.janrainFlow==="profileFlow"||X.janrainFlow==="publicFlow"){t.setDomReady.sectionContent.append(Q);for(var T=0,O=V.length;T<O;T+=1){for(var R=0,N=L.length;R<N;R+=1){if(U[R]===V[T].id){V[T].innerHTML="";V[T].id="";}}}h(Q).html(V);E.init();}else{if(X.janrainFlow==="authFlow"){t.setDomReady.body.append(Q);for(T=0,O=V.length;T<O;T+=1){for(R=0,N=U.length;R<N;R+=1){if(U[R]===V[T].id){V[T].innerHTML="";V[T].id="";}}}h(Q).html(V);E.init();}else{t.setDomReady.sectionContent.append(Q);var W=[];for(T=0,O=V.length;T<O;T+=1){var Y=false;for(R=0,N=P.length;R<N;R+=1){if(P[R]===V[T].id){Y=true;}}if(!Y){V[T].innerHTML="";V[T].id="";}}h(Q).html(V);E.init();}}B.state.template=true;}else{h.ajax({type:"GET",url:K.templateUrl,dataType:"html",beforeSend:function(){},success:function(ab){if(X.janrainFlow==="profileFlow"){t.setDomReady.sectionContent.append(Z);Z=h(Z).html(ab);}else{var aa=ab.replace(/\'/gi,"'");t.setDomReady.body.append(Z);var Z=t.setDomReady.body.find("#templateHolder");Z.html(aa);Z.find("#editProfile").remove();}B.state.template=true;E.init();}});}}};F=function(){};l={};o=function(){if(typeof p.janrain!=="object"){p.janrain={};}p.janrain.settings={};p.janrain.settings.capture={};p.janrain.settings.share={};janrain.settings.appUrl=K.janrain.appUrl;janrain.settings.custom=true;janrain.settings.capture.flowVersion="HEAD";janrain.settings.capture.responseType="token";janrain.settings.capture.flowName="foxNewsFlow";janrain.settings.capture.stylesheets=K.styleUrl;janrain.settings.tokenUrl=p.location.protocol+"//"+p.location.host+"/";janrain.settings.capture.appId=K.janrain.appId;janrain.settings.capture.redirectUri=p.location.protocol+"//"+p.location.host;janrain.settings.capture.clientId=K.janrain.clientId;janrain.settings.capture.captureServer=K.janrain.captureServer;janrain.settings.capture.recaptchaPublicKey="6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP";janrain.settings.capture.editPhotoAfterUpload=true;janrain.settings.type="embed";janrain.settings.tokenAction="event";janrain.settings.format="two column";janrain.settings.capture.modalBorderOpacity=0;janrain.settings.capture.modalBorderWidth=0;janrain.settings.capture.modalBorderRadius=2;janrain.settings.capture.modalCloseHtml='<span class="janrain-icon-16 janrain-icon-ex"></span>';janrain.settings.capture.modalBorderColor="transparent";janrain.settings.language="en";janrain.settings.capture.setProfileCookie=true;janrain.settings.capture.keepProfileCookieAfterLogout=true;janrain.settings.capture.hideSavedProfileMessageDelay=15000;switch(B.janrainFlow){case"authFlow":janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;case"profileFlow":janrain.settings.autoSave=true;janrain.settings.screenToRender="editProfile";break;case"emailFlow":janrain.settings.screenToRender="registrationVerify";janrain.settings.capture.registerFlow="socialRegistration";break;case"passwordFlow":janrain.settings.screenToRender="resetPassword";janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;}janrain.settings.capture.backplane=true;janrain.settings.capture.backplaneBusName=K.janrain.backplaneBusName;janrain.settings.capture.federate=true;janrain.settings.capture.federateServer=K.janrain.federateServer;janrain.settings.capture.federateXdReceiver=K.xdcomm;janrain.settings.capture.federateLogoutUri=K.logout;janrain.settings.share.providers=["facebook","twitter","linkedin","email"];janrain.settings.share.providersEmail=["google","yahoo"];janrain.settings.share.modes=["broadcast","contact"];janrain.settings.share.attributionDisplay=false;janrain.settings.share.previewMode=0;janrain.settings.share.modalBackgroundColor="#000000";janrain.settings.share.modalBorderRadius="2";janrain.settings.share.modalOpacity="0";janrain.settings.share.modalWidth="0";janrain.settings.share.bodyBackgroundColor="#F3F3F3";janrain.settings.share.bodyBackgroundColorOverride=true;janrain.settings.share.bodyColor="#333";janrain.settings.share.bodyContentBackgroundColor="#ffffff";janrain.settings.share.bodyFontFamily="Helvetica";janrain.settings.share.bodyTabBackgroundColor="#F3F3F3";janrain.settings.share.bodyTabColor="#424242";janrain.settings.share.elementBackgroundColor="#f3f3f3";janrain.settings.share.elementBorderColor="#ccc";janrain.settings.share.elementBorderRadius="3";janrain.settings.share.elementButtonBorderRadius="3";janrain.settings.share.elementButtonBoxShadow="0";janrain.settings.share.elementColor="#333333";janrain.settings.share.elementHoverBackgroundColor="#333333";janrain.settings.share.elementLinkColor="#173951";if(B.janrainFlow==="profileFlow"){janrain.settings.packages=["login","capture"];}else{if(B.janrainFlow==="publicFlow"){janrain.settings.packages=["login","capture"];janrain.settings.capture.stylesheets=[];}else{janrain.settings.packages=["login","capture","share"];}}janrain.ready=true;};E={config:{capture:{url:K.janrain.jsURL,id:"janrainAuthWidget"},share:{url:"default",id:"janrainWidgets",type:"share"}},session:null,sessionType:"",reset:false,init:function(){var L=this;L.widgetOnload();L.captureWidgetOnLoad();z.loadExtJs(L.config.capture.url,L.config.capture.id,L.loadedJS.loadJan);return this;},API:{requestSent:false,url:K.janrain.apiURL,token:"",updateAPI:function(L,N){var M=this;if(L==="livefyre"){return{type_name:"user",access_token:M.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+u.userLivefyre.id+'"}}}'};}else{if(L==="livefyre_temp"){return{type_name:"user",access_token:M.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+u.uuid+'@foxnewsprod.fyre.co"}}}'};}else{if(L==="badgeville_id"){return{type_name:"user",access_token:M.token,attributes:'{"externalServices":{"badgeville_id":"'+u.uuid+'@user.foxnews.com"}}'};}else{if(L==="share"){if(u.userJanrain.shares==null){u.userJanrain.shares=0;}u.userJanrain.shares+=1;return{type_name:"user",access_token:M.token,attributes:'{"shares" : '+u.userJanrain.shares+"}"};}else{if(L==="test"){return{type_name:"user",access_token:M.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+N+'"}}}'};}}}}}},execute:function(M,L){var O=this,N="FOX_Janrain_EXEC";L.jsonp=N;if(typeof p[N]!=="function"){p[N]=function(P){if(P.code==414){j.janrain.tokenRefreshed();j.janrain.signOut();j.domEvents.logoutSuccess();return false;}else{if(P.code==310){j.domEvents.logoutSuccess();j.janrain.signOut();return false;}else{if(!P.code&&!P.stat){j.domEvents.logoutSuccess();j.janrain.signOut();return false;}else{if(P.stat==="ok"){O.requestSent=true;u.uuid=P.result.uuid;u.email=P.result.email;u.userJanrain=P.result;u.displayName=P.result.displayName;j.displayName();if(h("#authentication").css("display")==="block"){j.domEvents.loginSuccess();}if(t.setDomReady.acc.hasClass("alt-style")){j.displayShowsProfile();}q.uLogin(E.API.token,u.email,u.uuid);G.idmsLogin(E.API.token,u.email,u.uuid);if(P.result.externalServices.livefyre.livefyre_id==null||P.result.externalServices.livefyre.livefyre_id==="null"||P.result.externalServices.livefyre.livefyre_id===""){O.update("entity.update",O.updateAPI("livefyre_temp"));}if(P.result.externalServices.badgeville_id==null||P.result.externalServices.badgeville_id==="null"||P.result.externalServices.badgeville_id===""){O.update("entity.update",O.updateAPI("badgeville_id"));}k.setUp();}}}}};}h.ajax({data:L,url:O.url+M,dataType:"script",async:true,cache:true});},update:function(M,L){var O=this,N="FOX_Janrain_UPD";L.jsonp=N;if(typeof p[N]!=="function"){p[N]=function(P){};}h.ajax({data:L,url:O.url+M,dataType:"script",async:true,cache:true});}},loadedJS:{loadJan:function(){if(typeof janrain==="object"){B.state.janrain=true;}},loadShare:function(){}},widgetOnload:function(){p.janrainWidgetOnload=function(){AUTH_Manager.fireReady("janrain");};return this;},captureWidgetOnLoad:function(){p.janrainCaptureWidgetOnLoad=function(){var L=janrain.events;AUTH_Manager.fireReady("capture");L.onCaptureLoginSuccess.addHandler(j.janrain.successfulLogin);L.onCaptureRegistrationSuccess.addHandler(j.janrain.successfulRegistration);L.onCaptureRegistrationStart.addHandler(j.janrain.registrationStart);L.onCaptureAccessDenied.addHandler(j.janrain.accessDenied);L.onAuthWidgetLoad.addHandler(j.janrain.onAuthWidgetLoad);L.onModalClose.addHandler(j.janrain.onModalClose);L.onCaptureValidationSuccess.addHandler(j.janrain.validation.onValidationSuccess);var M=z.domTest(h("#livefyre_comment_stream")),O=h("#disqus_thread");if(!M){var N=document.createElement("div");N.id="livefyre_comment_stream";if(O.length>0){O.attr("id","livefyre_comment_stream");O.empty();M=true;}B.livefyreSet=true;}else{O.remove();B.livefyreSet=false;}if(M&&B.janrainFlow==="authFlow"){L.onCaptureBackplaneReady.addHandler(j.janrain.backplaneReady);}L.onCaptureRenderComplete.addHandler(j.janrain.screen.onRenderComplete);L.onCaptureProfileSaveSuccess.addHandler(j.janrain.screen.editProfile.onProfileUpdate);L.onCaptureAutoSaveUpdate.addHandler(j.janrain.screen.editProfile.onProfileAutoSave);L.onCaptureProfileSaveFailed.addHandler(j.janrain.screen.editProfile.onProfileFailedSave);L.onCaptureScreenShow.addHandler(j.janrain.screen.onScreenShow);L.onCaptureModalReady.addHandler(j.janrain.screen.uiReady);L.onCaptureSessionFound.addHandler(j.janrain.sessionFound);L.onCaptureSessionNotFound.addHandler(j.janrain.sessionNotFound);L.onCaptureSessionEnded.addHandler(j.janrain.sessionEnded);L.onCaptureLoginSuccess.addHandler(E.isLoggedIn.masterTrigger);L.onCaptureRegistrationSuccess.addHandler(E.isLoggedIn.masterTrigger);L.onCaptureSessionFound.addHandler(E.isLoggedIn.masterTrigger);L.onCaptureSessionNotFound.addHandler(E.isLoggedIn.masterTrigger);L.onCaptureSessionEnded.addHandler(E.isLoggedIn.masterTrigger);L.onCaptureExpiredToken.addHandler(j.janrain.tokenExpired);L.onCaptureFederateRefreshedToken.addHandler(j.janrain.onRefreshToken);if(B.janrainFlow==="authFlow"){}L.onCaptureError.addHandler(j.janrain.errorEvent);L.onCaptureEmailSent.addHandler(j.janrain.emailSent);p.janrain.capture.ui.start();};return this;},extend:function(L,M){janrain.events[L].addHandler(M);},isLoggedIn:{buffer:[],hasActiveSession:function(L){L(janrain.capture.ui.hasActiveSession());},eventDriven:function(L,M){var N=this;N.buffer.push([L,M]);},masterTrigger:function(N){var P=E.isLoggedIn;if(P.buffer.length==0){return false;}var Q=janrain.capture.ui.hasActiveSession(),O=false;for(var L=0,M=P.buffer.length;L<M;L+=1){switch(P.buffer[L][0]){case"found":if(Q&&E.sessionType==="found"){P.buffer[L][1](Q);O=true;}break;case"notfound":if(!Q&&E.sessionType==="notfound"){P.buffer[L][1](Q);O=true;}break;case"logout":if(!Q&&E.sessionType==="logout"){P.buffer[L][1](Q);O=true;}break;case"signin":if(Q&&(E.sessionType==="signin")){P.buffer[L][1](Q);O=true;}break;case"register":if(Q&&(E.sessionType==="register")){P.buffer[L][1](Q);O=true;}break;default:P.buffer[L][1](Q);break;}if(O){break;}}}},publicProfileLinkUUID:function(){}};D=function(){var L=k;p.BadgevilleAsynchInit=function(){var M=false;p.Badgeville.BackplaneSubscription=p.Backplane.subscribe(function(O){var N;try{if(!O.message.payload.identities.entry){n("Something is wrong with backplane");return false;}else{n("Something is right with backplane");return false;N=O.message.payload.identities.entry;}}catch(U){n(U,"Backplane message has a problem");N=O.payload.identities.entry;}var T=N,Q=/uuid=(\S+)/gi,P;if(O.type=="identity/login"&&p.Badgeville.Settings.player==null){var S;M=true;try{S=u.userJanrain.photos[0].value;}catch(U){S=k.config.avatar;}try{P=T.id.match(Q)[0];P=P.replace("uuid=","");}catch(R){}u.userBadgeville={email:P+k.config.username,display_name:T.displayName,picture_url:S};p.Badgeville.setPlayer(u.userBadgeville);}});if(!M&&typeof u.userJanrain.uuid!=="undefined"){L.events.playerSignIn();}else{}p.Badgeville.Settings.backplaneLink=false;p.Badgeville.Settings.showToast=1;p.Badgeville.Settings.showWaffle=true;p.Badgeville.Settings.croutonShow=0;p.Badgeville.Settings.signIn=function(){};p.Badgeville.Settings.signOut=function(){};p.Badgeville.afterSetPlayer=function(N,O){if(k.buffer.length>0){k.events.useBuffer();}if(!L.afterPlayerSet){L.afterPlayerSet=true;L.socialNetworkingIntegration();}if(B.janrainFlow==="profileFlow"){k.getBadgeFromSelf.gatherUserInfo();}};p.Badgeville.ready(function(){var N=p.bpReady;L.getBadgesFromOthers.getPlayer(L.getBadgesFromOthers.email);});};};k={config:{id:"badgeville",domain:"foxnews.com",username:"@user.foxnews.com",key:"5302cf0355a5410f0beacdf2de891c52",url:"api.badgeville.com/v4/badgeville-current.js?key=5302cf0355a5410f0beacdf2de891c52&domain=foxnews.com&debugInit=false",avatar:"http://livefyre-avatar.s3.amazonaws.com/a/anon/50.jpg"},afterPlayerSet:false,buffer:[],setUp:function(){var L=this;if(typeof p.Badgeville==="undefined"){L.loadBadgeville();}else{}},loadBadgeville:function(){var L=this;z.loadExtJs(L.config.url,L.config.id,L.badgeLoaded);},badgeLoaded:function(){if(typeof Badgeville==="function"){B.state.badgeville=true;}},credit:function(L){if(typeof L!=="object"){p.Badgeville.credit(L,function(M){});}else{p.Badgeville.credit(L);}},creditOther:function(L){p.Badgeville.creditOther(L[0],L[1],L[2]);},trigger:function(M,O,L){try{n("Checking",M,(typeof p.Badgeville),E.session,(typeof p.Badgeville.ready));}catch(N){}if(typeof p.Badgeville==="undefined"&&!E.session){try{if(typeof p.Badgeville.ready!=="function"){return false;}}catch(N){}}else{try{if(M in k.events.tracking){if(E.session){k.events.tracking[M](O,L);}}else{n("Wrong Parameter is passed to Badgeville Credit Trigger!");}}catch(N){n("e",N);}}},socialNetworkingIntegration:function(){var M=this,L=M.social;for(var N in L){L[N]();}},events:{unsubscribe:function(){if(typeof Backplane!=="undefined"){p.Badgeville.setPlayer();}},playerSignIn:function(){var M,L=this;try{M=u.userJanrain.photos[0].value;}catch(N){M=k.config.avatar;}u.userBadgeville={email:u.userJanrain.uuid+k.config.username,display_name:u.userJanrain.displayName,picture_url:M};p.Badgeville.setPlayer(u.userBadgeville);},useBuffer:function(){try{if(typeof p.Badgeville.ready==="function"){for(var M=0,N=k.buffer.length;M<N;M+=1){if(k.buffer[M]==="newsletterSub"){for(var L in b.config.subscribeList){if(b.config.subscribeList[L].length>0){for(var Q=0,N=b.config.subscribeList[L].length;Q<N;Q+=1){var O=b.config.subscribeList[L][Q];k.trigger(k.buffer[M],L+O);}}}}else{k.trigger(k.buffer[M]);}}k.buffer=[];}}catch(P){setTimeout(k.events.useBuffer,500);}},playerSignOut:function(L){},playerUpdate:function(L,M){},tracking:{newUser:function(L){var L=L||u.uuid;k.credit({verb:"new user",NewUserId:L});},chat:function(){k.credit({verb:"chat",siteID:p.location.href});return this;},viewVideo:function(L){k.credit({verb:"view videos on the site",videoID:L});return this;},completeProfile:function(L){k.credit({verb:"completed profile",uuid:L});return this;},friendTag:function(){k.credit({verb:"friend tag"});return this;},spank:function(L){k.creditOther(L);return this;},commentLike:function(L){k.creditOther(L);return this;},contentShare:function(L){k.credit({verb:"share",articleid_type:L});return this;},newsletterSub:function(S,P){if(typeof S==="object"){try{if(P&&P!==u.userJanrain.email){return false;}}catch(Q){}for(var M in S){var N=S[M].length;if(N>0){for(var R=0;R<N;R+=1){var O=setTimeout;O(L(M,S[M][R],O),100);}}}function L(T,V,U){k.credit({verb:"newsletter subscription",newsletterID:T+V});clearTimeout(U);}}else{if(typeof P==="undefined"){k.credit({verb:"newsletter subscription",newsletterID:S});return this;}else{try{if(P===u.userJanrain.email){k.credit({verb:"newsletter subscription",newsletterID:S});return this;}}catch(Q){}}}return this;},ureportApproved:function(L){k.credit({verb:"ureport approved",uReportMediaID:L});return this;},returnEightPerMonth:function(){k.credit("visits");return this;}},chatCheck:function(){if((p.location.host.indexOf("live")>-1)||(p.location.href.indexOf("/live-event")>-1)||(p.location.href.indexOf("/sunday-housecall")>-1)){k.buffer.push("chat");}}},social:{facebook:function(){try{FB.Event.subscribe("edge.create",function(M){k.trigger("contentShare",p.location.href+"#facebook");E.API.update("entity.update",E.API.updateAPI("share"));});}catch(L){}},twitter:function(){try{twttr.events.bind("tweet",function(M){k.trigger("contentShare",p.location.href+"#twitter");E.API.update("entity.update",E.API.updateAPI("share"));});}catch(L){}},google:function(){},linkedIn:function(){}},getBadgesFromOthers:{tempUser:{},email:"",turnIdToEmail:function(L){this.email=L+k.config.username;},getPlayer:function(L){var M=this,N=h(".rank");p.Badgeville.getPlayer(L,function(O){var Q=N.find("div"),P=N.find("span"),R=(typeof O.level.name==="undefined")?"rookie":O.level.name.toLocaleLowerCase();N.find("img").remove();N.addClass(R);R=R.charAt(0).toUpperCase()+R.slice(1);P.text(R);Q.show();P.show();M.tempUser=O;});}},getBadgeFromSelf:{user:{},domElements:{},getDom:function(){var X=this,U=h(".badge-stats"),L=U.find("> div:eq(0)"),P=U.find(".stats"),O=P.find("ul > li:eq(0) > span:last-child"),V=P.find("ul > li:eq(1) > span:last-child"),Z=P.find("ul > li:eq(2) > span:eq(1)"),W=P.find("ul > li:eq(2) > .next-level"),N=U.find(".bar-cont"),S=N.find(".bar"),M=S.find("span"),R=N.find("> span:eq(0)"),Y=N.find("> a:eq(0)"),Q=h("#how-to"),T=Q.find("> a");X.domElements={badgeStat:U,iconBadge:L,stats:P,rank:O,points:V,nextLevel:Z,nextLevelIcon:W,barCount:N,bar:S,percntBar:M,percent:R,howItWork:Y,howModal:Q,howClose:T};X.editProfileBehaviors.domElements=X.domElements;X.editProfileBehaviors.self=X;X.editProfileBehaviors.howItWorksBehaviors.domElements=X.domElements;X.editProfileBehaviors.howItWorksBehaviors.self=X;return X;},gatherUserInfo:function(){var L=this;L.getDom();L.user=Badgeville.Settings.player;L.updateEditPrivateProfile();},updateEditPrivateProfile:function(){var M=this,N=M.domElements,L=M.user;if(L.points_all===0){N.badgeStat.addClass("rookie");N.rank.html("Rookie");N.points.html("0");N.nextLevel.html("Apprentice");N.percntBar.css({width:0+"%"});N.percent.html(0+"%");M.editProfileBehaviors.getModal();M.editProfileBehaviors.howItWorksBehaviors.close();}else{N.badgeStat.addClass(L.level.name.toLowerCase());N.rank.html(L.level.name);N.points.html(L.points_all);N.nextLevel.html(L.next_level.name);M.editProfileBehaviors.calculatePercentage();M.editProfileBehaviors.getModal();M.editProfileBehaviors.howItWorksBehaviors.close();}},editProfileBehaviors:{calculatePercentage:function(){var O=this,P=O.domElements,M=O.self.user,L;var N={Apprentice:250,Specialist:1500,Commentator:5000,Pundit:10000,Analyst:30000,Adviser:60000,Captain:1000000};switch(M.level.name){case"Rookie":L=(((M.points_all)*100)/N.Apprentice).toFixed(2);break;case"Apprentice":L=(((M.points_all-N.Apprentice)*100)/(N.Specialist-N.Apprentice)).toFixed(2);break;case"Specialist":L=(((M.points_all-N.Specialist)*100)/(N.Commentator-N.Specialist)).toFixed(2);break;case"Commentator":L=(((M.points_all-N.Commentator)*100)/(N.Pundit-N.Commentator)).toFixed(2);break;case"Pundit":L=(((M.points_all-N.Pundit)*100)/(N.Analyst-N.Pundit)).toFixed(2);break;case"Analyst":L=(((M.points_all-N.Analyst)*100)/(N.Adviser-N.Analyst)).toFixed(2);break;case"Advisor":L=(((M.points_all-N.Adviser)*100)/(N.Captain-N.Adviser)).toFixed(2);break;case"Captain":L=100;break;}P.percntBar.css({width:L+"%"});P.percent.html(L+"%");},getModal:function(){var M=this,N=M.domElements,L=M.self.user;N.howItWork.bind("click",function(){N.howModal.css("display","block");return false;});},howItWorksBehaviors:{close:function(){var M=this,N=M.domElements,L=M.self.user;N.howClose.bind("click",function(){N.howModal.hide();return false;});},getHowManyPlayersInRank:function(){}}}}};s=function(){if(typeof LF!=="undefined"){I.commentsCount(true);}else{I.commentsCount(false);}};I={conv:null,url:K.livefyre.jsURL,config:[],network:K.livefyre.network,eventsDelegate:null,commentsNumber:0,customStrings:{sortLabel:"SORT BY"},init:function(L){var M=this;if(typeof fyre!=="object"){z.loadExtJs(I.url,"",I.lfLoaded);}},lfLoaded:function(){I.eventsDelegate=new fyre.conv.BackplaneAuthDelegate(p.Backplane);I.events.eventsDelegate();I.grabMetaData();},grabMetaData:function(N){var O=this,M={},L=[],R=h('meta[name="livefyreconfig"]'),Q=false,P;if(R.attr("siteId")){P=R.attr("siteId");}else{P=K.livefyre.siteid;}if(R.length>0){M={el:K.livefyre.el,siteId:P,checksum:R.attr("checksum"),articleId:R.attr("articleId"),collectionMeta:R.attr("collectionmeta")};}else{M={collectionMeta:"eyJ0eXAiOiJqd3QiLCJhbGciOiJIUzI1NiJ9.eyJ0aXRsZSI6Iih0ZXN0aW5nIDMgMiAxKSBUaGlzIGlzIGFuIG90aGVyIHRlc3QgdGl0bGUuIiwidXJsIjoiaHR0cDpcL1wvZXhhbXBsZS5jYnMuY29tXC9leGFtcGxlMi5odG1sIiwidGFncyI6IiIsImFydGljbGVJZCI6InRlc3RpbmcxMjM0IiwiY2hlY2tzdW0iOiJlNzI0YjFkMGRjOTZmZjQ4NjcxN2EwNzkyOGU2YjU4MCJ9.3ywwCkxPrLxt0fzCTg6yqNlr79jep6IOaSJYS_jNEUk",checksum:"e724b1d0dc96ff486717a07928e6b580",siteId:"303683",articleId:"testing1234",el:"livefyre_comment_stream"};Q=true;}if(!Q){I.config.push(M);O.setUpLiveFyre();}},setUpLiveFyre:function(){var M=this;var L=M.customStrings;M.conv=fyre.conv.load({strings:L,network:M.network,authDelegate:I.eventsDelegate},M.config,I.events.doLivefyreAuth);},commentsCount:function(N){var M=h("span.livefyre-commentcount"),L=function(){if("LF" in p){try{if(p.FOX_metadescriptor.name["prism.section"]==="nation"){p.LF.CommentCount({replacer:function(Q,R){Q.innerHTML=R;}});}else{p.LF.CommentCount({replacer:function(Q,R){Q.innerHTML=R+" Comment"+(R===1?"":"s");}});}}catch(P){console.log("error occured in comments number",P);}}};if(M.size()>0){if(N){try{if(p.FOX_metadescriptor.name["prism.section"]==="nation"){p.LF.CommentCount({replacer:function(P,Q){P.innerHTML=Q;}});}else{p.LF.CommentCount({replacer:function(P,Q){P.innerHTML=Q+" Comment"+(Q===1?"":"s");}});}}catch(O){console.log("error occured in comments number",O);}}else{z.loadExtJs("zor.livefyre.com/wjs/v1.0/javascripts/CommentCount.js","lfExtCom",L);}}},events:{eventsDelegate:function(M){var L=I.eventsDelegate;L.login=function(O){var N=function(){O.success();janrain.events.onCaptureLoginSuccess.removeHandler(N);janrain.events.onModalClose.removeHandler(P);};var P=function(){O.failure();janrain.events.onModalClose.removeHandler(P);janrain.events.onCaptureLoginSuccess.removeHandler(N);};j.janrain.signin();p.Backplane.expectMessages("identity/login");janrain.events.onCaptureLoginSuccess.addHandler(N);janrain.events.onModalClose.addHandler(P);};L.logout=function(N){j.janrain.signOut();fyre.conv.BackplaneAuthDelegate.prototype.logout.call(L,N);p.livefyreLogout=function(){fyre.conv.BackplaneAuthDelegate.prototype.logout.call(L,N);};janrain.events.onCaptureSessionEnded.addHandler(livefyreLogout);};L.viewProfile=function(N,O,P){if(O.id.indexOf("twitter")>-1||O.id.indexOf("facebook")>-1){return false;}var Q=O.id.split("@")[0];j.janrain.displayPublicProfile(Q);};L.editProfile=function(N){j.editProfile();};L.share=function(N){N.success();};},doLivefyreAuth:function(L){L.on("commentShared",function(M){k.trigger("contentShare",M.targetId);E.API.update("entity.update",E.API.updateAPI("share"));});L.on("commentPosted",function(M){v.commentPost();if(M.bodyHtml.indexOf("fyre-mention-twitter")>-1||M.bodyHtml.indexOf("fyre-mention-facebook")>-1){h.loadAttempt(60,200,function(){return h(".fyre-modal").size()>0?true:false;},function(){var N=h(".fyre-modal");N.find(".goog-buttonset-default").click(function(){k.trigger("friendTag");});});}});L.on("commentLiked",function(P){var S=P.targetAuthorId.split("@")[0],M=S+"@user.foxnews.com",N=P.targetId,R=S+N,Q={verb:"comment like",comment_id:R},O=function(T){n("DO WE HAVE CONNECTION?",T);};k.trigger("commentLike",[M,Q,O]);});L.on("commentFlagged",function(O){var Q=h("#fyre-message-"+O.targetId).find(".fyre-comment-user").attr("data-author-id").split("@")[0],M=Q+"@user.foxnews.com",P={verb:"spank"},N=function(R){n("DO WE HAVE CONNECTION?",R);};k.trigger("spank",[M,P,N]);});L.on("commentCountUpdated",function(N){I.commentsNumber=N;var M=h(".user-interaction > li.comments");M=(M.size()>0)?M:h(".post-footer .comments");if(M.size()>0){if(M.css("display")==="none"){if(M.find("span").size()==0){M.find("a").html("<span></span> "+N+" Comments");}else{M.find("a").html(N+" Comments");}M.css({display:"block"});}else{if(M.find("a > span").size()>0){M.find("a").html("<span></span> "+N+" Comments");}else{M.find("a").html(N+" Comments");}}}else{try{if(p.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){M=h(".post-footer > .comments");if(M.size()>0){M.find("a").html(I.commentsNumber+" Comments");}}}catch(O){}}});L.on("initialRenderComplete",function(N){if(p.FOX_LivefyreIntegrationService){FOX_LivefyreIntegrationService.isReady();}j.livefyre.displayLogo();j.livefyre.hashComment();I.events.omniture();var M=h(".user-interaction > li.comments");if(M.size()>0){if(M.css("display")==="none"){if(M.find("a > span").size()>0){M.find("a").html("<span></span> "+I.commentsNumber+" Comments");}else{M.find("a").html(I.commentsNumber+" Comments");}M.css({display:"block"});}else{if(M.find("span").size()==0){M.find("a").html("<span></span> "+I.commentsNumber+" Comments");}else{M.find("a").html(I.commentsNumber+" Comments");}M.css({display:"block"});}}else{try{if(p.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){M=h(".post-footer > .comments");if(M.size()>0){M.find("a").html(I.commentsNumber+" Comments");}}}catch(O){}}});},omniture:function(){var L={showMore:h(".fyre-stream-more-container"),displayComments:h(".comments")};L.showMore.bind("click",function(){v.commentLoad();});L.displayComments.bind("click",function(){v.commentLoad();});}},API:{configUrl:function(N,L){var M=K.livefyre.activityAPI;return M.replace("{uuid}",N).replace("{cb}",L);},displayDataToPublicProfile:function(L){var N=this,M="FOX_Livefyre_PublicRequest";p[M]=p[M]||function(O){u.commentCount=O.data.user_comment_count;u.likeCount=O.data.user_liked_count;u.rating=O.data.user_rating;j.livefyre.populatePublicProfile();};h.ajax({url:N.configUrl(L,M)+"&userInfoFormat=true",dataType:"script",data:{cb:y(5)},async:true,cache:true});},onProfileUpdate:function(){var M=K.livefyre.apiProfile,L="FOX_livefyreProfileUpdate";p[L]=function(N){};h.ajax({url:M+E.API.token+"&callback="+L,dataType:"script",async:true,cache:true});},onLoginSuccessFromJanrain:function(){var N=h("#livefyre_comment_stream");var M=N.find(".fyre-widget .fyre-auth .fyre-login-bar .fyre-user-loggedout"),L="Signing In...";h.loadAttempt(250,150,function(){return(M&&M.text()!==L)?true:false;},function(){M.text(L);});}},activityTab:{configUrl:function(N,L){var M=(B.janrainFlow==="profileFlow")?K.livefyre.activityAPI:K.livefyre.activityActiveAPI;return M.replace("{uuid}",N).replace("{cb}",L);},uuid:null,location:null,activityWraper:null,domStorage:null,ajaxRequestsTries:3,currentNumberAttempts:0,maxCommentsGrab:10,curTime:function(){return p.AKAMAI_TIME_HELPER.getCurrent();},backup:null,user:{name:null,image:null},initCallFromJanrain:function(){var L=this;L.cloneMarkUp();},cloneMarkUp:function(){var N=this;var M=h("#livefyre-wrap"),L=M.clone();N.activityWraper=L;M.remove();h("#account-wrap").before(L);N.tabActivity();N.gatherData();},tabActivity:function(){j.domEvents.tabControlsForActivityPages();},assessDom:function(){var N=this;if(N.dom==null){var L=h("#livefyre-Activity").find(".livefyre-pro-activity"),M=L.find("ul");N.dom={image:h("#livefyre-pro-image").find("> img"),ul:M,name:L.find("h1"),body_plain:"comment",url:"link",created_at:"time",conv_title:"whereTitle",structure:L};}return N.dom;},dom:null,manageDomCopy:function(){var M=this,O=M.activityWraper,N=O.find(".livefyre-pro-activity"),L=N.find(".prof-activity ul");return{image:O.find("#livefyre-pro-image").find("> img"),ul:L,name:N.find("h1")};},gatherData:function(M,L){var O=this,N="FOX_liveFYRE_Activity",M=M||u.uuid,P=L||"private";O.uuid=M;O.location=P;if(typeof M==="undefined"){return false;}O.location=L||"private";if(O.location==="private"){O.gatherNameAndImage();}if(!p[N]){p[N]=function(Q){O.populateMarkup(Q);};}h.ajax({url:O.configUrl(M,N),dataType:"script",data:{cb:y(5)},async:true,cache:true});},hashTagGatherer:function(){var L=this,M=p.location.hash;if(M===""){return L;}L.user.name=M.replace("#","");return L;},hachChanged:function(){},getPhotosAndId:function(){var L=this;if(L.user.name===""||L.user.name==null){L.populateResponce({response:{status:"fail"}});return false;}h.ajax({url:K.janrain.publicRequestAPI+L.user.name,dataType:"json",data:{cb:y(5)},async:true,cache:true,success:function(M){L.populateResponce(M);}});},populateResponce:function(L){var M=I.activityTab;if(L.status!=="ok"){var N=M.assessDom();N.image.parent().hide();N.structure.html("User not found! Please make sure that the user is correct");return false;}if(L.result.photos.length>0){M.user.image=L.result.photos[2].value;}else{M.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}M.uuid=L.result.uuid;M.gatherData(M.uuid,"public");},gatherNameAndImage:function(){var L=this;switch(L.location){case"private":L.user.name=u.userJanrain.displayName;if(u.userJanrain.photos.length>0){L.user.image=u.userJanrain.photos[2]["value"];}else{L.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}break;case"public":L.obtainDataFromExternalJanrain();break;default:break;}},obtainDataFromExternalJanrain:function(){},populateMarkup:function(O){var U=I.activityTab,L=[],N=U.curTime();if(O.code===404){var P=U.assessDom();P.image.parent().hide();P.structure.html("User not found! Please make sure that the user is correct");return false;}else{if(O.code!==200){U.gatherData(U.uuid,U.location);}}if(O.data.length==0){var P=U.assessDom();P.image.parent().hide();P.structure.html("User has no comments");return false;}if(O.code===200&&B.janrainFlow){var Q=O.data,S=10,R=Q.length;R=(R>S)?S:R;var V=function(Z){var W=[],Y=new Date(U.correctingCommentTime(Z.created_at)),X=U.createdSinceTime(Y,N);W.push("<li><div>");W.push("<p>"+aa(Z.body_html)+"</p>");W.push("<span>"+X.str+' <a href="'+Z.url+'" >'+Z.conv_title+"</a></span>");W.push('</div><a href="'+Z.url+'" >View</a></li>');function aa(ac){var ab=h("<div/>").html(ac);if(ab.find("span").length>0){ab.find("span").each(function(){var ae=h(this),ad=ae.text();ae.text("@"+ad);ae.wrap("a");if(ae.attr("provider")!=="livefyre"){var af=ae.attr("profile_url");ae.parent().attr("target","_blank");ae.parent().attr("href",af);}else{ae.parent("a").removeAttr("href");}});return ab.html();}else{return ac;}}return(W.join(""));};for(var T=0;T<R;T+=1){L.push(V(Q[T]));}L=L.join("");if(U.location==="private"){var M=U.manageDomCopy();M.ul.html(L);U.insertNewMarkupIntoTab();}else{var P=U.assessDom();P.ul.html(L);U.insertNewMarkupIntoTab();}}},parseThroughSpan:function(){h(".prof-activity > ul").find("li").each(function(){var L=h(this);L.find("span").each(function(){var N=h(this);if(N.attr("provider")==="livefyre"){var M=N.attr("jid").split("@")[0];N.parent("a").removeAttr("href");N.bind("click",function(){janrain.capture.ui.getPublicProfile("publicProfile",M);});}});});},insertNewMarkupIntoTab:function(){var L=this;if(L.location==="public"){var N=L.assessDom();N.name.html(L.user.name);N.image.attr("src",L.user.image);}else{var M=L.manageDomCopy();M.name.html(L.user.name);M.image.attr("src",L.user.image);}L.parseThroughSpan();},correctingCommentTime:function(N){var O=p.AKAMAI_TIME_HELPER.isDST(),Q="GMT"+((O.val)?"+100":"-000");var P=N.split("T"),L=P[0],R=P[1];L=L.split("-");L=[L[1],L[2],L[0]].join("/");var M=new Date([L,R,Q].join(" "));return M;},createdSinceTime:function(M,L){var V=this,N=M,Q=false;if(!N){return{str:"",val:false};}var T=V.dayDifferences(L,N),W=[];var S=function(Z,Y){var X=" "+Z+((Y>1)?"s":"");return X;};var R=function(X){return X<0?X*-1:X;};if(T.s<0){Q="Just Now on";}else{if(T.m==0&&T.d==0&&T.h==0){W.push(T.s+S("second",T.s));}else{if(T.m<60&&T.h==0&&T.d==0){W.push(T.m+S("minute",T.m));if(T.s>0){W.push(T.s+S("second",T.s));}}else{if(T.h>=1&&T.d==0){W.push(T.h+S("hour",T.h));if(T.m>0){W.push(T.m+S("minute",T.m));}}else{if(T.d>=1&&T.d<=30){W.push(T.d+S("day",T.d));if(T.h>0){W.push(T.h+S("hour",T.h));}}else{if(T.d>30&&T.d<=365){var P=Math.floor(T.d/30),U=T.d%30;W.push(P+S("month",P));if(U>0){W.push(U+S("day",U));}}else{if(T.d>365){Q="1 year ago on";}else{if(T.d>730){Q="Many years ago on";}}}}}}}}Q=(Q)?Q:(W.join(", ")+" ago on");var O={str:Q,val:M};return O;},dayDifferences:function(L,M){var N=Date.parse(L)-Date.parse(M);return isNaN(N)?NaN:{diff:N,ms:Math.floor(N%1000),s:Math.floor(N/1000%60),m:Math.floor(N/60000%60),h:Math.floor(N/3600000%24),d:Math.floor(N/86400000)};},displayDiffenceTime:function(L){return""+L.ms+" Months"+L.d+" Days "+L.m+" Minutes";},loadDataWhenFailed:function(){var L=this;L.copyToCopy();},copyToCopy:function(){var L=this;h("#account-wrap").before(h(L.activityWraper));L.activityTab();}}};J=function(){var L=q;L.cookieSet=function(){return(h.cookie("SABRE_ID"))?true:false;};L.ureportHost=(function(){return(p.location.host.indexOf("ureport")>-1)?true:false;})();};q={config:{url:K.ureport.url,token:"&token=",email:"&email=",user:"&username="},uReportIdLookupAndDisplay:function(P,N){var L=this,O=(K&&K.ureport&&K.ureport.idLookup)?true:false;if(!O){return false;}p.userNameLookup=function(Q){if(N){var R=(Q.approvedFiles)?Q.approvedFiles:"0";h("#fox_ur_reports").html(R);}else{L.uReportTab(Q.id);}};var M=K.ureport.idLookup.replace("[UREPORT_USER_ID]",P);h.ajax({url:M,dataType:"script"});},uReportTab:function(T){var U=this,R=false;var N={acctWrap:h("#account-wrap"),ureportWrap:h("#ureport-pro-wrap"),activityWrap:h("#livefyre-wrap"),tabs:h(".tabs"),wraps:h(".wrap"),lastestUrep:h(".latest-urep"),noSub:h(".no-subs")};if(T){var P=T;}else{N.lastestUrep.hide();N.noSub.show();if(typeof auth_fox.user.userJanrain.externalServices==="undefined"){var M=0;var S=setInterval(function(){var W=h("#livefyre-pro-image img").attr("src");if(W.indexOf("static/v/all")===-1){h("#ureport-avatar").prepend('<img src="'+W+'" width="139" height="139"/>');var V=h(".livefyre-pro-activity h1").text();h("#ureport-pro-wrap h1").text(V);h(".sub-ur-banner a").attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");clearInterval(S);}else{if(M===5){clearInterval(S);}M++;}},1000);return;}else{var P=auth_fox.user.userJanrain.externalServices.uReport_id;}}if(typeof T!=="undefined"){var R=true;}if(!R){var Q=N.ureportWrap.clone();N.ureportWrap.remove();N.acctWrap.after(Q);}(function(){var V=h("#ureport-pro-wrap"),W=h(".wrap");N.tabs.click(function(){var X=h(this),Y=X.attr("id");W.css("display","none");N.tabs.removeClass("active");X.addClass("active");if(Y=="account-tab"){N.acctWrap.css("display","block");}if(Y=="ureport-pro-tab"){V.css("display","block");}if(Y=="ureport-act-tab"){N.activityWrap.css("display","block");}});})();var O={approvedUploadsELM:h("#ureport-pro-wrap .prof-urep-stats ul li:eq(0) span"),asSeenOnFoxChannelELM:h("#ureport-pro-wrap .prof-urep-stats ul li:eq(1) span"),featureduReportsELM:h("#ureport-pro-wrap .prof-urep-stats ul li:eq(2) span"),assignmentsELM:h("#ureport-pro-wrap .prof-urep-stats ul li:eq(3) span"),latestReport:h("#ureport-pro-wrap .prof-urep-latest"),noSubs:h("#ureport-pro-wrap .no-subs"),latestReportLink:h("#ureport-pro-wrap .latest-urep a"),photoELM:h("#ureport-pro-wrap .latest-urep a img"),title:h("#ureport-pro-wrap .latest-urep div h2 a"),message:h("#ureport-pro-wrap .latest-urep div p"),userName:h("#ureport-pro-name h1"),publicURL:h("#ureport-pro-wrap .sub-ur-banner a"),userName:h("#ureport-pro-name h1"),avatar:h("#ureport-avatar"),accountWrap:h("#account-wrap"),lastestUrep:h(".latest-urep"),noSub:h(".no-subs")};if(R){O.userName.text(location.href.split("#")[1]);var L=auth_fox.livefyre.activityTab.user.image;O.avatar.html('<img src="'+L+'" style="height:139px;width:139px" />');}else{O.userName.text(auth_fox.user.userJanrain.displayName);var L=(typeof auth_fox.user.userJanrain.photos[2]!=="undefined")?auth_fox.user.userJanrain.photos[2]["value"]:false;if(L){O.avatar.html('<img src="'+L+'" style="height:139px;width:139px" />');}}O.publicURL.attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");p.ureportActivity=ureportActivity=function(W){var W=W.result,V=W.seenOnFNC.match(/,/g),X=W.featuredUreports.match(/,/g);V=V?V.length:0;X=X?X.length:0;if(W.approvedUploads!=="0"&&!R){h(".sub-ur-banner").css("visibility","hidden");}O.approvedUploadsELM.text(W.approvedUploads);O.asSeenOnFoxChannelELM.text(V);O.featureduReportsELM.text(X);O.assignmentsELM.text(W.assignments);if(typeof W.publicUrl!=="undefined"&&W.publicUrl!==""){O.photoELM.attr("src",W.publicUrl);O.lastestUrep.show();O.noSub.hide();}else{O.latestReportLink.hide();O.noSubs.show();}O.latestReportLink.attr("href",W.viewUreport);O.title.text(W.title);O.message.text(W.description);if(typeof p.ureportInitialized==="undefined"){p.ureportWrapClone=h("#ureport-pro-wrap").clone();p.ureportInitialized=true;p.refreshUR=refreshUR=function(){h("#account-wrap").after(p.ureportWrapClone);};}};(function(){h.ajax({url:K.ureport.ureportURL.replace("[UREPORT_USER_ID]",P),dataType:"script"});})();},uLogin:function(O,N,R){if(!H("ureport")){return false;}var P=this,L="FOX_ureport_SABRE",M=P.config;var Q=encodeURIComponent(N);Q=Q.replace("%40","@");p[L]=function(S){if(P.ureportHost){var T=t.setDomReady.uReport().acc;if(!T.hasClass("action")&&typeof p.Backplane==="function"&&S.fm!==""&&!(h.cookie("FOX_uReport_cookie"))){h.cookie("SABRE_ID",S.fm,{path:"/"});h.cookie("FOX_uReport_cookie","set",{path:"/"});if(p.location.pathname==="/assignment"){setTimeout(function(){var U=p.location.href;U=U.replace("/assignment","/submitreport");p.open(U,"_self");},500);}else{setTimeout(function(){p.location.reload(true);},500);}}}};h.ajax({url:M.url+L+M.token+O+M.email+Q+M.user+R,async:true,cache:true,dataType:"script"});},uLogout:function(){var M=this,L=t.setDomReady.uReport().acc;if(M.cookieSet()&&M.ureportHost&&L.hasClass("action")){h.cookie("SABRE_ID",null,{path:"/"});h.cookie("SABRE_ID",null,{path:"/"});h.cookie("FOX_uReport_cookie",null,{path:"/"});setTimeout(function(){p.location.reload(true);},3000);}},clearCookies:function(){var M=0,L=0;h.cookie("SABRE_ID",null,{path:"/"});},docReady:(function(){if(!H("ureport")){return false;}var M=$tartup.site.OnDocReady;function L(N){h.cookie(N,null,{path:"/"});h.cookie("SABRE_ID",null,{path:"/"});h.cookie("p_UN",null,{path:"/"});setTimeout(function(){p.location.reload(true);},3000);}M("slideShowCarousel",{init:function(){var N=this;N.setSlideshow();},setSlideshow:function(){function N(R,Q){var P=[];for(var O=1;O<=Q.batch.max;O++){P.push('<li><a href="#"></a></li>');}R.html(P.join(""));}h(".c-slide").each(function(Q){var U=h(this),R=U.find("div.controls"),T=U.find("ul.sectioning"),S=false;var P=function(V){V.each(function(W){h(this).click(function(){S.stopAutoScroll();S.scrollToBatch(W+1);return false;});});};var O={auto:{set:true,speed:5000,resume:true},slide:"horizontal",scroll:1,show:1,speed:"slow",rotate:true,eventCallback:function(W){var X=W.start,V=W.end;if(W.event==="init"){N(T,W);P(T.find("> li a"));}T.find("> li").each(function(Y){h(this).toggleClass("active",(Y+1===W.batch.current));});},controlsCallback:function(V){R.find(".prev").click(function(){V.stopAutoScroll();V.slide("prev");return false;});R.find(".next").click(function(){V.stopAutoScroll();V.slide("next");return false;});S=V;}};U.jACarousel(O);});}});M("emailSubmit",{init:function(){var N=this;h("#signupSubmit").click(function(){var O=h("#signupEmail").val();N.validate(O);return false;});h("#signupEmail").attr("value","Enter Your Email").blur(function(){var P=h(this),O=P.attr("value");P.attr("value",(O==="")?"Enter Your Email":O);}).focus(function(){var P=h(this),O=P.attr("value");P.attr("value",(O==="Enter Your Email")?"":O);});},validate:function(N){var P=this,O=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(O.test(N)==false){h(".newsletter-module form .error").text("Please enter a valid email address.").css("display","block");}else{P.postEmail(N);h(".newsletter-module form .error").text("Thank you for subscribing to uReport.").css("display","block");h("#signupEmail").val("");}},postEmail:function(N){h.ajax({url:"http://www.foxnews.com/portal/newsalertsubscribe",data:"slids=3DC725E303A24F8D41CEA8699C0FE71E&email="+N});n(N);}});M("SSOModule",{init:function(){var N=this;},attachEvents:function(){var P=this,O;h("#authentication li:nth-child(1)").click(function(T){P.loadIframe("register");T.preventDefault();});h("#authentication li:nth-child(2)").click(function(T){P.loadIframe("login");T.preventDefault();});var S=h("#log-in");if(S.length>0&&!h.cookie("p_Thirdparty")){S.click(function(U){var T=S.attr("href");P.submitreport=(T.split("?")[1]).split("=")[1];P.loadIframe("login");U.preventDefault();});}h(p).resize(function(){var U=h("#foxFrame"),T=h(p);if(U.length){U.width(T.width());U.height(T.height());}});p.location.hash="";var R=h("#account"),N=h.cookie("p_UN"),Q=h.cookie("p_Thirdparty");if(R.hasClass("inactive")){N=h.trim(h.cookie("p_UN").replace("."," "));R.prop("onmouseout",null);R.click(function(U){var T=U.currentTarget;h(T).toggleClass("active");});h(".user-options").prepend("<p>You're logged in as <span>"+truncate(N,13)+"</span></p>");if(Q==="true"){R.find("li.first").hide();}}else{if(Q){N=h.trim(h.cookie("p_UN").replace("."," "));R.addClass("inactive").html('<div class="username"><div class="encapsulate"><img width="13" height="13" alt=" " src="http://www.foxnews.com/static/all/img/head/profile.png"/><span>Account</span></div><div class="user-options"><p>You\'re logged in as <span>'+truncate(N,13)+'</span></p><ul><li class="first"><li><a onclick="killCookie(\'SABRE_ID\');" href="#">Logout</a></li></ul></div></div>');R.hover(function(U){var T=U.currentTarget;h(T).toggleClass("active");},function(U){var T=U.currentTarget;h(T).toggleClass("active");});}}R.find("li:first a").attr("href","https://secure.foxnews.com/community/user/profile").attr("target","_blank");},loadIframe:function(P){var Q=this,R,O,N=h("#login");O=encodeURIComponent(p.location.href);R=h("<iframe />",{id:"foxFrame",src:"http://www.foxnews.com/static/v/all/html/ureport-login-ifr-2.html#"+P+"&url="+O,width:h(p).width(),height:h(p).height(),allowTransparency:true,scrolling:"no"});N.show().css("visibility","hidden");R.load(function(){N.css("visibility","visible");}).appendTo(N);},setHashListener:function(){var O=this;h(p).bind("hashchange",h.proxy(O.hashChange,O));if(h.browser.msie&&(h.browser.version==="7.0")){var N=p.location.hash;p.setInterval(function(){if(p.location.hash!==N){h.proxy(O.hashChange(),O);}},100);}},hashChange:function(){var Q=this,S=p.location.hash,N,R,O;h('<link href="http://www.foxnews.com/i/redes/foxnews.ico" rel="shortcut icon" type="image/x-icon" />').appendTo("head");if(S.replace("#","")===""){return;}try{S=S.replace("#","").split("&");N=S[0].split("=")[1];R=S[1].split("=")[1];O=S[2].split("=")[1];}catch(P){}if(N==="true"){h.cookie("SABRE_ID",R);h(p).unbind("hashchange");p.location.hash="";if(Q.submitreport!==null){p.location.pathname="/submitreport";}setTimeout(function(){p.location.reload(true);},1000);}if(O==="true"){p.location.hash="";h("#login").html("").hide();}}});}())};w=function(){this.url="";};b={config:{url:K.whatcounts.subscribe,iframeUrl:"http://$.foxnews.com/feeds/app/newsletters/",sub:"?c=sub",unsub:"?c=unsub",find:"?c=find",email:"&email=",r:"&r=",listId:"&list_id=",cbust:"&cb=",unsubURL:K.whatcounts.unsubscribe,token:"?token=",subRList:"&",callback:"&callback=FOX_whatcounts_UNSUB",cb:"FOX_whatcounts_UNSUB",realms:["foxnews","foxpromos","foxbusiness","foxnewsletter"],janrainHost:"&host=fox-news",Realms:{foxnews:"foxnewsIDList",foxpromos:"foxpromosIDList",foxbusiness:"foxbusinessIDList",foxnewsletter:"foxnewsletterIDList"},idRealms:{foxnewsIDList:"foxnews",foxpromosIDList:"foxpromos",foxbusinessIDList:"foxbusiness",foxnewsletterIDList:"foxnewsletter"},List:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]},subscribeList:{foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]}},dom:{email:null,newsList:null,load:function(){var L=this;L.email=h("#capture_editProfile_edit_email");L.newsList=h(".news-sub-form").find("label");L.signInform=h("#capture_traditionalRegistration_registrationForm");L.signInEmail=L.signInform.find("#capture_traditionalRegistration_form_item_traditionalRegistration_emailAddress input");L.signInLabels=L.signInform.find(".news-sub-form-reg label");L.signInIframeTarget=h("body");}},gatherData:function(){},janrainNewsAlerts:function(R,Q){var P,L;var T={"3DC725E303A24F8D197DA3C8590F80E2":["foxnewsletter","172"],"3DC725E303A24F8D1C12D1E24CDEA25E":["foxnewsletter","166"],"3DC725E303A24F8D9C92271F5026F381":["foxnewsletter","106"],"3DC725E303A24F8D555BC7C7F3FD748B":["foxnewsletter","178"],"3DC725E303A24F8D836CEAE9B885C87D":["foxnewsletter","76"],"3DC725E303A24F8DCF015F07C61BABFD":["foxnewsletter","144"],"3DC725E303A24F8DA5DBC7FFD49BC2B8":["foxnewsletter","160"],C2F278094FACCEA62391025B7A52D8EB:["foxnews","35"],"3DC725E303A24F8DE5C63D14EAB8EF63":["foxnewsletter","162"],"3DC725E303A24F8D95ACD1C9C0564C20":["foxnewsletter","96"],"3DC725E303A24F8DA102192D9D5143D9":["foxnewsletter","173"],"3DC725E303A24F8DAB69E1C048904762":["foxnewsletter","153"],"3DC725E303A24F8DB05092D232355E43":["foxnewsletter","71"],"3DC725E303A24F8DE5173CCC4F027046":["foxnewsletter","171"],"3DC725E303A24F8D41CEA8699C0FE71E":["foxnewsletter","133"],D98A625593049BD2AC0F412BA1AF913A:["foxpromos","174"],D98A625593049BD2CBFB283F5508AF71:["foxpromos","43"],"3DC725E303A24F8D64B4C05965F09E1A":["foxnewsletter","99"],"5C84B893BD6D939E84FAE1A8E6E9525A":["foxbusiness","32"],"3DC725E303A24F8D870B96401050B31F":["foxnewsletter","90"],"3DC725E303A24F8D518A0FB222399489":["foxnewsletter","151"],"3DC725E303A24F8D39740C7B45D15F45":["foxnewsletter","69"],"3DC725E303A24F8D3540B4B6FB335FC8":["foxnewsletter","108"],"3DC725E303A24F8D5E4CD875B68955A6":["foxnewsletter","141"],"3DC725E303A24F8D7E5F3A553E2E6154":["foxnewsletter","122"],"3DC725E303A24F8D883169054890DC1B":["foxnewsletter","183"],"3DC725E303A24F8D02B1F9D9AAF16982":["foxnewsletter","97"],D98A625593049BD23B5BE4FDF9C2351F:["foxpromos","139"]},M={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},N=[];if(typeof R!="undefined"){if(R instanceof Array){for(var S=0;S<R.length;S++){P=T[R[S]][0];L=T[R[S]][1];N.push(L);M[P].push(L);}}else{P=T[R][0];L=T[R][1];N.push(L);M[P].push(L);}}else{P="foxbusiness";L="32";N="32";}var O={listIds:N.join(","),email:Q,cb:y(),callback:"badgevilleSubscribeSuccess"};p.badgevilleSubscribeSuccess=function(){};n("badgeville request:",O);h.ajax({url:"http://"+K.whatcounts.subdomain+".foxnews.com/feeds/app/badgeville/newsletters/subscribe.json",data:O,dataType:"script"});},lookUpUser:function(){var O=this,L=O.config;O.dom.load();if(O.dom.email.length>0){var P=0;var M=function(){var Q=[L.url,L.find,L.r+L.realms[P],L.email+O.dom.email.attr("value"),L.cbust+y(2,"milliseconds")].join("");h.ajax({url:Q,dataType:"text",type:"GET",success:function(V){if(V){if(h.browser.msie){V=V.replace(/\s+/g,"");var U=new ActiveXObject("Microsoft.XMLDOM");U.loadXML(V);var T=h(U).find("lists").text();}else{var T=h(V).find("lists").text();}if(T){T=T.split(",");var S=function(X){if(T[X]!==""){L.List[L.Realms[L.realms[P]]].push(T[X]);}};for(var W=0,R=T.length;W<R;W+=1){S(W);}}}if(P<3){P++;M();}else{N();}},error:function(R){n("Error",R);}});};M();function N(){h(document).ready(function(){O.checkNewsLetters();});}}else{n("dom not ready!");}},checkNewsLetters:function(){this.dom.load();var Q=this,P=Q.dom.newsList,L=Q.config;for(var N in L.List){if(L.List[N]!=0){for(var M=0;M<L.List[N].length;M++){var O=h("#"+N+"_"+L.List[N][M]);h(O).checked=true;h(O[0]).attr("checked","checked");}}}Q.setEventListener();j.janrain.screen.stateLookUp=false;},onFail:function(){p.scrollTo(0,1070);this.dom.load();var N=this,M=N.dom.newsList,L=N.config;M.each(function(){var P=h(this).find("input"),O;O=P.attr("id").split("_");if(p._NewsletterBindings.subscribe[L.idRealms[O[0]]].indexOf(O[1])>-1){P[0].checked=true;}if(p._NewsletterBindings.original[L.idRealms[O[0]]].indexOf(O[1])>-1&&p._NewsletterBindings.unsubscribe[L.idRealms[O[0]]].indexOf(O[1])===-1){P[0].checked=true;}});N.setEventListener();},updateSub:function(){var V=this,L=V.dom.newsList,Q=V.config,T={},U={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},R={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]};L.each(function(){var Y=h(this).find("input"),X;X=Y.attr("id").split("_");if(Y.is(":checked")){U[Q.idRealms[X[0]]].push(X[1]);}else{if(!j.janrain.screen.postAjaxInit){if(Q.List[X[0]].indexOf(X[1])>-1){R[Q.idRealms[X[0]]].push(X[1]);}}else{if(Q.subscribeList[Q.idRealms[X[0]]].indexOf(X[1])>-1){R[Q.idRealms[X[0]]].push(X[1]);}}}});Q.subscribeList=U;for(var P in p._NewsletterBindings.subscribe){if(p._NewsletterBindings.subscribe[P].length!=0){var O=p._NewsletterBindings.subscribe[P].join(","),M=[Q.url,Q.sub,Q.email+V.dom.email.attr("value"),Q.listId+O,Q.r+P,Q.cbust+y(2,"milliseconds")].join("");for(var S=0;S<p._NewsletterBindings.subscribe[P].length;S++){var N=setTimeout;N(W([{email:k.getBadgeFromSelf.user.email},{verb:"newsletter subscription",newsletterID:P+p._NewsletterBindings.subscribe[P][S]}],N),750);}h.ajax({url:M,dataType:"html",type:"POST",success:function(X){},error:function(X){n("Error",data,X);}});}}function W(X,Y){p.Badgeville.creditOther(X[0],X[1]);p.clearTimeout(Y);}for(var P in p._NewsletterBindings.unsubscribe){if(p._NewsletterBindings.unsubscribe[P].length!=0){var O=p._NewsletterBindings.unsubscribe[P].join(","),M=[Q.unsubURL,Q.unsub,Q.email+V.dom.email.attr("value"),Q.listId+O,Q.r+P,Q.cbust+y(2,"milliseconds")].join("");p[Q.cb]=function(X){};h.ajax({url:M,dataType:"script",async:true,cache:true});}}j.janrain.screen.postAjaxInit=true;},subscribeOnSignIn:function(){var T=this;T.dom.load();var U=T.dom.signInLabels,S=T.dom.signInEmail.val(),M=T.dom.signInIframeTarget,R=T.config;for(var O in R.subscribeList){R.subscribeList[O]=[];}h(".subIframe").remove();U.each(function(){var W=h(this).find("input"),V;V=W.attr("id").split("_");if(W[0].checked==true){R.subscribeList[R.idRealms[V[0]]].push(V[1]);}});var N=(function(){var V=location.host.split(".");V.pop();V.pop();return V.join(".");})();for(var Q in R.subscribeList){if(R.subscribeList[Q].length!=0){var P=R.subscribeList[Q].join(","),L=[R.iframeUrl.replace("$",N),R.sub,R.email+S,R.listId+P,R.r+Q,R.cbust+y()].join("");M.append('<iframe height=0 width=0 class="subIframe" src="'+L+'"></iframe>');}}k.buffer.push("newsletterSub");},updateSubscribeState:function(){var N=this;this.dom.load();var N=this,M=N.dom.newsList,L=N.config;M.each(function(){var S=h(this).find("input"),R;R=S.attr("id").split("_");var Q=L.idRealms[R[0]];if(L.subscribeList[Q].length!=0){for(var P=0,O=L.subscribeList[Q].length;P<O;P+=1){if(R[1]==L.subscribeList[Q][P]){S[0].checked=true;}}}});N.setEventListener(true);},setEventListener:function(Q){var R=this,N=R.dom.newsList,L=R.config,P;if(Q||!p._NewsletterBindings){P=p._NewsletterBindings={original:{},subscribe:{},unsubscribe:{}};}else{P=p._NewsletterBindings;}var O=function(V,T){var U=[];for(var S=0;S<T.length;S++){if(T[S]!==V){U.push(T[S]);}}return U;};var M=function(Z,W,U){var X=Z.split("_"),T=X[0],Y=X[1],S=(L.idRealms[T])?L.idRealms[T]:false;if(S){if(!P.subscribe[S]){P.original[S]=[];P.subscribe[S]=[];P.unsubscribe[S]=[];}if(!U&&W){if(W&&P.subscribe[S].indexOf(Y)===-1){P.original[S].push(Y);}}else{if(U){var V=(P.original[S].indexOf(Y)>-1)?true:false;if(W){if(!V){P.subscribe[S].push(Y);}else{if(P.unsubscribe[S].indexOf(Y)>-1){P.unsubscribe[S]=O(Y,P.unsubscribe[S]);}}}else{if(V){if(P.subscribe[S].indexOf(Y)>-1){P.subscribe[S]=O(Y,P.subscribe[S]);}if(P.unsubscribe[S].indexOf(Y)===-1){P.unsubscribe[S].push(Y);}}else{if(P.subscribe[S].indexOf(Y)>-1){P.subscribe[S]=O(Y,P.subscribe[S]);}}}}}}};N.each(function(){var T=h(this),S=T.find("input"),U=S.attr("id");if(!T.data("_bindings")||Q){T.data("_bindings",true);M(U,(S.is(":checked"))?true:false);S.unbind("change").bind("change",function(){M(U,(S.is(":checked"))?true:false,true);});}});}};r=function(){var L=this;L.defaultDom();};G={config:{url:K.ureport.url,token:"&token=",email:"&email=",user:"&username=",logout:"http://quote.foxbusiness.com/loggedout",watchList:"http://www.foxbusiness.com/investing/tools/stock-watchlist",portFolio:"http://www.foxbusiness.com/investing/tools/stock-portfolio"},domSet:function(){var N=h("#mod-portfolio-watchlist"),M=h(".section-mod").find(".authentication"),L=M.find(".auth-new"),O=N.find("li:eq(0) > .photo "),S=N.find("li:eq(1) > .photo "),U=h("#investment-tracker"),Q=U.find(".auth-new"),R=h(".dv-feature-9.m-14"),P=R.find("li:eq(0)"),T=R.find("li:eq(1)");return{wAndP:N,auth:M,theW:O,theP:S,authM:U,aW:P,aP:T,lCNA:L,mCNA:Q};},domBehaviorLogin:function(){var L=this;var M=L.domSet();M.auth.hide();M.authM.hide();h("#mod-portfolio-watchlist .content > ul > li .photo a").unbind("click");if(M.theW.size()>0){M.theW.unbind("click").bind("click",function(N){p.location.href=L.config.watchList;N.preventDefault();});M.theP.unbind("click").bind("click",function(N){p.location.href=L.config.portFolio;N.preventDefault();});}if(M.aW.size()>0){M.aW.unbind("click").bind("click",function(N){p.location.href=L.config.watchList;N.preventDefault();});M.aP.unbind("click").bind("click",function(N){p.location.href=L.config.portFolio;N.preventDefault();});}},domBehaviorLogout:function(){var L=this;var M=L.domSet();M.auth.show();M.authM.show();if(M.theW.size()>0){M.theW.unbind("click").bind("click",function(N){janrain.capture.ui.renderScreen("signIn");N.preventDefault();});M.theP.unbind("click").bind("click",function(N){janrain.capture.ui.renderScreen("signIn");N.preventDefault();});}if(M.aW.size()>0){M.aW.unbind("click").bind("click",function(N){janrain.capture.ui.renderScreen("signIn");N.preventDefault();});M.aP.unbind("click").bind("click",function(N){janrain.capture.ui.renderScreen("signIn");N.preventDefault();});}},defaultDom:function(){var L=this;var M=L.domSet();M.lCNA.unbind("click").bind("click",function(N){janrain.capture.ui.renderScreen("signIn");N.preventDefault();});M.mCNA.unbind("click").bind("click",function(N){janrain.capture.ui.renderScreen("signIn");N.preventDefault();});},idmsLogin:function(O,N,Q){if(!H("foxbusiness")){return false;}var P=this,L="FOX_ureport_SABRE",M=P.config;if(h.cookie("p_IDMS")!=null){P.domBehaviorLogin();return false;}p[L]=function(R){h.cookie("p_IDMS",R.idms,{path:"/",domain:"foxbusiness.com"});P.domBehaviorLogin();};h.ajax({url:M.url+L+M.token+O+M.email+N+M.user+Q,async:true,cache:true,dataType:"script"});},idmsLogout:function(){var L=this;if(h.cookie("p_IDMS")!=null){L.clearIdmsCookie();L.domBehaviorLogout();if(p.location.pathname.indexOf("stock-watchlist")>1||p.location.pathname.indexOf("stock-portfolio")>1){setTimeout(function(){p.location.reload();},3000);}}},clearIdmsCookie:function(){h.cookie("p_IDMS",null);h.cookie("p_IDMS",null,{path:"/"});h.cookie("p_IDMS",null,{path:"/",domain:"foxbusiness.com"});}};f=function(){};v={networkShareSuccess:function(){h.ad.track({"network-share-success":{}});},emailShareSuccess:function(){h.ad.track({"email-share-success":{}});},networkShareStart:function(){h.ad.track({"network-share-start":{}});},emailShareStart:function(){h.ad.track({"email-share-start":{}});},registrationStart:function(){h.ad.track({"registration-start":{}});},registrationComplete:function(){h.ad.track({"registration-complete":{}});},logins:function(){h.ad.track({logins:{}});},profileUpdates:function(){h.ad.track({"profile-updates":{}});},fbShare:function(){h.ad.track({"fb-share":{}});},twttrFollow:function(){h.ad.track({"twttr-follow":{}});},commentPost:function(){h.ad.track({"comment-post":{}});},commentLoad:function(){h.ad.track({"comment-load":{}});},commentRead:function(){h.ad.track({"comment-read":{}});}};C=function(){};j={data:{body:{listener:null}},domEvents:{loginSuccess:function(){var L=t.setDomReady;AUTH_Manager.onReady("livefyre",function(){setTimeout(function(){I.API.onLoginSuccessFromJanrain();},500);});if(p.AUTH_LoginState){AUTH_LoginState.trigger("onLogin");}L.acc.css({display:"block"});L.acc.removeClass("none");L.hasAccount.css({display:"block"});L.noAccount.css({display:"none"});},logoutSuccess:function(){var L=t.setDomReady;if(p.AUTH_LoginState){AUTH_LoginState.trigger("onLogout");}L.acc.css({display:"block"});L.acc.removeClass("none");L.acc.removeClass("inactive");L.acc.removeClass("active");L.hasAccount.hide();L.noAccount.show();},editProfile:function(){var L=t.setDomReady;L.profile.bind("click",function(M){j.editProfile(M);});},tabControlsForActivityPages:function(){if(typeof p.refreshUR=="function"){p.refreshUR();}if(location.href.indexOf("tab=ureport")>-1){h(".tabs").removeClass("active");h("#ureport-pro-tab").addClass("active");h("#ureport-pro-wrap").css("display","block");h("#livefyre-wrap").css("display","none");}h("#accounts-header").find(".tabs").unbind("click");h("#accounts-header").find(".tabs").click(function(){var M=h(this),N=M.attr("id"),L=h(".wrap");L.css("display","none");h(".tabs").removeClass("active");M.addClass("active");if(N=="account-tab"){h("#account-wrap").css("display","block");}if(N=="ureport-pro-tab"){h("#ureport-pro-wrap").css("display","block");}if(N=="ureport-act-tab"){h("#livefyre-wrap").css("display","block");}});}},onLoginState:function(L){if(p.AUTH_LoginState){AUTH_LoginState.bind("onLogin",L);}},onLogoutState:function(L){if(p.AUTH_LoginState){AUTH_LoginState.bind("onLogout",L);}},accountDisplayBehaviour:function(N){var O=t.setDomReady,L;if(!O.acc.hasClass("alt-style")){O.acc.hover(function(){O.accountNav.addClass("hover");L="over;";},function(){O.accountNav.removeClass("hover");L="out";});O.accountNav.click(function(P){if(O.acc.hasClass("active")){O.acc.removeClass("active").addClass("inactive");}else{O.acc.addClass("active").removeClass("inactive");}});O.body.mousedown(function(P){if(L==="out"){if(O.acc.hasClass("active")){O.acc.removeClass("active").addClass("inactive");}}});}else{var M=O.acc.find(".user-options >ul>li:eq(0) > a");if(M.size()>0){M.click(function(){j.editProfile();});}}O.uReport().redBtn.bind("click",function(P){if(E.API.token===""){j.janrain.signin();return false;}});j.domEvents.editProfile();},janrain:{signin:function(){p.janrain.capture.ui.renderScreen("signIn");return false;},traditionalSigin:function(){janrain.capture.ui.modal.open("traditionalRegistration");return false;},traditionalDisplayName:function(L){var M=L.displayName,N=document.getElementById("displayNameData");if(M&&N){N.innerHTML=M;}},getJanrainUserAPI:function(M,L){E.API.execute(M,L);},signOut:function(){janrain.capture.ui.endCaptureSession();p.Backplane.expectMessages("identity/logout");},registrationStart:function(){v.registrationStart();},successfulRegistration:function(M){b.subscribeOnSignIn();E.API.token=M.accessToken;if(M&&M.action==="socialRegister"){var L="JANRAIN_socialAvatarUpdate",N="https://signin.foxnews.com/entity.update?type_name=user&access_token="+M.accessToken+"&attribute_name=photo_approval_status&value=%22approved%22&jsonp="+L;if(typeof p[L]!=="function"){p[L]=function(O){if(O.stat==="ok"){I.API.onProfileUpdate();}else{}};}h.ajax({url:N,dataType:"script",async:true,cache:true});}janrain.capture.ui.createCaptureSession(M.accessToken);p.Backplane.expectMessages("identity/login");E.session=true;E.sessionType="register";j.domEvents.loginSuccess();j.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:M.accessToken});k.events.chatCheck();v.registrationComplete();if(!M.renders){janrain.capture.ui.modal.close();}},successfulLogin:function(L){janrain.capture.ui.modal.close();janrain.capture.ui.createCaptureSession(L.accessToken);p.Backplane.expectMessages("identity/login");E.session=true;E.sessionType="signin";j.janrain.screen.editProfile.reloadProfile();j.domEvents.loginSuccess();E.API.token=L.accessToken;j.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:L.accessToken});if(p.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){p.location="http://www.foxnews.com/community/user/profile/edit";},10000);}v.logins();k.buffer.push("returnEightPerMonth");k.events.chatCheck();},sessionFound:function(L){if(!E.API.requestSent){janrain.capture.ui.createCaptureSession(L.accessToken);j.domEvents.loginSuccess();E.API.token=L.accessToken;p.Backplane.expectMessages("identity/login");j.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:L.accessToken});E.session=true;E.sessionType="found";k.events.chatCheck();}},sessionNotFound:function(L){j.domEvents.logoutSuccess();E.session=false;E.sessionType="notfound";if(H("ureport")){q.uLogout();}if(H("foxbusiness")){G.idmsLogout();}},sessionEnded:function(){if(H("ureport")){q.uLogout();}E.session=false;E.sessionType="logout";try{if(fyre!=="undefined"&&fyre!=null){fyre.conv.BackplaneAuthDelegate.prototype.logout();}}catch(L){}k.events.unsubscribe();j.domEvents.logoutSuccess();G.idmsLogout();},sessionCreated:function(L){},tokenRefreshed:function(){if(B.janrainFlow==="profileFlow"){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);}},tokenExpired:function(L){j.janrain.signOut();},accessDenied:function(){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);},onAuthWidgetLoad:function(L){},onRefreshToken:function(L){janrain.capture.ui.createCaptureSession(L.accessToken);E.API.token=L.accessToken;},backplaneReady:function(L){AUTH_Manager.fireReady("backplane");if(h.browser.msie&&parseInt(h.browser.version,10)<=7){var M=h(".comments");if(M.size()>0){M.remove();}h("#livefyre_comment_stream").html("<p>To participate in commenting, please use Internet Explorer 8 or above.</p>");}else{I.init();}h(p).trigger("janrainShareInit");},displayPublicProfile:function(L){u.userLivefyre.lookUpUUID=L;k.getBadgesFromOthers.turnIdToEmail(L);janrain.capture.ui.getPublicProfile("publicProfile",L);},screen:{currentScreen:null,stateLookUp:true,postAjaxInit:false,failedToUpdate:null,stateOfEditProfile:false,editProfile:{reloadProfile:function(){if(B.janrainFlow==="profileFlow"){h("#captureAccessDeniedBuiltIn").remove();janrain.capture.ui.renderScreen("editProfile");}},onProfileUpdate:function(L){p.scrollTo(0,0);I.API.onProfileUpdate();b.updateSub();j.janrain.screen.failedToUpdate=false;v.profileUpdates();j.janrain.screen.editProfile.completedProfileCheck();},onProfileAutoSave:function(L){if("durationSinceLastUpdate" in L){document.getElementById("capture_profile_saved").style.display="block";document.getElementById("capture_alert_callout").innerHTML=L.durationSinceLastUpdate;}},completedProfileCheck:function(){var N=false,L=h("#capture_editProfile_edit_zip").attr("value"),O=h("#capture_editProfile_edit_city").attr("value"),P=h("#capture_editProfile_edit_firstName").attr("value"),R=h("#capture_editProfile_edit_email").attr("value"),S=h("#capture_editProfile_edit_gender").attr("value"),M=h("#capture_editProfile_edit_country").find("option:selected").attr("value"),T=h("#capture_editProfile_edit_address1").attr("value"),Q=h("#capture_editProfile_edit_lastName").attr("value");if(P!==""&&Q!==""&&R!==""&&M!==""&&T!==""&&O!==""&&L!==""&&S!=="default"&&P!==" "&&Q!==" "&&R!==" "&&T!==" "&&O!==" "&&L!==" "){k.trigger("completeProfile",u.uuid);}else{}},onProfileFailedSave:function(){j.janrain.screen.failedToUpdate=true;}},registration:{clearInput:function(){}},uiReady:function(){if(B.janrainFlow==="profileFlow"){janrain.capture.ui.renderScreen("editProfile");}else{if(B.janrainFlow==="emailFlow"){janrain.capture.ui.renderScreen("registrationVerify");}else{if(B.janrainFlow==="passwordFlow"){janrain.capture.ui.renderScreen("resetPassword");}}}},onScreenShow:function(N){var U=j.janrain.screen;switch(N.screen){case"editProfile":U.currentScreen="editProfile";h("#captureRetrievingUserDataBuiltIn").hide();var O=false;setTimeout(function(){h(".cancel-button").click(function(){if(p.location.href.indexOf("#")>1){p.history.go(-2);}else{p.history.go(-1);}});function ae(af,ag,ah){if(af==null){return false;}if(typeof p.attachEvent==="object"){af.attachEvent("on"+ag,ah);}else{af.addEventListener(ag,ah,false);}}var X=document.getElementById("capture_editProfile_edit_country"),Y=h("#capture_editProfile_edit_state"),ad=h("#capture_editProfile_display_indicator_public_edit_state"),W=h("#capture_editProfile_display_indicator_private_edit_state"),aa=h("#capture_editProfile_display_option_public_edit_state"),ac=h("#capture_editProfile_display_option_private_edit_state"),Z=h("#capture_editProfile_form_item_edit_state").find("input");function ab(){if(!X||!Y){return false;}var af=Y.find("option:selected").attr("value");if(X.options[X.selectedIndex].value==="United States"){if(Y){if(Y.attr("disabled")&&af!=="state"){ad.removeClass("capture_toggled");W.addClass("capture_toggled");aa.removeClass("capture_checked");ac.addClass("capture_checked");Z.attr("value","private");Y.attr("disabled",false);Y.css({color:"black"});}else{if(Y.attr("disabled")&&af==="state"){Y.attr("disabled",false);Y.css({color:"black"});}}}}else{if(Y){Z.attr("value","private");Y.attr("disabled",true);Y.css({color:"lightgrey"});ad.removeClass("capture_toggled");W.addClass("capture_toggled");aa.removeClass("capture_checked");ac.addClass("capture_checked");}}}if(X&&!O){O=true;ae(X,"change",ab);}ab();},100);try{var T,L=h(".janrain_traditional_account_only");if(typeof p.localStorage!=="undefined"){T=localStorage.getItem("janrainLastAuthMethod");S();}else{T=h.cookie("janrainLastAuthMethod");S();}function S(){if(T==="socialSignin"&&L.size()>0){L.remove();}}}catch(Q){}break;case"publicProfile":var V=h(".make-acc");if(!E.session){V.show();}else{V.hide();}k.setUp();break;case"forgotPasswordSuccess":if(p.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){p.location="http://www.foxnews.com";},5000);}break;case"returnTraditional":setTimeout(function(){var W=janrain.capture.ui.getProfileCookieData("displayName"),X=document.getElementById("displayNameData");if(W&&X){X.innerHTML=W;}},500);break;case"registrationVerified":var M=h("#redirectTime"),P=9;R();function R(){setTimeout(function(){if(P===0){p.location="http://www.foxnews.com/community/user/profile/edit";}M.html(" "+P+((P<=1)?" second":" seconds"));P-=1;R();},1000);}break;default:break;}},onRenderComplete:function(M){var O=j.janrain.screen;switch(M.screen){case"editProfile":if(O.stateLookUp){b.lookUpUser();}else{if(O.failedToUpdate){b.onFail();}else{b.updateSubscribeState();}}var L=setTimeout(function(){try{if(M.builtInScreenRendered==="retrievingUserData"&&M.renderingBuiltInScreen){j.janrain.screen.stateOfEditProfile=true;}else{if(j.janrain.screen.stateOfEditProfile&&O.failedToUpdate==null){q.uReportTab();I.activityTab.initCallFromJanrain();}else{if(j.janrain.screen.stateOfEditProfile&&!O.failedToUpdate){q.uReportTab();I.activityTab.loadDataWhenFailed();k.getBadgeFromSelf.gatherUserInfo();}else{if(j.janrain.screen.stateOfEditProfile&&O.failedToUpdate){I.activityTab.loadDataWhenFailed();k.getBadgeFromSelf.gatherUserInfo();}}}}}catch(Q){if(j.janrain.screen.stateOfEditProfile){q.uReportTab();I.activityTab.initCallFromJanrain();k.getBadgeFromSelf.gatherUserInfo();}}clearTimeout(L);},100);break;case"publicProfile":if(!M.renderingBuiltInScreen){E.publicProfileLinkUUID();if("lookUpUUID" in u.userLivefyre){I.API.displayDataToPublicProfile(u.userLivefyre.lookUpUUID);}else{I.API.displayDataToPublicProfile(u.uuid);}auth_fox.ureport.uReportIdLookupAndDisplay(h(".capture_display_name").text(),true);if(typeof Badgeville!=="underfined"){if(B.janrainFlow==="profileFlow"||B.janrainFlow==="publicFlow"){k.getBadgesFromOthers.turnIdToEmail(M.flow.userUUID);}k.getBadgesFromOthers.getPlayer(k.getBadgesFromOthers.email);}}break;}var N=document.getElementById("capture_editProfile_resendLink");if(N){N.hasBeenClicked=false;h(N).click(function(){N.hasBeenClicked=true;});}var P=document.getElementById("forgotPassword");if(P&&P.style.display==="block"){if(E.reset){document.getElementById("capture_forgotPassword_forgotPassword_emailAddress").value="";document.getElementById("capture_forgotPassword_forgotPasswordForm_errorMessages").style.display="none";}}}},share:{shareSendComplete:function(L){v.emailShareSuccess();}},errorEvent:function(L){try{switch(L.stat){case"error":break;default:break;}}catch(M){}},onModalClose:function(){E.reset=true;},validation:{onValidationSuccess:function(){var L=document.getElementById("forgotPassword");if(L&&L.style.display==="block"){E.reset=false;}}},emailSent:function(L){var M=document.getElementById("capture_editProfile_resendLink"),N=h(M).parent();if(M){if(M.hasBeenClicked){N[0].removeChild(M);N.append('<a style="cursor: default; ">Email Sent</a>');}}}},livefyre:{displayLogo:function(){h("#livefyre_comment_stream").append('<div id="powered_by_livefyre_new"><a href="http://livefyre.com" target="_blank">Powered by Livefyre</a></div> ');},hashComment:function(){var N;try{if(p.FOX_metadescriptor&&p.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){h("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{if(p.location.host.indexOf("nation")>-1||h('meta[name="dc.type"]').attr("content")==="Text.Article"){var O=h(".dv-util > .dv-util-1 > a:eq(1)"),M=O.attr("href");M=M.replace("#disqus_thread","#commentsthread");O.attr("href",M);h("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{h("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}}}catch(L){}},logOut:function(){h.loadAttempt(60,250,function(){return(h("#livefyre_comment_stream").find(".fyre-user-loggedin").size()>0)?true:false;},function(){fyre.conv.BackplaneAuthDelegate.prototype.logout();p.Backplane.expectMessages("identity/logout");});},populatePublicProfile:function(){var L=t.setDomReady.publicProfile();L.comments.text(u.commentCount);L.likes.text(u.likeCount);u.commentCount=0;u.likeCount=0;}},badgeVille:{backplane:function(){}},displayName:function(){var L=this,M=t.setDomReady;if(M.acc.hasClass("alt-style")){M.user.find(".encapsulate p").html("Welcome, <strong>"+u.displayName+"</strong>");}else{if(M.name.size()>0){M.name.text(u.displayName);}else{if(auth_fox.dom.setDomReady.userOptions.find("p").size()>0){auth_fox.dom.setDomReady.userOptions.find("p").html("You're logged in as<span>"+u.displayName+"</span>");}}}j.domEvents.loginSuccess();},accountFuncBehaviour:function(){var M=t.setDomReady,L=this;M.login.addClass(B.classLogin);M.login.bind("click",j.janrain.signin);M.register.bind("click",j.janrain.traditionalSigin);M.logout.bind("click",j.janrain.signOut);},editProfile:function(L){p.location=K.editProfile;},displayShowsProfile:function(){var L=t.setDomReady.acc.find("strong");L.css("cursor","pointer");L.click(function(){j.editProfile();return false;});}};d=function(){};u={uuid:null,email:"",likeCount:0,commentCount:0,displayName:"",userJanrain:{},userLivefyre:{},userBadgeville:{}};var a=(function(){var L=function(){this.setDependencies();this.set();};L.prototype.set=function(){B.janrainFlow=(function(){var R="authFlow",Q=(p.FOX_Janrain_Page_Type)?p.FOX_Janrain_Page_Type:false;switch(Q){case"logout":R="logoutFlow";break;case"email-verification":R="emailFlow";break;case"edit-profile":R="profileFlow";break;case"password-reset":R="passwordFlow";break;case"public-profile":R="publicFlow";break;default:R="authFlow";break;}return R;}());var M=[["tools",z,g],["dom",t,c],["require",B,m],["backplane",l,F],["janrain",E,o],["livefyre",I,s],["badgeville",k,D],["events",j,C],["ureport",q,J],["user",u,d],["omniture",v,f],["whatcounts",b,w],["idms",G,r]];var O=new A(M),P;p.auth_fox=O;var N=function(){O.require.loadTemplate();O.events.accountDisplayBehaviour();O.events.accountFuncBehaviour();};if(typeof O.dom.setDomReady==="object"){P=O.dom.setDomReady;N();}else{P=O.dom.setDomReady(function(Q){t.setDomReady=Q;N();});}if(O.require.janrainFlow==="publicFlow"){O.livefyre.activityTab.tabActivity();auth_fox.livefyre.activityTab.hashTagGatherer().getPhotosAndId();auth_fox.ureport.uReportIdLookupAndDisplay(location.href.split("#")[1]);}};L.prototype.setDependencies=function(){p.AUTH_Manager=new FOX_DependencyManager();AUTH_Manager.addInstance("janrain",["janrain"]);AUTH_Manager.addInstance("capture",["janrain","capture"]);AUTH_Manager.addInstance("livefyre",["janrain","backplane","livefyre"]);AUTH_Manager.addInstance("backplane",["backplane"]);h.loadAttempt(60,500,function(){return(p.fyre&&h("#livefyre_comment_stream .fyre-widget").size()>0)?true:false;},function(){AUTH_Manager.fireReady("livefyre");});AUTH_Manager.onReady("livefyre",function(){n("********** LIVEFYRE IS READY !!! **********");});AUTH_Manager.onReady("janrain",function(){n("********** JANRAIN IS READY !!! **********");});AUTH_Manager.onReady("backplane",function(){n("********** BACKPLANE IS READY !!! **********");});AUTH_Manager.onReady("capture",function(){n("********** CAPTURE IS READY !!! **********");});if(p.CallStackTrigger){p.AUTH_LoginState=new CallStackTrigger();AUTH_LoginState.bind("onLogin",function(){n("[AUTH_LoginState] 'onLogin' triggered.");});AUTH_LoginState.bind("onLogout",function(){n("[AUTH_LoginState] 'onLogout' triggered.");});}};return L;}());if(!h.loadAttempt){(function(){function M(N){return typeof N==="function"?!0:!1;}var L=function(){var S,N=arguments;if(N.length===0){return !1;}var O={attempt:0,timeout:500};if(N.length===1&&typeof N[0]==="object"){for(S in N[0]){O[S]=N[0][S];}if(O.callback){S=O.callback;}else{return !1;}if(!S.check||!S.success){return !1;}else{O._check=S.check,O._success=S.success;}if(S.timedOut){O._timeout=S.timedOut;}}else{if(!isNaN(N[0])&&!isNaN(N[1])&&M(N[2])&&M(N[3])){O.attempt=N[0];O.timeout=N[1];O._check=N[2];O._success=N[3];if(N[4]){O._timeout=N[4];}if(N[5]){O._abort=N[5];}}else{if(M(N[0])&&M(N[1])){O._check=N[0];O._success=N[1];if(N[2]){O._timeout=N[2];}if(N[3]){O._abort=N[3];}}else{return !1;}}}if(!M(O._check)||!M(O._success)){return !1;}if(!M(O._timeout)){O._timeout=function(){};}if(isNaN(O.timeout)){return !1;}else{O.timeout=parseInt(O.timeout,10);}if(isNaN(O.attempt)){return !1;}else{O.attempt=parseInt(O.attempt,10);}var R=!1,P=!1;if(O.attempt&&O.timeout){var Q=function(){P?clearTimeout(R):O._check()?(O._success(),clearTimeout(R)):O.attempt>0?R=setTimeout(function(){Q();},O.timeout):O._timeout();O.attempt--;};Q();}else{R=setInterval(function(){P?clearInterval(R):O._check()&&(O._success(),clearInterval(R));},O.timeout);}return{abort:function(){P=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:L});}else{if(!p.loadAttempt){p.loadAttempt=L;}}})();}function y(P,O){P=P||2;var L=new Date();O=L.getMilliseconds()||"";var Q=L.getFullYear().toString()+(L.getMonth()+1).toString()+L.getDate().toString()+O,N=L.getHours()+1,M=L.getMinutes();Q+=N.toString()+((P&&!isNaN(P))?(Math.floor(M/parseInt(P,10))).toString():"");return Q;}return a;})(jQuery,window);(function(d,c){d(document).ready(function(){var h=(c.auth_fox&&c.auth_fox.whatcounts&&c.auth_fox.whatcounts.janrainNewsAlerts)?true:false;if(!h){return false;}d("#newsletter_form, #rss_newsletter_form").each(function(){var j=d(this);j.find('input[name="submit"]').click(function(){var l=(j.find("#newsletter_input").size()>-1)?j.find("#newsletter_input").val():j.find("#newsletter_email").val();if(d('input:[name="propID_terms"]').size()>0){var k=[];j.find(".option").each(function(){if(d(this).find('input:[name="propID_terms"]').is(":checked")){k.push(d(this).find('input:[name="slid"]').val());}});}else{var k=j.find("#newsletter_slid").val(),l=j.find("#newsletter_email").val();}auth_fox.whatcounts.janrainNewsAlerts(k,l);});});d(function(){d("#newsAlertsEmailSignup.component").each(function(){var j=d(this);FNHPtoSLIDS={BreakingNews:"C2F278094FACCEA62391025B7A52D8EB",BusinessNews:"5C84B893BD6D939E84FAE1A8E6E9525A",GretaWire:"D98A625593049BD23B5BE4FDF9C2351F",DailyNewsletter:"3DC725E303A24F8DA102192D9D5143D9",BestOfBusiness:"3DC725E303A24F8D39740C7B45D15F45",TopHeadlines:"3DC725E303A24F8DB05092D232355E43",MonthlyPolitics:"3DC725E303A24F8D836CEAE9B885C87D",LeisureLedger:"3DC725E303A24F8D02B1F9D9AAF16982",Fox411:"3DC725E303A24F8D9C92271F5026F381",BestOfOpinion:"3DC725E303A24F8D39740C7B45D15F45",SciTechGeekSheet:"3DC725E303A24F8DAB69E1C048904762"},j.find('input[name="submit"]').click(function(){var l=j.find('input:[name="email"]').val();if(d('input:[name="propID_terms"]').size()>-1){var k=[];j.find(".option").each(function(){var m=d(this).find('input:[name="propID_terms"]');if(m.is(":checked")){k.push(FNHPtoSLIDS[m.attr("id")]);}});}auth_fox.whatcounts.janrainNewsAlerts(k,l);});});});});var g,a,f;c.janrainShareOnload=function(){c.janrainShareLoaded=true;d(c).trigger("janrainShareModuleInit");};var b={domain:function(){return false;},meta:function(h,j){if(j==="prop"){j="property";}return d("meta["+j+'="'+h+'"]').attr("content");},metadata:function(n){var h=n.split("::"),k=h[0],l=h[1],j=h[2];return(b.meta(l,k)===j)?true:false;},trim:function(j,h){if(!j){return"";}if(j.length>h){j=j.substring(0,h)+" ...";}return j;},isDevice:function(){var h=false;h=("createTouch" in document)?true:false;h=(!h&&navigator.userAgent.match(/BlackBerry/i))?true:h;return h;}};a=function(){var h=this;this.ready=false;if(c.janrainShareLoaded){this.init();}else{d(c).bind("janrainShareModuleInit",function(){h.init();});}};a.prototype={init:function(){this.ready=true;this.janrain=c.janrain;this.setCallbacks();this.setTemplates();this.articleObj={};},setCallbacks:function(){var k=this.janrain,j=this.resetEmail,h=this;h.responseProvider=null;k.events.onShareLoginStart.addHandler(j);k.events.onShareLoginCancel.addHandler(j);k.events.onShareLoginError.addHandler(j);k.events.onShareSendStart.addHandler(function(l){if(c.auth_fox){if(l.provider==="facebook"){c.auth_fox.omniture.networkShareSuccess();h.responseProvider="facebook";}else{if(l.provider==="twitter"){c.auth_fox.omniture.networkShareSuccess();h.responseProvider="twitter";}else{if(l.provider==="linkedin"){c.auth_fox.omniture.networkShareSuccess();h.responseProvider="linkedin";}else{if(l.mode!=="email"){c.auth_fox.omniture.networkShareSuccess();}else{if(l.mode==="email"){c.auth_fox.omniture.emailShareSuccess();h.responseProvider="email";}}}}}}});k.events.onShareSendComplete.addHandler(function(l){switch(h.responseProvider){case"facebook":d("#janrain-share-providerpage-facebook").find("span.janrain-share-login-button-text").text("Shared on Facebook");break;case"twitter":d("#janrain-share-providerpage-twitter").find("span.janrain-share-login-button-text").text("Shared on Twitter");break;case"linkedin":d("#janrain-share-providerpage-linkedin").find("span.janrain-share-login-button-text").text("Shared on LinkedIn");break;default:d("#janrain-share-providerpage-email").find("span.janrain-share-login-button-text").text("Shared by Email");break;}auth_fox.badgeville.trigger("contentShare",h.articleObj.title);auth_fox.janrain.API.update("entity.update",auth_fox.janrain.API.updateAPI("share"));});},setTemplates:function(){d(".janrain-share-input").attr("placeholder","Write your message");d(".janrain-share-contactadd-input-placeholder").attr("placeholder","Add a contact");d(".janrain-share-contact-input-placeholder").attr("placeholder","Type contact name");d(".janrain-share-bubble").remove();d(".janrain-share-login-prefs-name").remove();d(".janrain_modal_closebutton").attr("href","javascript:;");this.resetEmail();},show:function(l,k,h){var n=this.janrain;var j=k.provider;var m=k.data;this.articleObj=k.data;n.engage.share.show();n.engage.share.setOrientation("landscape");n.engage.share.setTitle(m.title);n.engage.share.setUrl(m.linkBack);n.engage.share.setActionLink({name:"Read more",link:m.actLink});n.engage.share.setImage(m.image);n.engage.share.setDescription(m.desc);n.engage.share.showProvider(j);this.formatPreviewText({title:m.title,desc:m.desc,url:m.actLink});},resetEmail:function(){d(".janrain-share-login-messageemail, .janrain-share-login-messageemailshort").remove();d("#janrain-share-login-button-contact-email-yahoo .janrain-share-login-button-text").text("Yahoo");d("#janrain-share-login-button-contact-email-google .janrain-share-login-button-text").text("Google");},formatPreviewText:function(h){d(".janrain-share-preview-title").text(b.trim(h.title,70));d(".janrain-share-preview-url").text(b.trim(h.url,40));d(".janrain-share-preview-description").text(b.trim(h.desc,130));}};g=function(h){this.cfg=h;this.plugin=h.plugin;};g.prototype={set:function(l,k,h){var j=this,l=d(l);if(b.isDevice()){return l.hide();}l.unbind("click").bind("click",function(m){j.show(m,k,h);return false;});},reset:function(m,l,j){var k=this,m=d(m),h=l.data;if(b.isDevice()){return m.hide();}m.unbind("click").bind("click",function(n){l.data=h(n);k.show(n,l,j);return false;});},setLive:function(m,l,j){var k=this,m=d(m),h=l.data;if(b.isDevice()){return m.hide();}m.unbind("click").live("click",function(n){l.data=h(n);k.show(n,l,j);return false;});},show:function(l,k,h){var j=this.plugin;if(k.provider==="email"){c.auth_fox.omniture.emailShareStart();}else{c.auth_fox.omniture.networkShareStart();}j.show(l,k,h);return false;},showShare:function(j){var h=this.plugin;if(j.provider==="email"){c.auth_fox.omniture.emailShareStart();}else{c.auth_fox.omniture.networkShareStart();}h.show(null,j,null);return false;},hide:function(k,j,h){}};f=function(){var k={},j=b.meta,h=function(l,m){k[l]=m;};h("v8-article",function(){var p=d("#article-title").text()||j("og:title","prop")||j("dc.title","name");var n=d("link[rel='image_src']").attr("href")||j("og:image","prop")||parsers.defaultImg.v8Article;var o=d((c.vcmArticleInfo&&vcmArticleInfo.summary)?vcmArticleInfo.summary:"<div></div>").text()||j("description","name")||j("dc.description","name");var l,m;l=m=(function(){var t=c.location,r,q=d('link[rel="shorturl"]'),s=d('link[rel="canonical"]');if(q.size()>0){r=q.attr("href");}else{if(s.size()>0){r=s.attr("href");}else{r=t.protocol+"//"+t.hostname+t.pathname;}}return r;}());return{title:p,image:unescape(n),desc:o,userMessage:"",actLink:l,linkBack:m};});h("recipe-article",function(){var p=d("#article-title").text()||j("og:title","prop")||j("dc.title","name");var n=d("link[rel='image_src']").attr("href")||j("og:image","prop")||parsers.defaultImg.v8Article;var o=j("description","name")||j("dc.description","name");var l,m;l=m=(function(){var t=c.location,r,q=d('link[rel="shorturl"]'),s=d('link[rel="canonical"]');if(q.size()>0){r=q.attr("href");}else{if(s.size()>0){r=s.attr("href");}else{r=t.protocol+"//"+t.hostname+t.pathname;}}return r;}());return{title:p,image:unescape(n),desc:o,userMessage:"",actLink:l,linkBack:m};});h("nation-article",function(){var p=d("#article-title").text()||j("og:title","prop")||j("dc.title","name");var n=d("link[rel='image_src']").attr("href")||j("og:image","prop")||parsers.defaultImg.v8Article;var o=j("description","name")||j("dc.description","name");var l,m;l=m=(function(){var t=c.location,r,q=d('link[rel="shorturl"]'),s=d('link[rel="canonical"]');if(q.size()>0){r=q.attr("href");}else{if(s.size()>0){r=s.attr("href");}else{r=t.protocol+"//"+t.hostname+t.pathname;}}return r;}());return{title:p,image:unescape(n),desc:o,userMessage:"",actLink:l,linkBack:m};});h("live-event-article",function(){var q=d("#article-title").text()||j("og:title","prop")||j("dc.title","name");var o=d("link[rel='image_src']").attr("href")||j("og:image","prop")||parsers.defaultImg.v8Article;var p=j("description","name")||j("dc.description","name");var l,n;l=n=(function(){var u=c.location,s,r=d('link[rel="shorturl"]'),t=d('link[rel="canonical"]');if(r.size()>0){s=r.attr("href");}else{if(t.size()>0){s=t.attr("href");}else{s=u.protocol+"//"+u.hostname+u.pathname;}}return s;}());var m={title:q,image:unescape(o),desc:p,userMessage:"",actLink:l,linkBack:n};return{title:q,image:unescape(o),desc:p,userMessage:"",actLink:l,linkBack:n};});h("nation-front",function(){return function(m){var r,p,q,n,o;var l=d(m.currentTarget).parentsUntil("li");l.find("img.m-1").each(function(){p=("http://"+c.location.host+d(this).attr("src"))||j("og:image","prop");});l.find(".a-3").each(function(){var s=d(this);r=d(this).text();q="America's Talking - All Opinions Welcome. Let your voice be heard @ FoxNation.com.";n=o=s.attr("href");});return{title:r,image:unescape(p),desc:q,userMessage:"",actLink:n,linkBack:o};};});h("drupal6-shows-article",function(){var p=d("#content-main h3 a").text()||j("dc.title","name")||j("og:title","name");var o=(function(){var q="";var r=d("#content-main .deck > p, #content-main .transcript > p").each(function(){var s=d(this);if(s.html().indexOf("<script")<0&&s.html().indexOf("<object")<0){if(q.length<360){q+=s.text();}}});if(q.length>360){q=q.substring(0,357)+"...";}return q;}());var l,n;l=n=(function(){var t=c.location,r,q=d('link[rel="shorturl"]'),s=d('link[rel="canonical"]');if(q.size()>0){r=q.attr("href");}else{if(s.size()>0){r=s.attr("href");}else{r=t.protocol+"//"+t.hostname+t.pathname;}}return r||j("og:url","prop");}());var m=(function(){var q=d("#content-main .photo > img, #content-main img.alignleft, #content-main img.alignright").attr("src");return(q?("http://"+c.location.host+q):j("og:image","prop"));}());return{title:p,image:unescape(m),desc:o,userMessage:"",actLink:l,linkBack:n};});h("drupal7-shows-blog",function(){var m=function(n){return(n.indexOf("http")>-1)?n:"http://"+c.location.host+n;};var l=function(){var q=c.location,o=null,n=d('link[rel="shorturl"]'),p=d('link[rel="canonical"]');if(n.size()>0&&n){o=n.attr("href");}else{if(p.size()>0&&p){o=p.attr("href");}else{o=q.protocol+"//"+q.hostname+q.pathname;}}return o||j("og:url","prop");};return function(s){var r=d(s.currentTarget),t=r,n=(d(".post").size()>0)?".post":"#post-detail",w=t.parentsUntil(".content",n);var v=w.find(".twitter-tweet-rendered .entry-title").text()||w.find("h2").text()||w.find(".post-content > p").text()||w.find("#twtr-widget > p").text()||w.find("p:first").text()||d("#article-title").text()||j("og:title","prop")||j("dc.title","name");var q=w.find(".twitter-tweet-rendered .entry-title").text()||w.find(".post-content > p").text()||j("description","name")||j("dc.description","name");var y,u;y=u=(function(){var A=w.find("h2");var B=w.find(".comments");var z=j("dc.type","name");if(z&&(z==="Text.Article"||z==="InteractiveResource"||z==="MovingImage")){return j("og:url","prop");}if(j("prism.subsection1","name")==="fox-files"||j("prism.subsection1","name")==="foxfriendsfirst"){return j("og:url","prop");}if(A.find("a").length>0&&j("prism.subsection1","name")==="willisreport"){return A.find("a").attr("href");}if(j("prism.subsection1","name")==="willisreport"&&j("prism.subsection2","name")==="topfive"){return l();}if(A.length>0){return A.find("a").attr("href");}if(w.length>0){return B.find("a").attr("href");}})();var o=d("link[rel='image_src']").attr("href")||j("og:image","prop");try{y=u=m(y);}catch(p){console.log("err",p);}return{title:v,image:unescape(o),desc:q,userMessage:"",actLink:y,linkBack:u};};});h("trending-fbn",function(){return function(o){var l=d(o.currentTarget),n=l.find("span"),m=n.attr("data-url"),p=n.attr("data-title");return{title:p,image:unescape("http://global.fncstatic.com/static/v/all/img/fb_128x128.png"),desc:p,userMessage:"",actLink:m,linkBack:m};};});h("trending-fnc",function(){return function(o){var l=d(o.currentTarget),n=l.find("span"),m=n.attr("data-url"),p=n.attr("data-title");return{title:p,image:unescape("http://global.fncstatic.com/static/v/all/img/fn_128x128.png"),desc:p,userMessage:"",actLink:m,linkBack:m};};});h("classification-front",function(){return function(m){var r,p,q,n,o;var l=d(m.currentTarget).parentsUntil("ul");p=l.find(".m img").attr("src")||"";r=l.find("h3").text()||"";q=l.find(".summary").text()||"";n=o=l.find("h3 a").attr("href")||"";return{title:r,image:unescape(p),desc:q,userMessage:"",actLink:n,linkBack:o};};});return function(m){var l={};try{l=k[m]();}catch(n){}return l;};};d(function(){var p=new a();var q=new g({plugin:p});var j=new f();var m=b.metadata;c.FOX_ShareMedia=q;var h,o,n,k;var l=function(r){var s=j(r+"-article");q.set(".share",{provider:"facebook",data:s});q.set(".email",{provider:"email",data:s});};h=function(){if(m("name::prism.section::nation")){var r=m;if(r("name::prism.aggregationType::root")||r("name::prism.aggregationType::front")){var u=j("nation-front");q.setLive(".fbook-1",{provider:"facebook",data:u});q.setLive(".twtr-1",{provider:"twitter",data:u});}else{if(r("name::prism.aggregationType::subsection")){var u=j("nation-article");q.set(".fbook-1",{provider:"facebook",data:u});q.set(".twtr-1",{provider:"twitter",data:u});}}}else{if(m("name::prism.aggregationType::topics")){var u=j("classification-front");q.setLive(".trending-fbk",{provider:"facebook",data:u});q.setLive(".trending-twt",{provider:"twitter",data:u});}else{if(m("name::prism.section::topics")&&m("name::prism.aggregationType::subsection")){var u=j("live-event-article");q.set(".facebook",{provider:"facebook",data:u});q.set(".twitter",{provider:"twitter",data:u});}else{if(m("name::dc.type::Text.Article",true)&&m("name::prism.genre::transcript")){var u=j("drupal7-shows-blog");q.reset(".user-interaction .recommend a",{provider:"facebook",data:u});q.reset(".user-interaction .tweet a",{provider:"twitter",data:u});if(m("name::prism.section::shows")){q.reset(".share",{provider:"facebook",data:u});q.reset(".email",{provider:"email",data:u});}}else{if(m("name::prism.section::shows")){if(m("property::og:type::article")&&(!m("name::prism.subsection1::specialreport")&&!m("name::prism.subsection1::foxnewssunday")&&!m("name::prism.subsection1::fox-files")&&!m("name::prism.subsection1::foxfriendsfirst"))){var u=j("drupal6-shows-article");q.set(".share",{provider:"facebook",data:u});}if(m("name::prism.subsection1::specialreport")||m("name::prism.subsection1::foxnewssunday")||m("name::prism.subsection1::fox-files")||m("name::prism.subsection1::foxfriendsfirst")){var u=j("drupal7-shows-blog");q.reset(".date li a.facebook",{provider:"facebook",data:u});q.reset(".date li a.twitter",{provider:"twitter",data:u});if(m("name::prism.subsection1::fox-files")){q.reset("#post-detail a.share",{provider:"facebook",data:u});}}if(m("name::prism.subsection1::foxfriendsfirst")){q.reset(".post-detail a.trending-fbk",{provider:"facebook",data:u});q.reset(".post-detail a.trending-twt",{provider:"twitter",data:u});}if((m("name::prism.subsection1::specialreport")||m("name::prism.subsection1::foxnewssunday"))&&m("name::prism.subsection2::transcript")){l("v8");}}else{if(m("name::prism.subsection1::trend")){var s=function(){d(".fbkshares").css("visibility","hidden");d(".twtshares").css("visibility","hidden");var v=j("trending-fnc");q.reset(".fbkshares",{provider:"facebook",data:v});q.reset(".twtshares",{provider:"twitter",data:v});setTimeout(function(){d(".fbkshares").css("visibility","visible").hide().fadeIn(120);d(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};c.setupSharingLinks=function(){try{s();}catch(v){}};try{s();}catch(t){}}else{if(m("name::prism.section::community")&&m("name::prism.subsection1::newsletter")){c.excludeNewsletterShare=true;}else{if(m("name::prism.section::politics")&&m("name::prism.subsection1::blogs")){l("v8");}else{if(m("property::og:type::article")){l("v8");}else{if(m("name::prism.aggregationType::recipe")){l("recipe");}}}}}}}}}}};o=function(){if(m("property::og:type::article")&&(!m("name::prism.subsection1::willisreport"))){var t=j("drupal6-shows-article");q.set(".share",{provider:"facebook",data:t});q.set(".email",{provider:"email",data:t});}if(m("name::prism.subsection1::willisreport")){var t=j("drupal7-shows-blog");q.reset(".date li a.facebook",{provider:"facebook",data:t});q.reset(".date li a.twitter",{provider:"twitter",data:t});}else{if(m("name::prism.subsection1::trend")){var r=function(){d(".fbkshares").css("visibility","hidden");d(".twtshares").css("visibility","hidden");var u=j("trending-fbn");q.reset(".fbkshares",{provider:"facebook",data:u});q.reset(".twtshares",{provider:"twitter",data:u});setTimeout(function(){d(".fbkshares").css("visibility","visible").hide().fadeIn(120);d(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};c.setupSharingLinks=function(){try{r();}catch(u){}};try{r();}catch(s){}}else{if(m("property::og:type::article")){l("v8");}}}};n=function(){if(m("property::og:type::article")){l("v8");}};k=function(){if(m("property::og:type::article")){l("v8");}};if(m("name::prism.channel::fnc")){h();}if(m("name::prism.channel::fbn")){o();}if(m("name::prism.channel::fnl")){n();}if(m("name::prism.channel::fsb")){k();}});})(jQuery,window);
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var G="undefined",t="object",V="Shockwave Flash",Z="ShockwaveFlash.ShockwaveFlash",s="application/x-shockwave-flash",U="SWFObjectExprInst",A="onreadystatechange",R=window,l=document,v=navigator,W=false,X=[j],q=[],Q=[],L=[],n,T,H,E,M=false,a=false,p,J,o=true,P=function(){var ad=typeof l.getElementById!=G&&typeof l.getElementsByTagName!=G&&typeof l.createElement!=G,ak=v.userAgent.toLowerCase(),ab=v.platform.toLowerCase(),ah=ab?/win/.test(ab):/win/.test(ak),af=ab?/mac/.test(ab):/mac/.test(ak),ai=/webkit/.test(ak)?parseFloat(ak.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,aa=!+"\v1",aj=[0,0,0],ae=null;if(typeof v.plugins!=G&&typeof v.plugins[V]==t){ae=v.plugins[V].description;if(ae&&!(typeof v.mimeTypes!=G&&v.mimeTypes[s]&&!v.mimeTypes[s].enabledPlugin)){W=true;aa=false;ae=ae.replace(/^.*\s+(\S+\s+\S+$)/,"$1");aj[0]=parseInt(ae.replace(/^(.*)\..*$/,"$1"),10);aj[1]=parseInt(ae.replace(/^.*\.(.*)\s.*$/,"$1"),10);aj[2]=/[a-zA-Z]/.test(ae)?parseInt(ae.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof R.ActiveXObject!=G){try{var ag=new ActiveXObject(Z);if(ag){ae=ag.GetVariable("$version");if(ae){aa=true;ae=ae.split(" ")[1].split(",");aj=[parseInt(ae[0],10),parseInt(ae[1],10),parseInt(ae[2],10)];}}}catch(ac){}}}return{w3:ad,pv:aj,wk:ai,ie:aa,win:ah,mac:af};}(),m=function(){if(!P.w3){return;}if((typeof l.readyState!=G&&l.readyState=="complete")||(typeof l.readyState==G&&(l.getElementsByTagName("body")[0]||l.body))){g();}if(!M){if(typeof l.addEventListener!=G){l.addEventListener("DOMContentLoaded",g,false);}if(P.ie&&P.win){l.attachEvent(A,function(){if(l.readyState=="complete"){l.detachEvent(A,arguments.callee);g();}});if(R==top){(function(){if(M){return;}try{l.documentElement.doScroll("left");}catch(aa){setTimeout(arguments.callee,0);return;}g();})();}}if(P.wk){(function(){if(M){return;}if(!/loaded|complete/.test(l.readyState)){setTimeout(arguments.callee,0);return;}g();})();}u(g);}}();function g(){if(M){return;}try{var ac=l.getElementsByTagName("body")[0].appendChild(F("span"));ac.parentNode.removeChild(ac);}catch(ad){return;}M=true;var aa=X.length;for(var ab=0;ab<aa;ab++){X[ab]();}}function N(aa){if(M){aa();}else{X[X.length]=aa;}}function u(ab){if(typeof R.addEventListener!=G){R.addEventListener("load",ab,false);}else{if(typeof l.addEventListener!=G){l.addEventListener("load",ab,false);}else{if(typeof R.attachEvent!=G){k(R,"onload",ab);}else{if(typeof R.onload=="function"){var aa=R.onload;R.onload=function(){aa();ab();};}else{R.onload=ab;}}}}}function j(){if(W){Y();}else{K();}}function Y(){var aa=l.getElementsByTagName("body")[0];var ad=F(t);ad.setAttribute("type",s);var ac=aa.appendChild(ad);if(ac){var ab=0;(function(){if(typeof ac.GetVariable!=G){var ae=ac.GetVariable("$version");if(ae){ae=ae.split(" ")[1].split(",");P.pv=[parseInt(ae[0],10),parseInt(ae[1],10),parseInt(ae[2],10)];}}else{if(ab<10){ab++;setTimeout(arguments.callee,10);return;}}aa.removeChild(ad);ac=null;K();})();}else{K();}}function K(){var aj=q.length;if(aj>0){for(var ai=0;ai<aj;ai++){var ab=q[ai].id;var ae=q[ai].callbackFn;var ad={success:false,id:ab};if(P.pv[0]>0){var ah=c(ab);if(ah){if(I(q[ai].swfVersion)&&!(P.wk&&P.wk<312)){z(ab,true);if(ae){ad.success=true;ad.ref=C(ab);ae(ad);}}else{if(q[ai].expressInstall&&D()){var al={};al.data=q[ai].expressInstall;al.width=ah.getAttribute("width")||"0";al.height=ah.getAttribute("height")||"0";if(ah.getAttribute("class")){al.styleclass=ah.getAttribute("class");}if(ah.getAttribute("align")){al.align=ah.getAttribute("align");}var ak={};var aa=ah.getElementsByTagName("param");var af=aa.length;for(var ag=0;ag<af;ag++){if(aa[ag].getAttribute("name").toLowerCase()!="movie"){ak[aa[ag].getAttribute("name")]=aa[ag].getAttribute("value");}}S(al,ak,ab,ae);}else{r(ah);if(ae){ae(ad);}}}}}else{z(ab,true);if(ae){var ac=C(ab);if(ac&&typeof ac.SetVariable!=G){ad.success=true;ad.ref=ac;}ae(ad);}}}}}function C(ad){var aa=null;var ab=c(ad);if(ab&&ab.nodeName=="OBJECT"){if(typeof ab.SetVariable!=G){aa=ab;}else{var ac=ab.getElementsByTagName(t)[0];if(ac){aa=ac;}}}return aa;}function D(){return !a&&I("6.0.65")&&(P.win||P.mac)&&!(P.wk&&P.wk<312);}function S(ad,ae,aa,ac){a=true;H=ac||null;E={success:false,id:aa};var ah=c(aa);if(ah){if(ah.nodeName=="OBJECT"){n=h(ah);T=null;}else{n=ah;T=aa;}ad.id=U;if(typeof ad.width==G||(!/%$/.test(ad.width)&&parseInt(ad.width,10)<310)){ad.width="310";}if(typeof ad.height==G||(!/%$/.test(ad.height)&&parseInt(ad.height,10)<137)){ad.height="137";}l.title=l.title.slice(0,47)+" - Flash Player Installation";var ag=P.ie&&P.win?"ActiveX":"PlugIn",af="MMredirectURL="+R.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ag+"&MMdoctitle="+l.title;if(typeof ae.flashvars!=G){ae.flashvars+="&"+af;}else{ae.flashvars=af;}if(P.ie&&P.win&&ah.readyState!=4){var ab=F("div");aa+="SWFObjectNew";ab.setAttribute("id",aa);ah.parentNode.insertBefore(ab,ah);ah.style.display="none";(function(){if(ah.readyState==4){ah.parentNode.removeChild(ah);}else{setTimeout(arguments.callee,10);}})();}w(ad,ae,aa);}}function r(ab){if(P.ie&&P.win&&ab.readyState!=4){var aa=F("div");ab.parentNode.insertBefore(aa,ab);aa.parentNode.replaceChild(h(ab),aa);ab.style.display="none";(function(){if(ab.readyState==4){ab.parentNode.removeChild(ab);}else{setTimeout(arguments.callee,10);}})();}else{ab.parentNode.replaceChild(h(ab),ab);}}function h(af){var ae=F("div");if(P.win&&P.ie){ae.innerHTML=af.innerHTML;}else{var ab=af.getElementsByTagName(t)[0];if(ab){var ag=ab.childNodes;if(ag){var aa=ag.length;for(var ad=0;ad<aa;ad++){if(!(ag[ad].nodeType==1&&ag[ad].nodeName=="PARAM")&&!(ag[ad].nodeType==8)){ae.appendChild(ag[ad].cloneNode(true));}}}}}return ae;}function w(al,aj,ab){var aa,ad=c(ab);if(P.wk&&P.wk<312){return aa;}if(ad){if(typeof al.id==G){al.id=ab;}if(P.ie&&P.win){var ak="";for(var ah in al){if(al[ah]!=Object.prototype[ah]){if(ah.toLowerCase()=="data"){aj.movie=al[ah];}else{if(ah.toLowerCase()=="styleclass"){ak+=' class="'+al[ah]+'"';}else{if(ah.toLowerCase()!="classid"){ak+=" "+ah+'="'+al[ah]+'"';}}}}}var ai="";for(var ag in aj){if(aj[ag]!=Object.prototype[ag]){ai+='<param name="'+ag+'" value="'+aj[ag]+'" />';}}ad.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ak+">"+ai+"</object>";Q[Q.length]=al.id;aa=c(al.id);}else{var ac=F(t);ac.setAttribute("type",s);for(var af in al){if(al[af]!=Object.prototype[af]){if(af.toLowerCase()=="styleclass"){ac.setAttribute("class",al[af]);}else{if(af.toLowerCase()!="classid"){ac.setAttribute(af,al[af]);}}}}for(var ae in aj){if(aj[ae]!=Object.prototype[ae]&&ae.toLowerCase()!="movie"){f(ac,ae,aj[ae]);}}ad.parentNode.replaceChild(ac,ad);aa=ac;}}return aa;}function f(ac,aa,ab){var ad=F("param");ad.setAttribute("name",aa);ad.setAttribute("value",ab);ac.appendChild(ad);}function B(ab){var aa=c(ab);if(aa&&aa.nodeName=="OBJECT"){if(P.ie&&P.win){aa.style.display="none";(function(){if(aa.readyState==4){b(ab);}else{setTimeout(arguments.callee,10);}})();}else{aa.parentNode.removeChild(aa);}}}function b(ac){var ab=c(ac);if(ab){for(var aa in ab){if(typeof ab[aa]=="function"){ab[aa]=null;}}ab.parentNode.removeChild(ab);}}function c(ac){var aa=null;try{aa=l.getElementById(ac);}catch(ab){}return aa;}function F(aa){return l.createElement(aa);}function k(ac,aa,ab){ac.attachEvent(aa,ab);L[L.length]=[ac,aa,ab];}function I(ac){var ab=P.pv,aa=ac.split(".");aa[0]=parseInt(aa[0],10);aa[1]=parseInt(aa[1],10)||0;aa[2]=parseInt(aa[2],10)||0;return(ab[0]>aa[0]||(ab[0]==aa[0]&&ab[1]>aa[1])||(ab[0]==aa[0]&&ab[1]==aa[1]&&ab[2]>=aa[2]))?true:false;}function y(ag,ab,ah,af){if(P.ie&&P.mac){return;}var ad=l.getElementsByTagName("head")[0];if(!ad){return;}var aa=(ah&&typeof ah=="string")?ah:"screen";if(af){p=null;J=null;}if(!p||J!=aa){var ac=F("style");ac.setAttribute("type","text/css");ac.setAttribute("media",aa);p=ad.appendChild(ac);if(P.ie&&P.win&&typeof l.styleSheets!=G&&l.styleSheets.length>0){p=l.styleSheets[l.styleSheets.length-1];}J=aa;}if(P.ie&&P.win){try{ag=ag.replace(/\:/g,"\\:");p.addRule(ag,ab);}catch(ae){try{p.addRule(ag,ab);}catch(ae){}}}else{if(p&&typeof l.createTextNode!=G){p.appendChild(l.createTextNode(ag+" {"+ab+"}"));}}}function z(ac,aa){if(!o){return;}var ab=aa?"visible":"hidden";if(M&&c(ac)){c(ac).style.visibility=ab;}else{y("#"+ac,"visibility:"+ab);}}function O(ab){var ac=/[\\\"<>\.;]/;var aa=ac.exec(ab)!=null;return aa&&typeof encodeURIComponent!=G?encodeURIComponent(ab):ab;}var d=function(){if(P.ie&&P.win){window.attachEvent("onunload",function(){var af=L.length;for(var ae=0;ae<af;ae++){L[ae][0].detachEvent(L[ae][1],L[ae][2]);}var ac=Q.length;for(var ad=0;ad<ac;ad++){B(Q[ad]);}for(var ab in P){P[ab]=null;}P=null;for(var aa in swfobject){swfobject[aa]=null;}swfobject=null;});}}();return{registerObject:function(ae,aa,ad,ac){if(P.w3&&ae&&aa){var ab={};ab.id=ae;ab.swfVersion=aa;ab.expressInstall=ad;ab.callbackFn=ac;q[q.length]=ab;z(ae,false);}else{if(ac){ac({success:false,id:ae});}}},getObjectById:function(aa){if(P.w3){return C(aa);}},embedSWF:function(ae,ak,ah,aj,ab,ad,ac,ag,ai,af){var aa={success:false,id:ak};if(P.w3&&!(P.wk&&P.wk<312)&&ae&&ak&&ah&&aj&&ab){z(ak,false);N(function(){ah+="";aj+="";var am={};if(ai&&typeof ai===t){for(var ao in ai){am[ao]=ai[ao];}}am.data=ae;am.width=ah;am.height=aj;var ap={};if(ag&&typeof ag===t){for(var an in ag){ap[an]=ag[an];}}if(ac&&typeof ac===t){for(var al in ac){if(typeof ap.flashvars!=G){ap.flashvars+="&"+al+"="+ac[al];}else{ap.flashvars=al+"="+ac[al];}}}if(I(ab)){var aq=w(am,ap,ak);if(am.id==ak){z(ak,true);}aa.success=true;aa.ref=aq;}else{if(ad&&D()){am.data=ad;S(am,ap,ak,af);return;}else{z(ak,true);}}if(af){af(aa);}});}else{if(af){af(aa);}}},switchOffAutoHideShow:function(){o=false;},ua:P,getFlashPlayerVersion:function(){return{major:P.pv[0],minor:P.pv[1],release:P.pv[2]};},hasFlashPlayerVersion:I,createSWF:function(ac,ab,aa){if(P.w3){return w(ac,ab,aa);}else{return undefined;}},showExpressInstall:function(ac,ad,aa,ab){if(P.w3&&D()){S(ac,ad,aa,ab);}},removeSWF:function(aa){if(P.w3){B(aa);}},createCSS:function(ad,ac,ab,aa){if(P.w3){y(ad,ac,ab,aa);}},addDomLoadEvent:N,addLoadEvent:u,getQueryParamValue:function(ad){var ac=l.location.search||l.location.hash;if(ac){if(/\?/.test(ac)){ac=ac.split("?")[1];}if(ad==null){return O(ac);}var ab=ac.split("&");for(var aa=0;aa<ab.length;aa++){if(ab[aa].substring(0,ab[aa].indexOf("="))==ad){return O(ab[aa].substring((ab[aa].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(a){var aa=c(U);if(aa&&n){aa.parentNode.replaceChild(n,aa);if(T){z(T,true);if(P.ie&&P.win){n.style.display="block";}}if(H){H(E);}}a=false;}}};}();(function(b){var f=FOX_HP,a=f.site.Add,d=f.site.OnDocReady,c=f.site.OnPageReady;d(function(){b.ad.init();if(window.location.search.search(/test=/)>-1){b("#board1-970x66, #board2-970x66").attr("class","ad dc");}});c(function(){b("#nav-primary ul li:first").addClass("active");b.ad.pre();if(b.browser.mozilla&&b.browser.version.substr(0,2)=="1.8"){b(window).load(function(){b(".ads .ad").filter(function(){return(b(this).css("display")==="inline-block")?true:false;}).wrapInner("<div></div>");});b(function(){b("#section-head *, .component *").filter(function(){return(b(this).css("display")==="inline-block")?true:false;}).wrapInner("<div></div>");});}b(".wi-gov:first").each(function(){var g=b(this);if(window.FOX_GOVRecall){FOX_GOVRecall.set(g);}});b("#features-faces ul:first li a").each(function(){var m=b(this),k=m.attr("onclick")||false,g=m.attr("href")||"",j="",h="";if(g.indexOf("http://")===0){if(g.indexOf("?")>-1){h=g.substr(g.indexOf("?")+1).split("?")[0];g=g.substring(0,g.indexOf("?"));h=h.replace("test=faces","");h=b.trim(h);if(h.length===1){h="";}}if(g.indexOf("#")>-1){j=g.substr(g.indexOf("#")+1).split("#")[0];g=g.substring(0,g.indexOf("#"));}var l=(function(){var n=false;if(g.indexOf("smallbusiness.foxbusiness.com")>-1||g.indexOf("foxsmallbusinesscenter.com")>-1){n="sbcfeatures";}else{if(g.indexOf("foxbusiness.com")>-1){n="fbfeatures";}else{if(g.indexOf("foxnews.com")>-1){n="features";}}}n=(!n)?"":("intcmp="+n);return n;}());g=g+(((h.length>1)?("?"+h+"&"):"?")+l);g=g+((j.length>1)?("#"+j):"");m.attr("href",g);}});b(".component.entries-grid > .section ul.list-ext-7 > li a").each(function(){var l=b(this),g=l.attr("href")||"",j="",h="";if(g.indexOf("#")!==0){if(g.indexOf("?")>-1){h=g.substr(g.indexOf("?")+1).split("?")[0];g=g.substring(0,g.indexOf("?"));h=b.trim(h);if(h.length===1){h="";}}if(g.indexOf("#")>-1){j=g.substr(g.indexOf("#")+1).split("#")[0];g=g.substring(0,g.indexOf("#"));}var k="intcmp=HPBucket";g=g+"?"+k+((h.length>1)?("&"+h):"");g=g+((j.length>1)?("#"+j):"");l.attr("href",g);}});b("#market-snapshot").each(function(){marketSnapShot.init(b(this));});f.utils.extLink.set();});d("pushDown",function(){return false;var h=(function(){var q=false,v="FX_IPPD",o=(window.localStorage)?localStorage:false;if(!window.localStorage){return true;}if(localStorage[v]){var t=new Date(localStorage[v]);if(!isNaN(t.getTime())){var u=1000*60*60*24,r=1000*60;var p=new Date(),s=Math.round(Math.abs(p.getTime()-t.getTime())/u);if(s>7){q=true;}}else{q=true;}if(q){localStorage.removeItem(v);localStorage.setItem(v,(new Date()).toString());}}else{localStorage.removeItem(v);localStorage.setItem(v,(new Date()).toString());q=true;}return q;}());if(!h){return false;}var m=b('<div id="expand"><div class="encap"><img src="http://global.fncstatic.com/static/v/all/img/head/expand-ipad.png" alt="iPad" /><div class="dl"><h2>Download the Fox News iPad App</h2><a href="http://itunes.apple.com/us/app/fox-news-for-ipad/id436484582?mt=8" rel="external" class="dl">Download</a></div><a href="#" class="close">Close</a></div></div>');var l=b("#section-head"),k=l.find(".encapsulate:first"),g=k.find("#util");k.prepend(m.css("height",0));var n=k.find("#expand");var j=function(q){var p=(q)?0:62,o=(q)?62:0;n.animate({height:p},{step:function(r){diff=r-o;o=r;var u=parseFloat(l.css("background-position").split(" ")[1].replace("px",""),10),t=parseFloat(l.css("padding-top").replace("px",""),10),s=parseFloat(g.css("top").replace("px",""),10);u+=diff;t+=diff;s+=diff;l.css({"background-position":"50% "+u+"px","padding-top":t+"px"});g.css("top",s+"px");},duration:2000,easing:"swing",complete:function(){if(q){b(this).css("display","none");}}});};n.find("a.close").click(function(){if(b(this).data("clicked")){return false;}b(this).data("clicked",true);j(true);return false;});n.find("a[rel='external']").click(function(){window.open(b(this).attr("href"),"_blank");return false;});j();});a("headlineTicker",function(){var g={id:"section-ticker",location:"http://global.fncstatic.com/static/v/fn-hp/swf/ticker.swf",dim:[604,21],flash:{version:"9.0.0",expressInstall:"http://interactive.foxnews.com/swf/swfobject/expressInstall.swf",vars:null},params:{wmode:"opaque",scale:"noScale",menu:"false"}};function h(){return("createTouch" in document)?true:false;}if(!h()&&typeof swfobject!=="undefined"){swfobject.embedSWF(g.location,g.id,g.dim[0],g.dim[1],g.flash.version,g.flash.expressInstall,g.flash.vars,g.params);}else{b("#section-ticker").hide();}});c("lazyLoadEvent",function(){b("img.unloaded_img").lazyload({effect:"fadeIn",failurelimit:50,threshold:400,effectspeed:200});setTimeout(function(){f.site.headlineTicker();},7000);});c("adTracking",{init:function(){var g=this;g.general();g.linkRelated();},general:function(){b("#headline-callout .action .sign-up").click(function(){try{b.ad.track({newsletter:{signup:true}});}catch(g){}});b("#newsAlertsEmailSignup .btn-smll").click(function(){try{b.ad.track({newsletter:{signup:true}});}catch(g){}});},linkRelated:function(){var j=this;var h=function(p){var m,n=["foxnews.com","foxbusiness.com","foxnewsinsider.com"],l=n.length,o=false;for(m=0;m<l;m+=1){if(p.indexOf(n[m])>-1){o=true;break;}}if(!o){if(p.charAt(0)==="/"||p.indexOf("siteStreamLivePlayer")>-1){o=true;}}return o;};var k=function(l){return(l!=="#")?true:false;};var g=function(o,n,m,l){m=(m!==null)?m:true;l=(l!==null)?l:true;o.find("a").each(function(){var p=b(this),q=b.trim(p.attr("href")||"");if(k(q)){p.click(function(){if(h(q)&&l){b.ad.track({"link-track":{url:q,"link-location":n,section:b.ad._meta.raw.section}});}else{if(m){b.ad.track({externalLinks:{url:q,"link-location":n,section:b.ad._meta.raw.section}});}}});}});};b("#section-head").each(function(){g(b(this),"head");});b(".entries-callout-ext-3").each(function(){g(b(this),"big_top");});b("#document >.section-9:eq(0) .tabbed-mod div:eq(0)").each(function(){g(b(this),"latest_news");});b("#document >.section-9:eq(0) .tabbed-mod div:eq(1)").each(function(){g(b(this),"featured_videos");});b("#document >.section-9:eq(0) .tabbed-mod div:eq(2)").each(function(){g(b(this),"most_read");});b("#features-faces").each(function(){g(b(this),"features-faces");});b(".entries-grid").each(function(){g(b(this),"sectional_feeds");});b(".section-9 .entries-media").each(function(){g(b(this),"on_fnc");});b(".section-9 .tabbed-mod:eq(1)").each(function(){g(b(this),"best_of_fnc");});b(".section-5").each(function(){g(b(this),"right_rail");});b("#section-footer-1").each(function(){g(b(this),"footer");});}});c("FBOutbrainModules",{init:function(){var h=this,j=false;if(b(".OUTBRAIN").size()>0){return false;}b(".section-5 > .market-snapshot-2:first").each(function(){h.setRightRail(b(this));j=true;});b(".section-9 > .entries-grid:first > .section:nth-child(2) > .section").each(function(){h.setSection(b(this));j=true;});if(j){var m=true;if(window.OB_Script){try{OutbrainStart();m=false;}catch(k){m=true;}}if(m){var l="http://widgets.outbrain.com/outbrain.js";b("script[src*='"+l+"']").remove();var g=document.createElement("script");g.type="text/javascript";g.async=true;g.onreadystatechange=g.onload=function(){window.OB_Script=true;};g.src=l;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(g);}}},setRightRail:function(l){var k="recommendations-hop-mod";window.OB_elements=(b.isArray(window.OB_elements))?window.OB_elements:[];var j=l.find("> ul"),g=j.height();j.replaceWith('<div id="'+k+'" style="min-height:'+g+'px;"></div>');l.addClass("show");window.OB_elements.push({containerId:k,permalink:"http://www.foxbusiness.com/homepage/outbrain.html",widgetId:"HOP",Template:"foxnews",langJS:"http://widgets.outbrain.com/lang_en.js"});},setSection:function(l){var k="recommendations-hop-two-mod";window.OB_elements=(b.isArray(window.OB_elements))?window.OB_elements:[];var j=l,g=l.height();j.replaceWith('<div id="'+k+'" style="min-height:'+g+'px;"></div>');l.addClass("show");window.OB_elements.push({containerId:k,permalink:"http://www.foxbusiness.com/homepage/outbrain.html",widgetId:"HOP_2",Template:"foxnews",langJS:"http://widgets.outbrain.com/lang_en.js"});}});c("OutbrainModules",function(){var g=new OutbrainWidgetConnector(),h=[];b(".OUTBRAIN").each(function(){var m=b(this),k=m.attr("data-src"),l=m.attr("data-widget-id"),j=m.attr("data-ob-template");if(k&&l&&j){h.push({addWidgetType:"data-widget",permalink:k,widgetId:l,Template:j,langJS:"http://widgets.outbrain.com/lang_en.js"});}});if(h.length>0){b(".section-5 > .market-snapshot-2:first").addClass("show");g.addWidget(h);}});c("boardAdAdjust",function(){var l=b(".section-5:eq(0)"),j=b(".section-5:eq(1)"),h=b("#board2-970x66"),g=h.closest(".section-14"),k=(b.browser.mozilla||b.browser.msie)?true:false;h.css((k)?{width:"1px"}:{display:"none"});g.css({width:"auto",clear:"none"});l.append(j);b.loadAttempt(30,500,function(){var m=b("#board2-970x66 iframe").css("height")||"0";m=m.replace("px","");return(!isNaN(m)&&parseInt(m,10)>1)?true:false;},function(){h.css((k)?{width:""}:{display:"block"});var m=b(".section-5 > .section-5"),n=b(".section-9:eq(1)");n.after(m);g.css({width:"970px",clear:"both"});});});c("webVideosV2",{init:function(){var g=this;b(".component.watch-now").each(function(){var j=b(this),h=new WatchNow();h.getData(function(k){g.set(j,k);});});},set:function(n,h){var q=this,l=[144,81];if(h.length===0){return false;}var o=function(v){var t=v.split("/"),s=t.length,u=t[s-3],r=t[s-2];t[s-3]=(!isNaN(u))?l[0]:u;t[s-2]=(!isNaN(r))?l[1]:r;return t.join("/");};var g=function(r){FOX_MediaIconOverlay.set({elm:r,position:"bottom right",type:"video",size:24,dim:[144,81]});};var p,m=n.find("> div > ul"),k=[];var j=function(t){var r='<li${isLive} id=${guid}><div class="m"><a href="${href-img}"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" dest_src="${img}" width="144" height="81" alt="" /></a><span>Live</span></div><h3><a href="${href-title}">${title}</a></h3></li>';r=r.replace("${title}",t.title);r=r.replace("${img}",o(t.img));if(t.isLive){var s="is-live-vid";if(t.webShow){s+=" web-show-vid";r=r.replace(/\$\{href\-(title|img)\}/gi,t.link);}r=r.replace("${isLive}",' class="'+s+'"');}else{r=r.replace("${isLive}","");r=r.replace(/\$\{href\-(title|img)\}/gi,t.link);}r=r.replace("${guid}","guid-"+t.guid);return r;};for(p=0;p<h.length;p++){k.push(j(h[p]));}n.show();m.html(k.join(""));m.find("> li").each(function(){var v=b(this),t=v.find("> .m a, > h3 a"),z=(v.hasClass("is-live-vid"))?true:false,s=(v.hasClass("web-show-vid"))?true:false,r=new Image(),y=v.find("> .m img"),w=v.find("> .m > span"),u=v.attr("id").replace("guid-","");r.onload=function(){y.attr("src",y.attr("dest_src"));g(v);if(z){w.show();}else{w.hide();}};r.src=y.attr("dest_src");if(z&&!s){t.attr("href","#").click(function(){siteStreamLivePlayer(u);return false;});}});}});c("iconOverlays",{init:function(){var g=this;b("#breakingVideo").each(function(){g.setBreakingVideo(b(this));});g.setFeatures();},setBreakingVideo:function(j){var g=this;var h=(function(){var l,k=f.site.videoPlayer.breakingVideoParser(j);for(l in k){return k[l];}}());if(h){j.css({height:h[1]+"px"});j.find("img").css({width:h[0]+"px",height:h[1]+"px"});}f.utils.mediaIconOverlay.set({elm:j,position:"bottom right",type:"video"});},setFeatures:function(){b("#features-faces ul").find("li.video, li.live").each(function(){var g=b(this);g.addClass("video-ct");g.find(".media").addClass("m");f.utils.mediaIconOverlay.set({elm:g,position:"bottom right",type:"video",size:24});});}});c("videoPlayer",{init:function(){var h=this,l="video.foxnews.com";var j={player:{location:"http://"+l+"/assets/akamai/FoxNewsPlayer.swf",flashVersion:"10.1.0",expressInstall:"http://"+l+"/assets/akamai/expressInstall.swf",environment:(window.location.hostname.indexOf("www.foxnews.com")>-1)?"prod":"beta",params:{bgcolor:"#000000",wmode:"opaque",scale:"noScale",menu:"false",allowScriptAccess:"always",allowFullScreen:"true"},flashVars:{settings_url:"http://"+l+"/assets/akamai/resources/conf/config.xml",auto_play:"false",auto_play_override:"true",auto_play_list:"false",scale_mode:"fit",next_video_timer:7,yume_ad_domain_code:"109RXfmeHtS",yume_ad_server_domain:"pl.yumenetworks.com",core_yume_ad_library_url:"http://"+l+"/assets/akamai/yume_ad_library.swf",core_yume_player_url:"http://"+l+"/assets/akamai/yume_player_4x3.swf",core_player_name:"inpage",core_ads_enabled:"true"}},display:{allow:{"homepage-video":[328,185]},restrict:{sharingOverlay:["homepage-video"],emailOverlay:["homepage-video"]},clickThruImage:{render:true,overlayImg:"http://global.fncstatic.com/static/v/all/img/vp-overlay.png"},customFlashVars:{"homepage-video":{core_ads_enabled:"false"}}}};var g=h.breakingVideoParser(b("#breakingVideo"));if(g){(function(){j.display.customFlashVars=j.display.customFlashVars||{};var m;for(m in g){j.display.allow[m]=g[m];j.display.customFlashVars[m]={core_ad_player_name:"homepage_embed",core_player_name:"homepage_embed",core_ads_enabled:"true"};}}());}var k=window.videoPlayer=new MvPlayer();k.init({videoDomain:l,namespace:"videoPlayer",config:j});},breakingVideoParser:function(k){var g=this,j=false;function h(o){var m,n=o.attr("class"),l=n.split(" "),q=false;for(m=0;m<l.length;m++){if(l[m].indexOf("video-holder-")===0){q=l[m];break;}}if(!q){return false;}l=(b.trim(q)).split("-");var p=l[l.length-1].split("x");j=(!j)?{}:j;j[q]=p;}if(k){k.find("div[class^='video-holder-']:first").each(function(){h(b(this));});}else{b("div[class^='video-holder-']").each(function(){h(b(this));});}return j;}});a("playBreakingVideo",function(m,k){var g=b("#breakingVideo");if(!m||!k){return false;}m="videoid:g"+m;var h={holder:b("#breakingVideo"),type:"video",id:m,cssClass:"video-holder-"+k,autoplay:true};var j=0,l=false;b.loadAttempt(50,100,function(){return(window.videoPlayer)?true:false;},function(){videoPlayer.render(h);});});window.playBreakingVideo=f.site.playBreakingVideo;c("onFoxVideoLinks",{init:function(){var g=this;b(".component.entries-media > div.section > ul.list-ext-2 > li a").each(function(){var h=b(this),j=h.attr("href"),l=false;if(j.indexOf("video.foxnews.com/v/")>-1){var k=j.split("video.foxnews.com/v/");if(typeof k[1]!=="undefined"){l=k[1].substring(0,k[1].indexOf("/"));if(isNaN(l)){l=false;}}}if(l){h.attr("href","#").unbind("click").click(function(){g.playLinkVideo(l);return false;});}});},playLinkVideo:function(k,j,g){var h={holder:b(".component.entries-media > div.section.video"),type:"video",id:"videoid:g"+k,cssClass:"homepage-video",autoplay:true};b.loadAttempt(50,100,function(){return(window.videoPlayer)?true:false;},function(){videoPlayer.render(h);});}});c("componentTabs",{init:function(){var g=this;b(".component.tabbed-mod").each(function(){g.set(b(this));});},set:function(h){var g={show:1,controlActiveClass:"active"};h.each(function(){var m=b(this);if(m.data("initialized")){return false;}var j=m.find("> ul.controller:first"),l=j.children(),n=m.children("div.section");g.show=(function(r){var q=1;if(j.attr("class").indexOf("active-tab-")>0){var p,s=false,o=j.attr("class").split(" ");for(p=0;o.length;p++){if(o[p].indexOf("active-tab-")>-1){s=o[p];break;}}if(s){s=s.split("-")[2];q=(isNaN(s))?q:s;}}return parseInt(q,10);}(g.show));function k(o){o.find("img").each(function(){var q=b(this),r=q.attr("pre-src"),p=new Image();if(r&&!q.data("preloaded")){p.onload=function(){q.attr("src",r);};p.src=r;q.data("preloaded",true);}});}l.each(function(p){var q=b(this),o=q.find("a");o.click(function(){if(typeof n[p]!=="undefined"){if(m.data("index")===p){return false;}l.filter(function(r){if(r!==p){b(this).removeClass(g.controlActiveClass);}else{b(this).addClass(g.controlActiveClass);}});n.filter(function(r){if(r===p){k(b(this));}b(this).css("display",(r!==p)?"none":"block");});m.data("index",p);}return false;});if(g.show===p+1){o.click();}});m.data("initialized",true);});}});c("spotlightModule",function(){var j=this,n=b("#fox-spotlight"),l=n.find(".slideshow ul"),h=l.find("> li"),g=n.find(".controls"),m=n.find(".content li");m.hide();g.hide();var k=Math.floor(Math.random()*h.size());l.find("> li:eq("+k+")").css("display","block");});c("regionalNewsModule",function(){var j=b("#regional-news");if(j.size()===0){return false;}var g=j.find("form:first select"),h=j.find("> ul.list");g.children("option").each(function(k){b(this).attr("value",k);});g.change(function(){var k=parseInt(b(this).attr("value"),10);h.each(function(l){b(this).toggleClass("active",(l===k)?true:false);});});});c("WeatherService",function(){var g=false,j=false,h=b("#weather-widget");b("#local-news").each(function(){g=new Affiliates(b(this));if(h.size()===0){g.set();}});h.each(function(){FOX_WeatherService.event.onWidgetUpdate(function(m){var l=m.data,k=b("#local-news");k.find(".region label").html([l.cityName,l.stateShort].join(", "));if(g&&!j){j=true;g.set();k.find(".region").show();k.find("fieldset > div:first").hide();}else{k.find("#local-news-zipcode,#weather_widgetInput").val(m.zip);k.find("form").submit();}});FOX_WeatherService.render.HomeWeatherWidget(b(this));});});c("breakingNewsModule",function(){BNAEmailAlerts.init({elm:b("#newsAlertsEmailSignup"),reqURL:"/portal/newsalertsubscribe",cookie:{set:true,name:"breakingNewsAlertSubmit",expires:3},SLID:{BreakingNews:"C2F278094FACCEA62391025B7A52D8EB",BusinessNews:"5C84B893BD6D939E84FAE1A8E6E9525A",GretaWire:"D98A625593049BD2AFCA3F0B008F71EF",DailyNewsletter:"D98A625593049BD2CBFB283F5508AF71",BestOfBusiness:"3DC725E303A24F8D39740C7B45D15F45",TopHeadlines:"3DC725E303A24F8DB05092D232355E43",MonthlyPolitics:"3DC725E303A24F8D836CEAE9B885C87D",LeisureLedger:"3DC725E303A24F8D02B1F9D9AAF16982",Fox411:"3DC725E303A24F8D9C92271F5026F381",BestOfOpinion:"3DC725E303A24F8D95ACD1C9C0564C20",SciTechGeekSheet:"3DC725E303A24F8DAB69E1C048904762"}});});c("timestamp",function(){var p=this;var l=function(r){var q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return q[r];};var j=function(r){var q=["January","February","March","April","May","June","July","August","September","October","November","December"];return q[r];};var n=function(t){var s=t.getHours(),r=t.getMinutes(),q=(s>11)?"PM":"AM";s=(s>12)?s-12:(s<1)?"12":s;r=(r<10)?"0"+r:r;return s+":"+r+" "+q+" ET";};if(typeof window.secTimeStamp!=="undefined"){try{var m=b("#section-head p.time-stamp");var h=secTimeStamp.replace(/am/i,"").replace(/pm/i,"");var o=new Date(h);var g=[];g.push("<span>"+j(o.getUTCMonth())+" "+o.getDate()+", "+o.getFullYear()+"</span>");g.push(" -- Updated at "+n(o));m.html(g.join("")).show();}catch(k){}}});d(function(){var g=function(l,n){var j="FX_ie9p",m=(window.location.hostname||window.location.host),p=new Date();var k={path:"/",expires:365,domain:m};switch(l){case"set":if(n){b.cookie(j,n,k);}break;case"remove":k={path:"/",domain:m};b.cookie(j,null,k);break;case"get":j=(n)?n:j;var o=(b.cookie(j))?b.cookie(j):false;return o;}};if((window.location.href.indexOf("foxnews.com")!=-1)&&(b.browser.msie)&&(parseInt(b.browser.version,10)===9)){var h=g("get");if(!h){b("#section-head").before('<div id="top-hat"></div>');b("#top-hat").each(function(){window.pinFoxNews=new PinFoxNews();pinFoxNews.init();});g("set","eyBjb29raWU6dHJ1ZSB9");}}});}(jQuery));window.marketSnapShot=(function($){var MarketSnapShot=function(){this.feed={url:"/ajax/quote/",symbols:"I:DJI,I:COMP,INX"};this.defaultText="Enter Stock Symbol";};MarketSnapShot.prototype={init:function(elm){elm=(elm===null)?$("#market-snapshot"):elm;if(elm.size()===0){return false;}this.elmObj={elm:elm,markets:elm.find("#markets"),getQuote:elm.find("> .get-quote")};this.getFeed();this.setGetQuote();},getFeed:function(){var MS=this;$.ajax({url:MS.feed.url+MS.feed.symbols,dataType:"text",success:function(data){if(!data){return false;}var json=eval("("+data+")");MS.render(json);}});},render:function(data){var x,obj={},MS=this,quotes=data.quote,len=quotes.length;for(x=0;x<len;x++){obj[quotes[x].ticker.replace(":","").toUpperCase()]=quotes[x];}MS.elmObj.markets.find("dl").each(function(){var item=$(this),id=item.attr("id").toUpperCase(),changeElm=item.find("> .net-change"),pctElm=item.find("> .net-percentage"),currElm=item.find("> .current"),definition=item.find("> dd");if(!obj[id]){return false;}var stock=obj[id],netChange=(!isNaN(stock.netChange))?parseFloat(stock.netChange):0;if(netChange>0){item.addClass("market-arrow-up");definition.addClass("market-up");}else{if(netChange<0){item.addClass("market-arrow-down");definition.addClass("market-down");}}item.find("> .current").html(stock.current);item.find("> .net-change").html(stock.netChange);item.find("> .net-percentage").html(stock.percentChange);item.click(function(){window.location.href="http://quote.foxbusiness.com/symbol/"+stock.ticker+"/snapshot";});});},setGetQuote:function(){var MS=this,form=MS.elmObj.getQuote.find("form"),input=form.find("input[name='q']"),txt=MS.defaultText;input.val(txt);input.focus(function(){if($(this).val()===txt){$(this).val("");}}).blur(function(){if($(this).val()===""){$(this).val(txt);}});function validate(val){if(!val){return false;}val=$.trim(val);if(val===txt||val.length===0){return false;}return val;}form.submit(function(){var stock=validate(input.val());if(stock){window.location.href="http://quote.foxbusiness.com/?searchString="+encodeURIComponent(stock);}return false;});}};return(new MarketSnapShot());}(jQuery));(function(c){var a={limit:5,inputStr:"Enter Zip Code",cName:"cFox_UsrLoc",cWeather:"FXN_w_locinfo",geoLink:"http://global.fncstatic.com/static/v/all/js/geo.js",domainPath:"/static/includes/partners/affiliates/",DMAFeedPath:"/static/includes/partners/dma/"};var d=(function(){var f={map:[{z:99500,s:"AK"},{z:98000,s:"WA"},{z:97000,s:"OR"},{z:96900,s:"XX"},{z:96700,s:"HI"},{z:96200,s:"AP"},{z:90000,s:"CA"},{z:89000,s:"NV"},{z:88500,s:"TX"},{z:87000,s:"NM"},{z:85000,s:"AZ"},{z:84000,s:"UT"},{z:83200,s:"ID"},{z:82000,s:"WY"},{z:80000,s:"CO"},{z:75000,s:"TX"},{z:73000,s:"OK"},{z:71600,s:"AR"},{z:70000,s:"LA"},{z:68000,s:"NE"},{z:66000,s:"KS"},{z:63000,s:"MO"},{z:60000,s:"IL"},{z:59000,s:"MT"},{z:58000,s:"ND"},{z:57000,s:"SD"},{z:56900,s:"DC"},{z:55000,s:"MN"},{z:53000,s:"WI"},{z:50000,s:"IA"},{z:48000,s:"MI"},{z:46000,s:"IN"},{z:43000,s:"OH"},{z:40000,s:"KY"},{z:38600,s:"MS"},{z:37000,s:"TN"},{z:35000,s:"AL"},{z:34000,s:"AA"},{z:32000,s:"FL"},{z:30000,s:"GA"},{z:29000,s:"SC"},{z:27000,s:"NC"},{z:24700,s:"WV"},{z:22000,s:"VA"},{z:20600,s:"MD"},{z:20000,s:"DC"},{z:19700,s:"DE"},{z:15000,s:"PA"},{z:10000,s:"NY"},{z:7000,s:"NJ"},{z:6000,s:"CT"},{z:5000,s:"VT"},{z:3900,s:"ME"},{z:3000,s:"NH"},{z:2800,s:"RI"},{z:1000,s:"MA"},{z:600,s:"PR"},{z:500,s:"NY"}],mapOneOff:{AK:98791,NY:6390,TN:42223,AM:96799},region:{Mountain:"AZ,CO,ID,MT,NM,NV,UT,WY",Northeast:"CT,DE,DC,MA,ME,MD,NJ,NH,NY,VT,PA,RI",West:"CA,AK,HI,OR,WA",Midwest:"IA,IL,IN,KS,MI,MN,ND,NE,OH,WI,SD,KY",South:"MO,AL,AR,LA,KT,MS,TN,TX,OK",Southeast:"VA,NC,SC,GA,FL,WV"},dma:{feed:"/feeds/json/zip-dma/Get_AFFDMA/${zip}/all",cb:"Get_AFFDMA"}};var g=function(){};g.prototype={getByZip:function(j){var h=j;j=(/(^\d{5}$)/.test(j))?parseInt(j,10):false;if(!j){return false;}var m=this,k=m.get.state(j),l=m.get.region(k);return({zip:h,state:k,region:l});},getByState:function(j){if(typeof j!=="string"){return false;}j=j.toUpperCase();var h,k=false,l=this;for(h in f.region){if(f.region[h].indexOf(j)>-1){k=l.get.region(j);break;}}return(k)?({state:j,region:k}):false;},getByDMA:function(k,j){if(typeof j!=="function"){return false;}var h=k;k=(/(^\d{5}$)/.test(k))?k:false;if(!k){return false;}this.get.dma(k,function(l){if(!l){j(false);}j((l.dma&&l.region&&l.city)?({zip:h,state:l.region,region:l.city,dma:l.dma}):false);});}};g.prototype.get={state:function(k){var j,m=f.map,h=f.mapOneOff;for(j in h){if(k===h[j]){return j;}}for(j=0;j<m.length;j++){var l=m[j];if(k>=l.z){return l.s;}}return false;},region:function(j){var h,k=f.region;for(h in k){if(k[h].indexOf(j)>-1){return h;}}return false;},dma:function(k,j){window[f.dma.cb]=j;var h=f.dma.feed;h=h.replace("${zip}",k);c.ajax({url:h,dataType:"script",async:true,cache:true});}};return new g();}());window.Affiliates=function(f){this.elmObj={elm:f,form:f.find("form:first"),err:f.find(".local-news-error"),holder:f.find(".item-unit")};this.currentRegion=false;this.hasInitialized=false;};Affiliates.prototype={set:function(){var f=this;this.setHolders();this.cookie.set(function(g){if(g){f.getFeed(g,true);}else{f.getGeo();}});},setHolders:function(){var k=this,l=k.elmObj,g=l.form,j=l.err,q=g.find("#local-news-zipcode,#weather_widgetInput"),o=g.find(".region"),p=g.find("fieldset > div:first"),m=g.find("input[type='submit']");var f=function(r){j.toggleClass("show-error",(r||false));};var n=function(r){d.getByDMA(r,function(s){if(s.dma){k.getFeed(s,true);}else{f(true);}});};q.val(a.inputStr);q.attr("maxlength","5");q.data("inputVal",a.inputStr);q.focus(function(){if(c(this).val()===q.data("inputVal")){c(this).val("");}}).blur(function(){if(c(this).val()===""){c(this).val(q.data("inputVal"));}}).keypress(function(){f();});o.find("a.close").bind("click",function(){o.hide();p.show();return false;});var h=function(){if(q.val()!==q.data("inputVal")){var r=g.find("#local-news-zipcode,#weather_widgetInput").val();f();n(r);FOX_WeatherService.updateWidget(r,function(){o.show();p.hide();});}return false;};g.submit(h);m.click(h);},getGeo:function(){var g=this,h=g.elmObj,f=document.createElement("script");f.type="text/javascript";f.async=true;f.src=a.geoLink;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(f);c.loadAttempt(60,500,function(){return(typeof CONST_Akamai_GEO!=="undefined")?true:false;},function(){var j=(CONST_Akamai_GEO.countryCode.toLowerCase()==="us")?CONST_Akamai_GEO.regionCode:"NY";var k=d.getByState(j);g.getFeed(k);});},getFeed:function(n,g){var k=this,h=a.domainPath+n.region.toLowerCase()+".html",j=this.elmObj.holder,m=n.region.toLowerCase();var l=function(r){r=r||false;var o=new Date(),s=o.getFullYear().toString()+(o.getMonth()+1).toString()+o.getDate().toString(),q=o.getHours()+1,p=o.getMinutes();s+=q.toString()+((r&&!isNaN(r))?(Math.floor(p/parseInt(r,10))).toString():"");return s;};var f=function(p){var q=c(p),o=(a.limit)?a.limit:5;o=(o-1<0)?0:o-1;q.find("> li:gt("+o+")").remove();return q;};if(g){h=a.DMAFeedPath+n.dma+".html";}if(!h){return false;}if(n.zip){k.cookie.save(n.zip);}k.updateTitle(n);if(k.currentRegion===m&&k.hasInitialized){return;}k.currentRegion=m;if(k.xhrReq){k.xhrReq.abort();}k.xhrReq=c.ajax({type:"GET",url:h,data:{cb:l(5)},dataType:"text",success:function(o){k.hasInitialized=true;j.html(f(o));j.find("a").click(function(){window.open(c(this).attr("href"),"_blank");return false;});},error:function(o){if(g){b("[Affiliates] No feed for: "+h);k.elmObj.elm.hide();}}});},updateTitle:function(g){var h=this.elmObj.elm.find("> h2:first"),f=h.find(".local-news-zipcode-display");if(f.size()===0){h.append('<span class="local-news-zipcode-display">&nbsp;</span>');f=h.find(".local-news-zipcode-display");}f.html((g.state)?"&nbsp;("+g.state+")":"");}};Affiliates.prototype.cookie={set:function(g){var j;if(c.cookie&&c.cookie(a.cWeather)){try{var f=c.cookie(a.cWeather);d.getByDMA(f,function(k){g(k);});}catch(h){g(false);}}else{if(c.cookie&&c.cookie(a.cName)){var f=c.cookie(a.cName);d.getByDMA(f,function(k){g(k);});}else{g(false);}}},save:function(f){if(c.cookie){if(c.cookie(a.cName)!==f){c.cookie(a.cName,f);}}}};function b(f){if(window.console&&console.log){console.log(f);}}}(jQuery));window.BNAEmailAlerts=(function(c){var d=function(){this.statusText={defaultEmail:"Enter Your Email Address:"};this.statusHtml={email:'<h2>Invalid email address.</h2><p class="try-again">Please <a href="#">click here</a> to try again.</p>',checkBox:"<h2>Choose at least one news alert.</h2>",submitted:'<h2>You have already submitted.</h2><p class="try-again">Please <a href="#">click here</a> to try again.</p>',error:'<h2>Request Error.</h2><p class="try-again">Please <a href="#">click here</a> to try again.</p>',thankyou:'<p class="submitted">Thank you. Your subscription has been submitted.</p>'};this.SLID={NewsBrief:"3DC725E303A24F8D33D4EE9EA486023C",BreakingNews:"6700EAF45F07D38EABE36F2E8EE267CE"};this.cloneElm={submission:false};};d.prototype={init:function(f){var g=this;for(i in f){if(i==="SLID"){for(e in f[i]){g.SLID[e]=f[i][e];}}else{this["_"+i]=f[i];}}this.status.root=this.cookie.root=this;var h=this._elm;this.elmObj={elm:h,form:h.find("form"),status:h.find(".status"),options:h.find("form fieldset div.option")};if(typeof c.cookie!=="undefined"){this._cookie.set=false;}this.setListeners();},setListeners:function(){var k=this,h=this.elmObj.form,j=this.elmObj.status,g=this.elmObj.options;j.css({display:"block",opacity:"0"});g.each(function(){var m=c(this),n=m.find("input[type='checkbox']").attr("checked",false),l=m.find("label");l.click(function(){n.click();});});h.find("input[name='email']").attr("value",k.statusText.defaultEmail).blur(function(){var m=c(this),l=m.attr("value");m.attr("value",(l==="")?k.statusText.defaultEmail:l);}).focus(function(){var m=c(this),l=m.attr("value");m.attr("value",(l===k.statusText.defaultEmail)?"":l);k.status.hide();});h.submit(function(){k.validate();return false;});h.find("input").filter(function(){return(c(this).not("[type='submit']"))?true:false;}).keypress(function(l){if(l.which===13){h.submit();}});if(!k.cookie.isExpired()){var f=k._cookie;h.find("fieldset").children("div:not(.option):not(.status)").hide();k.status.show(k.statusHtml.submitted);}},reset:function(){var k=this,j=this.elmObj.form,h=this.elmObj.options;var g=j.find("input[name='email']"),f=g.attr("value");if(c.trim(f).length===0){g.attr("value",k.statusText.defaultEmail);}k.status.hide();},validate:function(){var j=this,l=this.elmObj.elm,g=this.elmObj.form,f=this.elmObj.options;function h(){var m=g.find("input[name='email']").attr("value");if(!a(m)){var n=c(j.statusHtml.email);n.find("a").click(function(){j.reset();return false;});j.status.show(n);return false;}l.data("info-email",m);return true;}function k(){var n=[];f.find("input[type='checkbox']").each(function(){var r=c(this);if(r.attr("checked")){var q=r.attr("id");n.push(q);}});if(n.length===0){j.status.show(j.statusHtml.checkBox);return false;}else{var p=[];for(var m=0;m<n.length;m++){var o=n[m];if(j.SLID[o]){p.push(j.SLID[o]);}}l.data("info-slid",p.join(","));return true;}}if(h()){if(k()){j.submit();}}},submit:function(){var l=this,n=this.elmObj.elm,j=this.elmObj.form,k=this._reqURL,m="slids="+n.data("info-slid")+"&email="+n.data("info-email");function g(o){var p={};c(o).find("list").each(function(){p[c(this).attr("slid")]=c.trim(c(this).text());});return p;}function f(){l.cookie.set();j.find("fieldset").children("div:not(.option):not(.status)").hide();l.status.show(l.statusHtml.thankyou);}function h(){var o=c(l.statusHtml.error);o.find("a").click(function(){l.reset();return false;});l.status.show(o);}c.ajax({url:k,data:m,cache:false,success:function(p){var q=g(p);var o=false;for(i in q){if(q[i].indexOf("ok")<0){o=true;break;}}if(!o){f();}else{h();}},error:function(o,p){h();}});}};d.prototype.status={show:function(g){g=g||false;var f=this.root;if(g){f.elmObj.status.html(g);}f.elmObj.status.animate({opacity:"1"},300,"swing");},hide:function(){this.root.elmObj.status.animate({opacity:"0"},300,"swing");}};d.prototype.cookie={set:function(){var f=this.root;var g=f._cookie;if(g.set){c.cookie(g.name,true,{expires:g.expires});}},remove:function(){var f=this.root;var g=f._cookie;if(g.set){c.cookie(g.name,null);}},isExpired:function(){var f=this.root;var g=f._cookie;if(g.set){return(c.cookie(g.name))?false:true;}return true;}};function a(f){var g=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;return(g.test(f))?true:false;}function b(f){if(window.console&&console.log){console.log(f);}}return(new d());})(jQuery);window.FOX_GOVRecall=(function(d){var a={feed:"/archive/politics/elections/2012/06/05/Governor/WI/state-level-results/feed/json/",openPoll:(new Date("6/05/2012 21:00")),selected:["tom|barrett","scott|walker"],barLen:465,interVal:60000*2};var c=function(){this.intObj=false;};c.prototype={set:function(n){if(!n){return false;}var k=this,m=n.find("li#walker,li#barrett"),h=n.find(".header .summary > .report"),g=a.barLen;var j=function(){m.find("> .winner").hide();m.find("> .data .votes").css("visibility","hidden");m.find("> .data .bar").css("visibility","hidden");h.find(".report-pct").html("0&#37;");var o=Math.floor(g/2);m.find("> .data").css({visibility:"visible"});m.find("> .data .bar").css({width:o+"px",backgroundColor:"#CCC",visibility:"visible"});};var l=function(){k.getFeed(function(o){if(o.totals.votes>0||window.location.search.indexOf("votes=true")>-1){Render(n,o);}else{j();}});};j();if(!k.intObj){l();k.intObj=setInterval(function(){l();},a.interVal);}},isPollClose:function(){var j=false,l=a.openPoll,k=AKAMAI_TIME_HELPER.getCurrent(),h="${mm}/${dd}/${yr}";var g=function(o){var n=o.getHours()*100,m=o.getMinutes();return(n+m);};if(k.getTime()>=l.getTime()){j=true;}return j;},getFeed:function(j){var g=this,h="feed/json/";d.ajax({url:a.feed,data:{cb:f(2)},dataType:"json",success:function(l){if(!l){return false;}var k=b(l);j(k);}});}};Render=function(r,p){var t=r.find("li#walker,li#barrett"),m=r.find(".header .summary > .report"),s=a.barLen,o=[],q=0;var g=function(w){var v=0;if(!isNaN(w)){v=((Math.floor(parseInt(w,10))).toString());}return v;};var l=function(w){var v=0;if(q===0){v=Math.floor((w/100)*s);q=v;}else{v=s-q;}return(v+"px");};var k=function(y){var w="";if(!isNaN(y)){w=(y.toString()).split("");w.reverse();var v=w.length;for(x=0;x<v;x+=1){if(x>0&&x!==(v-1)&&x%3===2){w[x]=","+w[x];}}w.reverse();w=w.join("");}return(w.length>0)?("("+w+")"):w;};t.each(function(v){var w=d(this),C=w.attr("id"),A=w.find("> .data .votes");if(p.candidate[C]){var z=p.candidate[C],y=g(z.votes.percentage);if(z.isWinner){w.find(".winner").show();}else{w.find(".winner").hide();}var B=(v===0)?'${pct} <span class="total">${votes}</span>':'<span class="total">${votes}</span> ${pct}';B=B.replace("${pct}",(y+"&#37;"));B=B.replace("${votes}",k(z.votes.count));A.html(B);A.css("visibility","visible");o.push({id:C,width:l(y)});}});var n=0,h=false,j=true;if(o.length===2){for(n=0;n<o.length;n+=1){var u=o[n];if(u.width==="0px"){h=true;}else{j=false;}}for(n=0;n<o.length;n+=1){var u=o[n];if(j){}else{t.find("> .data .bar").css({backgroundColor:""});if(h){r.find("li#"+u.id+" .data .bar").css("width",(u.width!=="0px")?(s+"px"):u.width);}else{r.find("li#"+u.id+" .data .bar").css("width",u.width);}}}}m.find(".report-pct").html(g(p.totals.expectedPercentage)+"&#37;");};var b=function(n){var g,h=this,l=n.candidateResults;var k=a.selected;var o={totals:n.stateTotals,raw:n,candidate:{}};var m=function(r){var t,p=false;for(t=0;t<k.length;t+=1){var q=k[t].split("|");if(q[0]===r.firstName.toLowerCase()&&q[1]===r.lastName.toLowerCase()){p=true;break;}}return p;};for(g=0;g<l.length;g+=1){var j=l[g].candidate;if(m(j)){o.candidate[j.lastName.toLowerCase()]=l[g];}}return o;};var f=function(k){k=k||false;var g=(window.AKAMAI_TIME_HELPER)?window.AKAMAI_TIME_HELPER.getCurrent():new Date(),l=g.getFullYear().toString()+(g.getMonth()+1).toString()+g.getDate().toString(),j=g.getHours()+1,h=g.getMinutes();l+=j.toString()+((k&&!isNaN(k))?(Math.floor(h/parseInt(k,10))).toString():"");return l;};return(new c());}(jQuery));window.PinFoxNews=(function(b){var a=function(){var c=this;c._jsonURL="http://www.foxnews.com/feeds/app/iepinnedsite/latest/feed/json";c._collectInterval=300000;c._maxStories=10;c._notificationTimer=15000;};a.prototype={init:function(){var c=this;c.setHeader();if(!(b.pinify.isPinned())&&typeof localStorage.foxBanner==="undefined"){c.setTopBanner();}c.setThumbnails();c.fetchFeed();if(b.pinify.firstRunState()===1){localStorage.setItem("foxBanner","fox100");}},setHeader:function(){b("head").pinify({applicationName:"Fox News \u2013 Breaking News Updates",favIcon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/favicon1.ico",tooltip:"Fox News",startUrl:"http://www.foxnews.com/?cmpid=ie9pinned",navColor:"#183A53",window:"width=1024;height=768",tasks:[{name:"Entertainment",action:"http://www.foxnews.com/entertainment/index.html?cmpid=ie9pinned",icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/fox.ico"},{name:"SciTech",action:"http://www.foxnews.com/scitech/index.html?cmpid=ie9pinned",icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/fox.ico"},{name:"U.S.",action:"http://www.foxnews.com/us/index.html?cmpid=ie9pinned",icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/fox.ico"},{name:"World",action:"http://www.foxnews.com/world/index.html?cmpid=ie9pinned",icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/fox.ico"},{name:"Politics",action:"http://www.foxnews.com/politics/index.html?cmpid=ie9pinned",icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/fox.ico"}]});},setTopBanner:function(){b("#top-hat").pinify("pinTeaser",{type:"topHat",pinText:"Install our IE9 application today! Drag the tab above to your Windows Taskbar to pin!",style:{color:"#000"}});},setThumbnails:function(){b.pinify.createThumbbarButtons({buttons:[{icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/twitter.ico",name:"Twitter",click:function(){window.open("http://twitter.com/share?text="+encodeURIComponent("Fox News")+"&url="+encodeURIComponent(window.location),"twitter_share","width=600,height=500");}},{icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/facebook.ico",name:"Facebook",click:function(){window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(window.location),"facebook_share","width=600,height=500");}}]});},setOverlay:function(c){b.pinify.flashTaskbar();b.pinify.addOverlay({icon:"http://global.fncstatic.com/static/v/fn2/img/ie9/icons/overlay.ico"});window.setTimeout(function(){b.pinify.clearOverlay();},c);},setNotification:function(f){var d=this;var j=(typeof localStorage.foxPinData==="undefined")?[]:JSON.parse(localStorage.foxPinData),h=0;b.pinify.clearOverlay();for(var g=0;g<j.length;g++){for(var c=0;c<f.length;c++){if(f[c].name===j[g].name){h+=1;}}}if(h<d._maxStories){d.setOverlay(d._notificationTimer);}},fetchFeed:function(){var d=this,j,c=[];var h=function(m){var o=[],l={};for(var n=0;n<m.length;n++){if(!(l[m[n].title]||l[m[n].id])){if(!l[m[n].title]){l[m[n].title]={};}if(!l[m[n].id]){l[m[n].id]={};}o.push(m[n]);}}return o;};var f=function(l){b.pinify.addJumpList({title:"Latest",items:l,target:"tab"});};var k=function(n){var m=this,l="FOXPinHandler";window[l]=function(o){g(o);};b.ajax({type:"GET",url:n,data:{callback:l},dataType:"script",cache:true,async:true});};var g=function(o){var r=[],s=o.response.docs;s=h(s);for(var p=s.length-1;p>=0;p--){delete s.content_type;delete s.export_headline;delete s.description;delete s.image_url;delete s.repository;delete s.native_id;delete s.last_modified_date;delete s.site;delete s.author;delete s.source;delete s.section_path;delete s.keyword;delete s.dateline;delete s.body;var q=s[p],l=b.trim(q.title),w=(l).substr(0,1)=="@"?(l).replace(/@/,""):l;var v=b.trim(q.url),u="http://global.fncstatic.com/static/v/fn2/img/ie9/icons/fox.ico",t="?cmpid=ie9pinned";var n=(b.isArray(v))?v:[v];var m=n[0];var z=m+t;var y={name:w,url:z,icon:u};if(p===d._maxStories){return false;}r.push(y);}d.setNotification(r);localStorage.removeItem("foxPinData");localStorage.setItem("foxPinData",JSON.stringify(r));f(r);};k(d._jsonURL);window.setInterval(function(){k(d._jsonURL);},d._collectInterval);}};return a;}(jQuery));(function(b){var c={optionsHP:{fxhomePage:"#fx-homePage",opener:".opener",banner:".hp-drop",closeBanner:".hp-drop a.close",dialog:".hp-pop",closeDialog:".hp-pop a.close",ieDefault:"#ie-default",questionMarkImg:"question-mark.png",topBanner:'<div class="hp-drop"><div><span></span><h2><a class="opener" href="#">Want to make Fox News your homepage? Just click here</a>.</h2><a class="close"><span></span></a></div></div>',trigger:"opener",modalBox:'<div class="hp-pop"></div>',modalHead:'<div class="fn-logo inner"></div><a class="close inner"></a><div class="head inner"><div class="br-logo"></div><p>Yes! Make foxnews.com my homepage.</p></div>',ie:'<div class="steps inner"><p>Click the button below to confirm you\'d like to set <strong>www.foxnews.com</strong> as your home page.</p><div id="ie-default" class="btn"><a></a></div></div>',safari:"<div class=\"steps inner\"><ul><li><span></span><p>Pull down the <strong>Safari</strong> menu.</p></li><li><span></span><p>Select <strong>Preferences</strong></p></li><li><span></span><p>In the <strong>General</strong> tab's homepage entry box, type <strong>www.foxnews.com</strong> and you're done! </p></li></ul></div>",chrome:'<div class="steps inner"><ul><li><span></span><p>Click the settings icon <i></i> in the top right corner of your browser. Select <strong>Settings</strong>. </p></li><li><span></span><p>Under <strong>On startup</strong> select <strong>Open a specific page or set of pages.</strong> Click <strong>Set pages.</strong> Enter <strong>www.foxnews.com,</strong> and click <strong>OK.</strong></p></li><li><span></span> <p>Under <strong>Appearance</strong> click <strong>Show home button.</strong> Click <strong>Change,</strong> enter <strong>www.foxnews.com,</strong> and click <strong>OK.</strong> </p></li></ul></div>',firefoxMac:'<div class="steps inner"><ul><li><span></span><p>In the <strong>Firefox</strong> menu, select <strong>Preferences</strong>.</p></li><li><span></span><p>At the top of the dialog box, select the <strong>Main</strong> tab.</p></li><li><span></span><p>In the <strong>Home Page</strong> text box, type <strong>www.foxnews.com</strong>, and click <strong>OK.</strong></p></li></ul></div>',firefoxWin:'<div class="steps inner"><ul><li><span></span><p>In the <strong>Tools</strong> menu, select <strong>Options.</strong></p></li><li><span></span><p>At the top of the dialog box, select the <strong>General</strong> tab.</p></li><li><span></span><p>In the <strong>Home Page</strong> text box, type <strong>www.foxnews.com</strong>, and click <strong>OK.</strong></p></li></ul></div>'},init:function(){var d=this;d.setBanner();},setBanner:function(){var d=this,f=d.optionsHP.fxhomePage;b(f).append(d.optionsHP.topBanner);d.bindEvents();},handleClick:function(f){f.preventDefault();var d=f.data.context;d.checkBrowser();},closeBanner:function(f){f.preventDefault();var d=b(this),g=d.parent().parent().parent();a("set","eyBjb29raWU6dFX");g.animate({opacity:0.25,left:"+=50",height:"toggle"},1000,function(){g.remove();});b("#board1-970x66").css("visibility","visible");b("#frame1-300x250").css("visibility","visible");b("#board2-970x66").css("visibility","visible");},closeDialog:function(f){f.preventDefault();var d=b(this),g=d.parent().parent();a("set","eyBjb29raWU6dFX");g.animate({opacity:0.25,left:"+=50",height:"toggle"},1000,function(){g.remove();});b(".overlay-layer").fadeOut("slow",function(){b(this).remove();});b("#board1-970x66").css("visibility","visible");b("#frame1-300x250").css("visibility","visible");b("#board2-970x66").css("visibility","visible");},handleIE:function(f){f.preventDefault();var d=f.data.context;a("set","eyBjb29raWU6dFX");b(d.optionsHP.closeDialog).trigger("click");document.body.style.behavior="url(#default#homepage)";document.body.setHomePage("http://www.foxnews.com");},bindEvents:function(){var d=this;b(d.optionsHP.opener).bind("click",{context:d},d.handleClick);b(d.optionsHP.closeBanner).bind("click",{context:d},d.closeBanner);b(d.optionsHP.closeDialog).live("click",{context:d},d.closeDialog);b(d.optionsHP.ieDefault).live("click",{context:d},d.handleIE);},checkBrowser:function(){var f=this,g=navigator.userAgent.toLowerCase(),d=navigator.platform.toLowerCase(),k=d.indexOf("mac"),j=d.indexOf("win");b.browser.chrome=/chrome/.test(g);var h=function(p){b("#dialog-"+p).remove();var o=b(f.optionsHP.modalBox),m=b(f.optionsHP.modalHead),q=f.optionsHP[p],n=b(q),l=(p==="firefoxMac"||p==="firefoxWin")?"firefox":p;b("#board1-970x66").css("visibility","hidden");b("#frame1-300x250").css("visibility","hidden");b("#board2-970x66").css("visibility","hidden");b("body").append(o);b(".hp-pop").attr("id","dialog-"+p);b(".hp-pop").addClass(l);o.append(m);o.append(n).fadeIn("slow",function(){o.show();});b(".inner").wrapAll("<div />");b("body").prepend('<div class="overlay-layer"></div>');b(".overlay-layer").css("display","block");(function(){var u=b("body"),w=b(window),B=u.width(),t=o.outerWidth(),A=o.outerHeight(),r=100,s=false;var y=function(C){return C+"px";};var z=function(){var F,C=w.height(),E=w.scrollTop(),D=A;D=Math.floor((C/2)-(D/2));F=E+((D<0)?0:D);return F;};var v=function(){var D=u.offset().left,C=u.width();C=Math.floor((C/2)-(t/2));return(D+C);};o.css({position:"absolute",left:y(v()),top:y(z())});b(window).scroll(function(){clearTimeout(s);s=setTimeout(function(){o.animate({top:y(z())},150,"swing");},150);});b(window).resize(function(){clearTimeout(s);s=setTimeout(function(){o.animate({top:y(z()),left:(v())},150,"swing");},150);});}());};if(b.browser.msie){h("ie");}if(b.browser.chrome){g=g.substring(g.indexOf("chrome/")+7);g=g.substring(0,g.indexOf("."));b.browser.version=g;b.browser.safari=false;h("chrome");}if(b.browser.safari){g=g.substring(g.indexOf("version/")+8);g=g.substring(0,g.indexOf("."));b.browser.version=g;h("safari");}if(b.browser.mozilla){if(k===0){h("firefoxMac");}else{if(j===0){h("firefoxWin");}}}}};b(function(){if(window.location.href.indexOf("foxnews.com")!=-1){b("body").prepend('<div id="fx-homePage"></div>');var d=a("get");if(!d){c.init();}}});var a=function(g,j){var d="FX_HomePage",h=(window.location.hostname||window.location.host),l=new Date();var f={path:"/",expires:365,domain:h};switch(g){case"set":if(j){b.cookie(d,j,f);}break;case"remove":f={path:"/",domain:h};b.cookie(d,null,f);break;case"get":d=(j)?j:d;var k=(b.cookie(d))?b.cookie(d):false;return k;}};}(jQuery));
/*Wed May 15 12:10:20 EDT 2013*/
