// synapse version 2.0.1
// timestamp 1369064475325
var onswipe={host:"http://synapse.onswipe.com",usernameRegex:/\?usr=([A-Za-z0-9\-]+)/,synapseElement:"script#onswipe_synapse",redirect:!1,supported:!1,standalone:!1,devicesSupported:["ipad","kindle_fire","android","iphone","nexus_chrome"]};onswipe.createIframe=function(e){var n=document.createElement("iframe");return n.src=e,n.name="onswipe_synapse_iframe",n.style.display="none",n},onswipe.getUsername=function(){var e="@@username";if("@@username"!==e&&""!==e)return e;if(window.ONSWIPE_USR)return window.ONSWIPE_USR;var n=document.querySelector(onswipe.synapseElement);if(!n||!n.src)return!1;var r=n.src.match(onswipe.usernameRegex);return!r||2>r.length?!1:r[1]},onswipe.handleMessage=function(e){try{if(e.origin==onswipe.host&&e.data&&~e.data.indexOf("redirect: http://")){var n=e.data.replace("redirect: ","");top===self?window.location=n:self.parent.location=n}}catch(r){}},onswipe.determineDevice=function(){var e="unknown",n=navigator.userAgent.toLowerCase();return~n.indexOf("ipad")?e="ipad":~n.indexOf("silk-accelerated")||~n.indexOf("kindle")?e="kindle_fire":~n.indexOf("android")?e=~n.indexOf("nexus 7")&&~n.indexOf("chrome")?"nexus_chrome":~n.indexOf("mobile")?"android_mobile":"android_tablet":~n.indexOf("iphone")&&(e="iphone"),e},onswipe.determineiOSMajorVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=parseInt(e[1],10);if(!isNaN(n))return n}return 1e3},navigator&&navigator.standalone&&(onswipe.standalone=!0);try{~document.URL.indexOf("onswipe_redirect=no")?onswipe.redirect="no":~document.URL.indexOf("onswipe_redirect=never")&&(onswipe.redirect="never"),onswipe.device=onswipe.determineDevice(),~onswipe.devicesSupported.indexOf(onswipe.device)&&(onswipe.supported=!0),5>onswipe.determineiOSMajorVersion()&&(onswipe.supported=!1),onswipe.usr=onswipe.getUsername()}catch(e){}if(onswipe.supported&&!onswipe.redirect){onswipe.referrer=document.referrer?document.referrer:"";var url=location.href;onswipe.frameUrl=onswipe.host+"/v2/frame"+"?usr="+onswipe.usr+"&url="+encodeURIComponent(url)+"&device="+onswipe.device+"&ref="+encodeURIComponent(onswipe.referrer),onswipe.iframe=onswipe.createIframe(onswipe.frameUrl),document.head.appendChild(onswipe.iframe),window.addEventListener("message",onswipe.handleMessage,!1)}"never"==onswipe.redirect&&(onswipe.frameUrl=onswipe.host+"/v2/out?usr="+onswipe.usr,onswipe.iframe=onswipe.createIframe(onswipe.frameUrl),document.head.appendChild(onswipe.iframe));